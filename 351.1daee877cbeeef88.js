(self.webpackChunkdiscover_canada=self.webpackChunkdiscover_canada||[]).push([[351],{9351:(Z,s,k)=>{"use strict";k.r(s),k.d(s,{HomeComponent:()=>se});var r=k(6814),m=k(5195),n=k(5879),D=k(8337),Q=k(2495),F=k(8645),T=k(7394);let G=0;const q=new n.OlP("CdkAccordion");let U=(()=>{var X;class J{constructor(){this._stateChanges=new F.x,this._openCloseAllActions=new F.x,this.id="cdk-accordion-"+G++,this._multi=!1}get multi(){return this._multi}set multi(f){this._multi=(0,Q.Ig)(f)}openAll(){this._multi&&this._openCloseAllActions.next(!0)}closeAll(){this._openCloseAllActions.next(!1)}ngOnChanges(f){this._stateChanges.next(f)}ngOnDestroy(){this._stateChanges.complete(),this._openCloseAllActions.complete()}}return(X=J).\u0275fac=function(f){return new(f||X)},X.\u0275dir=n.lG2({type:X,selectors:[["cdk-accordion"],["","cdkAccordion",""]],inputs:{multi:"multi"},exportAs:["cdkAccordion"],features:[n._Bn([{provide:q,useExisting:X}]),n.TTD]}),J})(),C=0,w=(()=>{var X;class J{get expanded(){return this._expanded}set expanded(f){f=(0,Q.Ig)(f),this._expanded!==f&&(this._expanded=f,this.expandedChange.emit(f),f?(this.opened.emit(),this._expansionDispatcher.notify(this.id,this.accordion?this.accordion.id:this.id)):this.closed.emit(),this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled}set disabled(f){this._disabled=(0,Q.Ig)(f)}constructor(f,M,le){this.accordion=f,this._changeDetectorRef=M,this._expansionDispatcher=le,this._openCloseAllSubscription=T.w0.EMPTY,this.closed=new n.vpe,this.opened=new n.vpe,this.destroyed=new n.vpe,this.expandedChange=new n.vpe,this.id="cdk-accordion-child-"+C++,this._expanded=!1,this._disabled=!1,this._removeUniqueSelectionListener=()=>{},this._removeUniqueSelectionListener=le.listen((ve,he)=>{this.accordion&&!this.accordion.multi&&this.accordion.id===he&&this.id!==ve&&(this.expanded=!1)}),this.accordion&&(this._openCloseAllSubscription=this._subscribeToOpenCloseAllActions())}ngOnDestroy(){this.opened.complete(),this.closed.complete(),this.destroyed.emit(),this.destroyed.complete(),this._removeUniqueSelectionListener(),this._openCloseAllSubscription.unsubscribe()}toggle(){this.disabled||(this.expanded=!this.expanded)}close(){this.disabled||(this.expanded=!1)}open(){this.disabled||(this.expanded=!0)}_subscribeToOpenCloseAllActions(){return this.accordion._openCloseAllActions.subscribe(f=>{this.disabled||(this.expanded=f)})}}return(X=J).\u0275fac=function(f){return new(f||X)(n.Y36(q,12),n.Y36(n.sBO),n.Y36(D.A8))},X.\u0275dir=n.lG2({type:X,selectors:[["cdk-accordion-item"],["","cdkAccordionItem",""]],inputs:{expanded:"expanded",disabled:"disabled"},outputs:{closed:"closed",opened:"opened",destroyed:"destroyed",expandedChange:"expandedChange"},exportAs:["cdkAccordionItem"],features:[n._Bn([{provide:q,useValue:void 0}])]}),J})(),a=(()=>{var X;class J{}return(X=J).\u0275fac=function(f){return new(f||X)},X.\u0275mod=n.oAB({type:X}),X.\u0275inj=n.cJS({}),J})();var _=k(8484),A=k(3680),y=k(4300),P=k(3997),u=k(7921),t=k(2181),e=k(8180),o=k(6028),v=k(6232),S=k(3019),p=k(6825);const c=["body"];function b(X,J){}const N=[[["mat-expansion-panel-header"]],"*",[["mat-action-row"]]],I=["mat-expansion-panel-header","*","mat-action-row"];function Y(X,J){if(1&X&&n._UZ(0,"span",2),2&X){const H=n.oxw();n.Q6J("@indicatorRotate",H._getExpandedState())}}const W=[[["mat-panel-title"]],[["mat-panel-description"]],"*"],j=["mat-panel-title","mat-panel-description","*"],z=new n.OlP("MAT_ACCORDION"),ee="225ms cubic-bezier(0.4,0.0,0.2,1)",oe={indicatorRotate:(0,p.X$)("indicatorRotate",[(0,p.SB)("collapsed, void",(0,p.oB)({transform:"rotate(0deg)"})),(0,p.SB)("expanded",(0,p.oB)({transform:"rotate(180deg)"})),(0,p.eR)("expanded <=> collapsed, void => collapsed",(0,p.jt)(ee))]),bodyExpansion:(0,p.X$)("bodyExpansion",[(0,p.SB)("collapsed, void",(0,p.oB)({height:"0px",visibility:"hidden"})),(0,p.SB)("expanded",(0,p.oB)({height:"*",visibility:""})),(0,p.eR)("expanded <=> collapsed, void => collapsed",(0,p.jt)(ee))])},V=new n.OlP("MAT_EXPANSION_PANEL");let g=(()=>{var X;class J{constructor(f,M){this._template=f,this._expansionPanel=M}}return(X=J).\u0275fac=function(f){return new(f||X)(n.Y36(n.Rgc),n.Y36(V,8))},X.\u0275dir=n.lG2({type:X,selectors:[["ng-template","matExpansionPanelContent",""]]}),J})(),l=0;const x=new n.OlP("MAT_EXPANSION_PANEL_DEFAULT_OPTIONS");let L=(()=>{var X;class J extends w{get hideToggle(){return this._hideToggle||this.accordion&&this.accordion.hideToggle}set hideToggle(f){this._hideToggle=(0,Q.Ig)(f)}get togglePosition(){return this._togglePosition||this.accordion&&this.accordion.togglePosition}set togglePosition(f){this._togglePosition=f}constructor(f,M,le,ve,he,pe,be){super(f,M,le),this._viewContainerRef=ve,this._animationMode=pe,this._hideToggle=!1,this.afterExpand=new n.vpe,this.afterCollapse=new n.vpe,this._inputChanges=new F.x,this._headerId="mat-expansion-panel-header-"+l++,this._bodyAnimationDone=new F.x,this.accordion=f,this._document=he,this._bodyAnimationDone.pipe((0,P.x)((ye,Ee)=>ye.fromState===Ee.fromState&&ye.toState===Ee.toState)).subscribe(ye=>{"void"!==ye.fromState&&("expanded"===ye.toState?this.afterExpand.emit():"collapsed"===ye.toState&&this.afterCollapse.emit())}),be&&(this.hideToggle=be.hideToggle)}_hasSpacing(){return!!this.accordion&&this.expanded&&"default"===this.accordion.displayMode}_getExpandedState(){return this.expanded?"expanded":"collapsed"}toggle(){this.expanded=!this.expanded}close(){this.expanded=!1}open(){this.expanded=!0}ngAfterContentInit(){this._lazyContent&&this._lazyContent._expansionPanel===this&&this.opened.pipe((0,u.O)(null),(0,t.h)(()=>this.expanded&&!this._portal),(0,e.q)(1)).subscribe(()=>{this._portal=new _.UE(this._lazyContent._template,this._viewContainerRef)})}ngOnChanges(f){this._inputChanges.next(f)}ngOnDestroy(){super.ngOnDestroy(),this._bodyAnimationDone.complete(),this._inputChanges.complete()}_containsFocus(){if(this._body){const f=this._document.activeElement,M=this._body.nativeElement;return f===M||M.contains(f)}return!1}}return(X=J).\u0275fac=function(f){return new(f||X)(n.Y36(z,12),n.Y36(n.sBO),n.Y36(D.A8),n.Y36(n.s_b),n.Y36(r.K0),n.Y36(n.QbO,8),n.Y36(x,8))},X.\u0275cmp=n.Xpm({type:X,selectors:[["mat-expansion-panel"]],contentQueries:function(f,M,le){if(1&f&&n.Suo(le,g,5),2&f){let ve;n.iGM(ve=n.CRH())&&(M._lazyContent=ve.first)}},viewQuery:function(f,M){if(1&f&&n.Gf(c,5),2&f){let le;n.iGM(le=n.CRH())&&(M._body=le.first)}},hostAttrs:[1,"mat-expansion-panel"],hostVars:6,hostBindings:function(f,M){2&f&&n.ekj("mat-expanded",M.expanded)("_mat-animation-noopable","NoopAnimations"===M._animationMode)("mat-expansion-panel-spacing",M._hasSpacing())},inputs:{disabled:"disabled",expanded:"expanded",hideToggle:"hideToggle",togglePosition:"togglePosition"},outputs:{opened:"opened",closed:"closed",expandedChange:"expandedChange",afterExpand:"afterExpand",afterCollapse:"afterCollapse"},exportAs:["matExpansionPanel"],features:[n._Bn([{provide:z,useValue:void 0},{provide:V,useExisting:X}]),n.qOj,n.TTD],ngContentSelectors:I,decls:7,vars:4,consts:[["role","region",1,"mat-expansion-panel-content",3,"id"],["body",""],[1,"mat-expansion-panel-body"],[3,"cdkPortalOutlet"]],template:function(f,M){1&f&&(n.F$t(N),n.Hsn(0),n.TgZ(1,"div",0,1),n.NdJ("@bodyExpansion.done",function(ve){return M._bodyAnimationDone.next(ve)}),n.TgZ(3,"div",2),n.Hsn(4,1),n.YNc(5,b,0,0,"ng-template",3),n.qZA(),n.Hsn(6,2),n.qZA()),2&f&&(n.xp6(1),n.Q6J("@bodyExpansion",M._getExpandedState())("id",M.id),n.uIk("aria-labelledby",M._headerId),n.xp6(4),n.Q6J("cdkPortalOutlet",M._portal))},dependencies:[_.Pl],styles:['.mat-expansion-panel{--mat-expansion-container-shape:4px;box-sizing:content-box;display:block;margin:0;overflow:hidden;transition:margin 225ms cubic-bezier(0.4, 0, 0.2, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);position:relative;background:var(--mat-expansion-container-background-color);color:var(--mat-expansion-container-text-color);border-radius:var(--mat-expansion-container-shape)}.mat-expansion-panel:not([class*=mat-elevation-z]){box-shadow:0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12)}.mat-accordion .mat-expansion-panel:not(.mat-expanded),.mat-accordion .mat-expansion-panel:not(.mat-expansion-panel-spacing){border-radius:0}.mat-accordion .mat-expansion-panel:first-of-type{border-top-right-radius:var(--mat-expansion-container-shape);border-top-left-radius:var(--mat-expansion-container-shape)}.mat-accordion .mat-expansion-panel:last-of-type{border-bottom-right-radius:var(--mat-expansion-container-shape);border-bottom-left-radius:var(--mat-expansion-container-shape)}.cdk-high-contrast-active .mat-expansion-panel{outline:solid 1px}.mat-expansion-panel.ng-animate-disabled,.ng-animate-disabled .mat-expansion-panel,.mat-expansion-panel._mat-animation-noopable{transition:none}.mat-expansion-panel-content{display:flex;flex-direction:column;overflow:visible;font-family:var(--mat-expansion-container-text-font);font-size:var(--mat-expansion-container-text-size);font-weight:var(--mat-expansion-container-text-weight);line-height:var(--mat-expansion-container-text-line-height);letter-spacing:var(--mat-expansion-container-text-tracking)}.mat-expansion-panel-content[style*="visibility: hidden"] *{visibility:hidden !important}.mat-expansion-panel-body{padding:0 24px 16px}.mat-expansion-panel-spacing{margin:16px 0}.mat-accordion>.mat-expansion-panel-spacing:first-child,.mat-accordion>*:first-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-top:0}.mat-accordion>.mat-expansion-panel-spacing:last-child,.mat-accordion>*:last-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-bottom:0}.mat-action-row{border-top-style:solid;border-top-width:1px;display:flex;flex-direction:row;justify-content:flex-end;padding:16px 8px 16px 24px;border-top-color:var(--mat-expansion-actions-divider-color)}.mat-action-row .mat-button-base,.mat-action-row .mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-action-row .mat-button-base,[dir=rtl] .mat-action-row .mat-mdc-button-base{margin-left:0;margin-right:8px}'],encapsulation:2,data:{animation:[oe.bodyExpansion]},changeDetection:0}),J})();class i{}const h=(0,A.sb)(i);let d=(()=>{var X;class J extends h{constructor(f,M,le,ve,he,pe,be){super(),this.panel=f,this._element=M,this._focusMonitor=le,this._changeDetectorRef=ve,this._animationMode=pe,this._parentChangeSubscription=T.w0.EMPTY;const ye=f.accordion?f.accordion._stateChanges.pipe((0,t.h)(Ee=>!(!Ee.hideToggle&&!Ee.togglePosition))):v.E;this.tabIndex=parseInt(be||"")||0,this._parentChangeSubscription=(0,S.T)(f.opened,f.closed,ye,f._inputChanges.pipe((0,t.h)(Ee=>!!(Ee.hideToggle||Ee.disabled||Ee.togglePosition)))).subscribe(()=>this._changeDetectorRef.markForCheck()),f.closed.pipe((0,t.h)(()=>f._containsFocus())).subscribe(()=>le.focusVia(M,"program")),he&&(this.expandedHeight=he.expandedHeight,this.collapsedHeight=he.collapsedHeight)}get disabled(){return this.panel.disabled}_toggle(){this.disabled||this.panel.toggle()}_isExpanded(){return this.panel.expanded}_getExpandedState(){return this.panel._getExpandedState()}_getPanelId(){return this.panel.id}_getTogglePosition(){return this.panel.togglePosition}_showToggle(){return!this.panel.hideToggle&&!this.panel.disabled}_getHeaderHeight(){const f=this._isExpanded();return f&&this.expandedHeight?this.expandedHeight:!f&&this.collapsedHeight?this.collapsedHeight:null}_keydown(f){switch(f.keyCode){case o.L_:case o.K5:(0,o.Vb)(f)||(f.preventDefault(),this._toggle());break;default:return void(this.panel.accordion&&this.panel.accordion._handleHeaderKeydown(f))}}focus(f,M){f?this._focusMonitor.focusVia(this._element,f,M):this._element.nativeElement.focus(M)}ngAfterViewInit(){this._focusMonitor.monitor(this._element).subscribe(f=>{f&&this.panel.accordion&&this.panel.accordion._handleHeaderFocus(this)})}ngOnDestroy(){this._parentChangeSubscription.unsubscribe(),this._focusMonitor.stopMonitoring(this._element)}}return(X=J).\u0275fac=function(f){return new(f||X)(n.Y36(L,1),n.Y36(n.SBq),n.Y36(y.tE),n.Y36(n.sBO),n.Y36(x,8),n.Y36(n.QbO,8),n.$8M("tabindex"))},X.\u0275cmp=n.Xpm({type:X,selectors:[["mat-expansion-panel-header"]],hostAttrs:["role","button",1,"mat-expansion-panel-header","mat-focus-indicator"],hostVars:15,hostBindings:function(f,M){1&f&&n.NdJ("click",function(){return M._toggle()})("keydown",function(ve){return M._keydown(ve)}),2&f&&(n.uIk("id",M.panel._headerId)("tabindex",M.tabIndex)("aria-controls",M._getPanelId())("aria-expanded",M._isExpanded())("aria-disabled",M.panel.disabled),n.Udp("height",M._getHeaderHeight()),n.ekj("mat-expanded",M._isExpanded())("mat-expansion-toggle-indicator-after","after"===M._getTogglePosition())("mat-expansion-toggle-indicator-before","before"===M._getTogglePosition())("_mat-animation-noopable","NoopAnimations"===M._animationMode))},inputs:{tabIndex:"tabIndex",expandedHeight:"expandedHeight",collapsedHeight:"collapsedHeight"},features:[n.qOj],ngContentSelectors:j,decls:5,vars:3,consts:[[1,"mat-content"],["class","mat-expansion-indicator",4,"ngIf"],[1,"mat-expansion-indicator"]],template:function(f,M){1&f&&(n.F$t(W),n.TgZ(0,"span",0),n.Hsn(1),n.Hsn(2,1),n.Hsn(3,2),n.qZA(),n.YNc(4,Y,1,1,"span",1)),2&f&&(n.ekj("mat-content-hide-toggle",!M._showToggle()),n.xp6(4),n.Q6J("ngIf",M._showToggle()))},dependencies:[r.O5],styles:['.mat-expansion-panel-header{display:flex;flex-direction:row;align-items:center;padding:0 24px;border-radius:inherit;transition:height 225ms cubic-bezier(0.4, 0, 0.2, 1);height:var(--mat-expansion-header-collapsed-state-height);font-family:var(--mat-expansion-header-text-font);font-size:var(--mat-expansion-header-text-size);font-weight:var(--mat-expansion-header-text-weight);line-height:var(--mat-expansion-header-text-line-height);letter-spacing:var(--mat-expansion-header-text-tracking)}.mat-expansion-panel-header.mat-expanded{height:var(--mat-expansion-header-expanded-state-height)}.mat-expansion-panel-header[aria-disabled=true]{color:var(--mat-expansion-header-disabled-state-text-color)}.mat-expansion-panel-header:not([aria-disabled=true]){cursor:pointer}.mat-expansion-panel:not(.mat-expanded) .mat-expansion-panel-header:not([aria-disabled=true]):hover{background:var(--mat-expansion-header-hover-state-layer-color)}@media(hover: none){.mat-expansion-panel:not(.mat-expanded) .mat-expansion-panel-header:not([aria-disabled=true]):hover{background:var(--mat-expansion-container-background-color)}}.mat-expansion-panel .mat-expansion-panel-header:not([aria-disabled=true]).cdk-keyboard-focused,.mat-expansion-panel .mat-expansion-panel-header:not([aria-disabled=true]).cdk-program-focused{background:var(--mat-expansion-header-focus-state-layer-color)}.mat-expansion-panel-header._mat-animation-noopable{transition:none}.mat-expansion-panel-header:focus,.mat-expansion-panel-header:hover{outline:none}.mat-expansion-panel-header.mat-expanded:focus,.mat-expansion-panel-header.mat-expanded:hover{background:inherit}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before{flex-direction:row-reverse}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 16px 0 0}[dir=rtl] .mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 0 0 16px}.mat-content{display:flex;flex:1;flex-direction:row;overflow:hidden}.mat-content.mat-content-hide-toggle{margin-right:8px}[dir=rtl] .mat-content.mat-content-hide-toggle{margin-right:0;margin-left:8px}.mat-expansion-toggle-indicator-before .mat-content.mat-content-hide-toggle{margin-left:24px;margin-right:0}[dir=rtl] .mat-expansion-toggle-indicator-before .mat-content.mat-content-hide-toggle{margin-right:24px;margin-left:0}.mat-expansion-panel-header-title{color:var(--mat-expansion-header-text-color)}.mat-expansion-panel-header-title,.mat-expansion-panel-header-description{display:flex;flex-grow:1;flex-basis:0;margin-right:16px;align-items:center}[dir=rtl] .mat-expansion-panel-header-title,[dir=rtl] .mat-expansion-panel-header-description{margin-right:0;margin-left:16px}.mat-expansion-panel-header[aria-disabled=true] .mat-expansion-panel-header-title,.mat-expansion-panel-header[aria-disabled=true] .mat-expansion-panel-header-description{color:inherit}.mat-expansion-panel-header-description{flex-grow:2;color:var(--mat-expansion-header-description-color)}.mat-expansion-indicator::after{border-style:solid;border-width:0 2px 2px 0;content:"";display:inline-block;padding:3px;transform:rotate(45deg);vertical-align:middle;color:var(--mat-expansion-header-indicator-color)}.cdk-high-contrast-active .mat-expansion-panel-content{border-top:1px solid;border-top-left-radius:0;border-top-right-radius:0}'],encapsulation:2,data:{animation:[oe.indicatorRotate]},changeDetection:0}),J})(),R=(()=>{var X;class J{}return(X=J).\u0275fac=function(f){return new(f||X)},X.\u0275dir=n.lG2({type:X,selectors:[["mat-panel-title"]],hostAttrs:[1,"mat-expansion-panel-header-title"]}),J})(),$=(()=>{var X;class J extends U{constructor(){super(...arguments),this._ownHeaders=new n.n_E,this._hideToggle=!1,this.displayMode="default",this.togglePosition="after"}get hideToggle(){return this._hideToggle}set hideToggle(f){this._hideToggle=(0,Q.Ig)(f)}ngAfterContentInit(){this._headers.changes.pipe((0,u.O)(this._headers)).subscribe(f=>{this._ownHeaders.reset(f.filter(M=>M.panel.accordion===this)),this._ownHeaders.notifyOnChanges()}),this._keyManager=new y.Em(this._ownHeaders).withWrap().withHomeAndEnd()}_handleHeaderKeydown(f){this._keyManager.onKeydown(f)}_handleHeaderFocus(f){this._keyManager.updateActiveItem(f)}ngOnDestroy(){super.ngOnDestroy(),this._keyManager?.destroy(),this._ownHeaders.destroy()}}return(X=J).\u0275fac=function(){let H;return function(M){return(H||(H=n.n5z(X)))(M||X)}}(),X.\u0275dir=n.lG2({type:X,selectors:[["mat-accordion"]],contentQueries:function(f,M,le){if(1&f&&n.Suo(le,d,5),2&f){let ve;n.iGM(ve=n.CRH())&&(M._headers=ve)}},hostAttrs:[1,"mat-accordion"],hostVars:2,hostBindings:function(f,M){2&f&&n.ekj("mat-accordion-multi",M.multi)},inputs:{multi:"multi",hideToggle:"hideToggle",displayMode:"displayMode",togglePosition:"togglePosition"},exportAs:["matAccordion"],features:[n._Bn([{provide:z,useExisting:X}]),n.qOj]}),J})(),K=(()=>{var X;class J{}return(X=J).\u0275fac=function(f){return new(f||X)},X.\u0275mod=n.oAB({type:X}),X.\u0275inj=n.cJS({imports:[r.ez,A.BQ,a,_.eL]}),J})();function te(X){return(te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(J){return typeof J}:function(J){return J&&"function"==typeof Symbol&&J.constructor===Symbol&&J!==Symbol.prototype?"symbol":typeof J})(X)}function ie(X,J,H){return(J=function me(X){var J=function de(X,J){if("object"!==te(X)||null===X)return X;var H=X[Symbol.toPrimitive];if(void 0!==H){var f=H.call(X,J||"default");if("object"!==te(f))return f;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===J?String:Number)(X)}(X,"string");return"symbol"===te(J)?J:String(J)}(J))in X?Object.defineProperty(X,J,{value:H,enumerable:!0,configurable:!0,writable:!0}):X[J]=H,X}var fe=k(2438),Ae=k(7715),_e=k(9773),ae=k(3620),ue=k(9627),we=k.t(ue,2),ke=k(1016),Fe=k.t(ke,2);const ge=["pdfViewerContainer"];function xe(X,J,H){X[J]=H}function Se(){return typeof window>"u"}Se()||xe(we,"verbosity",ue.VerbosityLevel.INFOS);var B=function(X){return X[X.DISABLED=0]="DISABLED",X[X.ENABLED=1]="ENABLED",X[X.ENHANCED=2]="ENHANCED",X}(B||{});let ne=(()=>{var X;class J{set cMapsUrl(f){this._cMapsUrl=f}set page(f){const M=f=parseInt(f,10)||1;this._pdf&&(f=this.getValidPageNumber(f)),this._page=f,M!==f&&this.pageChange.emit(f)}set renderText(f){this._renderText=f}set renderTextMode(f){this._renderTextMode=f}set originalSize(f){this._originalSize=f}set showAll(f){this._showAll=f}set stickToPage(f){this._stickToPage=f}set zoom(f){f<=0||(this._zoom=f)}get zoom(){return this._zoom}set zoomScale(f){this._zoomScale=f}get zoomScale(){return this._zoomScale}set rotation(f){"number"==typeof f&&f%90==0?this._rotation=f:console.warn("Invalid pages rotation angle.")}set externalLinkTarget(f){this._externalLinkTarget=f}set autoresize(f){this._canAutoResize=!!f}set fitToPage(f){this._fitToPage=!!f}set showBorders(f){this._showBorders=!!f}static getLinkTarget(f){switch(f){case"blank":return ke.LinkTarget.BLANK;case"none":return ke.LinkTarget.NONE;case"self":return ke.LinkTarget.SELF;case"parent":return ke.LinkTarget.PARENT;case"top":return ke.LinkTarget.TOP}return null}constructor(f,M){if(ie(this,"element",void 0),ie(this,"ngZone",void 0),ie(this,"pdfViewerContainer",void 0),ie(this,"eventBus",void 0),ie(this,"pdfLinkService",void 0),ie(this,"pdfFindController",void 0),ie(this,"pdfViewer",void 0),ie(this,"isVisible",!1),ie(this,"_cMapsUrl",typeof we<"u"?`https://unpkg.com/pdfjs-dist@${ue.version}/cmaps/`:null),ie(this,"_imageResourcesPath",typeof we<"u"?`https://unpkg.com/pdfjs-dist@${ue.version}/web/images/`:void 0),ie(this,"_renderText",!0),ie(this,"_renderTextMode",B.ENABLED),ie(this,"_stickToPage",!1),ie(this,"_originalSize",!0),ie(this,"_pdf",void 0),ie(this,"_page",1),ie(this,"_zoom",1),ie(this,"_zoomScale","page-width"),ie(this,"_rotation",0),ie(this,"_showAll",!0),ie(this,"_canAutoResize",!0),ie(this,"_fitToPage",!1),ie(this,"_externalLinkTarget","blank"),ie(this,"_showBorders",!1),ie(this,"lastLoaded",void 0),ie(this,"_latestScrolledPage",void 0),ie(this,"resizeTimeout",null),ie(this,"pageScrollTimeout",null),ie(this,"isInitialized",!1),ie(this,"loadingTask",void 0),ie(this,"destroy$",new F.x),ie(this,"afterLoadComplete",new n.vpe),ie(this,"pageRendered",new n.vpe),ie(this,"pageInitialized",new n.vpe),ie(this,"textLayerRendered",new n.vpe),ie(this,"onError",new n.vpe),ie(this,"onProgress",new n.vpe),ie(this,"pageChange",new n.vpe(!0)),ie(this,"src",void 0),this.element=f,this.ngZone=M,Se())return;let le;const ve=ue.version;le=window[`pdfWorkerSrc${ve}`]||(window.hasOwnProperty("pdfWorkerSrc")&&"string"==typeof window.pdfWorkerSrc&&window.pdfWorkerSrc?window.pdfWorkerSrc:`https://cdn.jsdelivr.net/npm/pdfjs-dist@${ve}/legacy/build/pdf.worker.min.js`),xe(ue.GlobalWorkerOptions,"workerSrc",le)}ngAfterViewChecked(){if(this.isInitialized)return;const f=this.pdfViewerContainer.nativeElement.offsetParent;!0!==this.isVisible||null!=f?!1===this.isVisible&&null!=f&&(this.isVisible=!0,setTimeout(()=>{this.initialize(),this.ngOnChanges({src:this.src})})):this.isVisible=!1}ngOnInit(){this.initialize(),this.setupResizeListener()}ngOnDestroy(){this.clear(),this.destroy$.next(),this.loadingTask=null}ngOnChanges(f){if(!Se()&&this.isVisible)if("src"in f)this.loadPDF();else if(this._pdf){if("renderText"in f?(this.pdfViewer.textLayerMode=this._renderText?this._renderTextMode:B.DISABLED,this.resetPdfDocument()):"showAll"in f&&(this.setupViewer(),this.resetPdfDocument()),"page"in f){const{page:M}=f;if(M.currentValue===this._latestScrolledPage)return;this.pdfViewer.scrollPageIntoView({pageNumber:this._page})}this.update()}}updateSize(){(0,Ae.D)(this._pdf.getPage(this.pdfViewer.currentPageNumber)).pipe((0,_e.R)(this.destroy$)).subscribe({next:f=>{const M=this._rotation+f.rotate,le=f.getViewport({scale:this._zoom,rotation:M}).width*J.CSS_UNITS;let ve=this._zoom,he=!0;if(!this._originalSize||this._fitToPage&&le>this.pdfViewerContainer.nativeElement.clientWidth){const pe=f.getViewport({scale:1,rotation:M});ve=this.getScale(pe.width,pe.height),he=!this._stickToPage}this.pdfViewer._setScale(ve,he)}})}clear(){this.loadingTask&&!this.loadingTask.destroyed&&this.loadingTask.destroy(),this._pdf&&(this._latestScrolledPage=0,this._pdf.destroy(),this._pdf=void 0),this.pdfViewer&&this.pdfViewer.setDocument(null),this.pdfLinkService&&this.pdfLinkService.setDocument(null,null),this.pdfFindController&&this.pdfFindController.setDocument(null)}getPDFLinkServiceConfig(){const f=J.getLinkTarget(this._externalLinkTarget);return f?{externalLinkTarget:f}:{}}initEventBus(){this.eventBus=function Pe(X,J){const H=new X.EventBus;return function Me(X,J){(0,fe.R)(X,"documentload").pipe((0,_e.R)(J)).subscribe(()=>{const H=document.createEvent("CustomEvent");H.initCustomEvent("documentload",!0,!0,{}),window.dispatchEvent(H)}),(0,fe.R)(X,"pagerendered").pipe((0,_e.R)(J)).subscribe(({pageNumber:H,cssTransform:f,source:M})=>{const le=document.createEvent("CustomEvent");le.initCustomEvent("pagerendered",!0,!0,{pageNumber:H,cssTransform:f}),M.div.dispatchEvent(le)}),(0,fe.R)(X,"textlayerrendered").pipe((0,_e.R)(J)).subscribe(({pageNumber:H,source:f})=>{const M=document.createEvent("CustomEvent");M.initCustomEvent("textlayerrendered",!0,!0,{pageNumber:H}),f.textLayerDiv.dispatchEvent(M)}),(0,fe.R)(X,"pagechanging").pipe((0,_e.R)(J)).subscribe(({pageNumber:H,source:f})=>{const M=document.createEvent("UIEvents");M.initEvent("pagechanging",!0,!0),M.pageNumber=H,f.container.dispatchEvent(M)}),(0,fe.R)(X,"pagesinit").pipe((0,_e.R)(J)).subscribe(({source:H})=>{const f=document.createEvent("CustomEvent");f.initCustomEvent("pagesinit",!0,!0,null),H.container.dispatchEvent(f)}),(0,fe.R)(X,"pagesloaded").pipe((0,_e.R)(J)).subscribe(({pagesCount:H,source:f})=>{const M=document.createEvent("CustomEvent");M.initCustomEvent("pagesloaded",!0,!0,{pagesCount:H}),f.container.dispatchEvent(M)}),(0,fe.R)(X,"scalechange").pipe((0,_e.R)(J)).subscribe(({scale:H,presetValue:f,source:M})=>{const le=document.createEvent("UIEvents");le.initEvent("scalechange",!0,!0),le.scale=H,le.presetValue=f,M.container.dispatchEvent(le)}),(0,fe.R)(X,"updateviewarea").pipe((0,_e.R)(J)).subscribe(({location:H,source:f})=>{const M=document.createEvent("UIEvents");M.initEvent("updateviewarea",!0,!0),M.location=H,f.container.dispatchEvent(M)}),(0,fe.R)(X,"find").pipe((0,_e.R)(J)).subscribe(({source:H,type:f,query:M,phraseSearch:le,caseSensitive:ve,highlightAll:he,findPrevious:pe})=>{if(H===window)return;const be=document.createEvent("CustomEvent");be.initCustomEvent("find"+f,!0,!0,{query:M,phraseSearch:le,caseSensitive:ve,highlightAll:he,findPrevious:pe}),window.dispatchEvent(be)}),(0,fe.R)(X,"attachmentsloaded").pipe((0,_e.R)(J)).subscribe(({attachmentsCount:H,source:f})=>{const M=document.createEvent("CustomEvent");M.initCustomEvent("attachmentsloaded",!0,!0,{attachmentsCount:H}),f.container.dispatchEvent(M)}),(0,fe.R)(X,"sidebarviewchanged").pipe((0,_e.R)(J)).subscribe(({view:H,source:f})=>{const M=document.createEvent("CustomEvent");M.initCustomEvent("sidebarviewchanged",!0,!0,{view:H}),f.outerContainer.dispatchEvent(M)}),(0,fe.R)(X,"pagemode").pipe((0,_e.R)(J)).subscribe(({mode:H,source:f})=>{const M=document.createEvent("CustomEvent");M.initCustomEvent("pagemode",!0,!0,{mode:H}),f.pdfViewer.container.dispatchEvent(M)}),(0,fe.R)(X,"namedaction").pipe((0,_e.R)(J)).subscribe(({action:H,source:f})=>{const M=document.createEvent("CustomEvent");M.initCustomEvent("namedaction",!0,!0,{action:H}),f.pdfViewer.container.dispatchEvent(M)}),(0,fe.R)(X,"presentationmodechanged").pipe((0,_e.R)(J)).subscribe(({active:H,switchInProgress:f})=>{const M=document.createEvent("CustomEvent");M.initCustomEvent("presentationmodechanged",!0,!0,{active:H,switchInProgress:f}),window.dispatchEvent(M)}),(0,fe.R)(X,"outlineloaded").pipe((0,_e.R)(J)).subscribe(({outlineCount:H,source:f})=>{const M=document.createEvent("CustomEvent");M.initCustomEvent("outlineloaded",!0,!0,{outlineCount:H}),f.container.dispatchEvent(M)})}(H,J),H}(Fe,this.destroy$),(0,fe.R)(this.eventBus,"pagerendered").pipe((0,_e.R)(this.destroy$)).subscribe(f=>{this.pageRendered.emit(f)}),(0,fe.R)(this.eventBus,"pagesinit").pipe((0,_e.R)(this.destroy$)).subscribe(f=>{this.pageInitialized.emit(f)}),(0,fe.R)(this.eventBus,"pagechanging").pipe((0,_e.R)(this.destroy$)).subscribe(({pageNumber:f})=>{this.pageScrollTimeout&&clearTimeout(this.pageScrollTimeout),this.pageScrollTimeout=window.setTimeout(()=>{this._latestScrolledPage=f,this.pageChange.emit(f)},100)}),(0,fe.R)(this.eventBus,"textlayerrendered").pipe((0,_e.R)(this.destroy$)).subscribe(f=>{this.textLayerRendered.emit(f)})}initPDFServices(){this.pdfLinkService=new ke.PDFLinkService({eventBus:this.eventBus,...this.getPDFLinkServiceConfig()}),this.pdfFindController=new ke.PDFFindController({eventBus:this.eventBus,linkService:this.pdfLinkService})}getPDFOptions(){return{eventBus:this.eventBus,container:this.element.nativeElement.querySelector("div"),removePageBorders:!this._showBorders,linkService:this.pdfLinkService,textLayerMode:this._renderText?this._renderTextMode:B.DISABLED,findController:this.pdfFindController,l10n:new ke.GenericL10n("en"),imageResourcesPath:this._imageResourcesPath}}setupViewer(){xe(we,"disableTextLayer",!this._renderText),this.initPDFServices(),this.pdfViewer=this._showAll?new ke.PDFViewer(this.getPDFOptions()):new ke.PDFSinglePageViewer(this.getPDFOptions()),this.pdfLinkService.setViewer(this.pdfViewer),this.pdfViewer._currentPageNumber=this._page}getValidPageNumber(f){return f<1?1:f>this._pdf.numPages?this._pdf.numPages:f}getDocumentParams(){const f=typeof this.src;if(!this._cMapsUrl)return this.src;const M={cMapUrl:this._cMapsUrl,cMapPacked:!0,enableXfa:!0};return"string"===f?M.url=this.src:"object"===f&&(void 0!==this.src.byteLength?M.data=this.src:Object.assign(M,this.src)),M}loadPDF(){if(!this.src)return;if(this.lastLoaded===this.src)return void this.update();this.clear(),this.setupViewer(),this.loadingTask=ue.getDocument(this.getDocumentParams()),this.loadingTask.onProgress=M=>{this.onProgress.emit(M)};const f=this.src;(0,Ae.D)(this.loadingTask.promise).pipe((0,_e.R)(this.destroy$)).subscribe({next:M=>{this._pdf=M,this.lastLoaded=f,this.afterLoadComplete.emit(M),this.resetPdfDocument(),this.update()},error:M=>{this.lastLoaded=null,this.onError.emit(M)}})}update(){this.page=this._page,this.render()}render(){this._page=this.getValidPageNumber(this._page),(0!==this._rotation||this.pdfViewer.pagesRotation!==this._rotation)&&setTimeout(()=>{this.pdfViewer.pagesRotation=this._rotation}),this._stickToPage&&setTimeout(()=>{this.pdfViewer.currentPageNumber=this._page}),this.updateSize()}getScale(f,M){const le=this._showBorders?2*J.BORDER_WIDTH:0,ve=this.pdfViewerContainer.nativeElement.clientWidth-le,he=this.pdfViewerContainer.nativeElement.clientHeight-le;if(0===he||0===M||0===ve||0===f)return 1;let pe=1;switch(this._zoomScale){case"page-fit":pe=Math.min(he/M,ve/f);break;case"page-height":pe=he/M;break;default:pe=ve/f}return this._zoom*pe/J.CSS_UNITS}resetPdfDocument(){this.pdfLinkService.setDocument(this._pdf,null),this.pdfFindController.setDocument(this._pdf),this.pdfViewer.setDocument(this._pdf)}initialize(){Se()||!this.isVisible||(this.isInitialized=!0,this.initEventBus(),this.setupViewer())}setupResizeListener(){Se()||this.ngZone.runOutsideAngular(()=>{(0,fe.R)(window,"resize").pipe((0,ae.b)(100),(0,t.h)(()=>this._canAutoResize&&!!this._pdf),(0,_e.R)(this.destroy$)).subscribe(()=>{this.updateSize()})})}}return X=J,ie(J,"CSS_UNITS",96/72),ie(J,"BORDER_WIDTH",9),ie(J,"\u0275fac",function(f){return new(f||X)(n.Y36(n.SBq),n.Y36(n.R0b))}),ie(J,"\u0275cmp",n.Xpm({type:X,selectors:[["pdf-viewer"]],viewQuery:function(f,M){if(1&f&&n.Gf(ge,5),2&f){let le;n.iGM(le=n.CRH())&&(M.pdfViewerContainer=le.first)}},inputs:{src:"src",cMapsUrl:["c-maps-url","cMapsUrl"],page:"page",renderText:["render-text","renderText"],renderTextMode:["render-text-mode","renderTextMode"],originalSize:["original-size","originalSize"],showAll:["show-all","showAll"],stickToPage:["stick-to-page","stickToPage"],zoom:"zoom",zoomScale:["zoom-scale","zoomScale"],rotation:"rotation",externalLinkTarget:["external-link-target","externalLinkTarget"],autoresize:"autoresize",fitToPage:["fit-to-page","fitToPage"],showBorders:["show-borders","showBorders"]},outputs:{afterLoadComplete:"after-load-complete",pageRendered:"page-rendered",pageInitialized:"pages-initialized",textLayerRendered:"text-layer-rendered",onError:"error",onProgress:"on-progress",pageChange:"pageChange"},features:[n.TTD],decls:3,vars:0,consts:[[1,"ng2-pdf-viewer-container"],["pdfViewerContainer",""],[1,"pdfViewer"]],template:function(f,M){1&f&&(n.TgZ(0,"div",0,1),n._UZ(2,"div",2),n.qZA())},styles:['.ng2-pdf-viewer-container[_ngcontent-%COMP%]{overflow-x:auto;position:absolute;height:100%;width:100%;-webkit-overflow-scrolling:touch}[_nghost-%COMP%]{display:block;position:relative}[_nghost-%COMP%]    {--pdfViewer-padding-bottom: 0;--page-margin: 1px auto -8px;--page-border: 9px solid transparent;--spreadHorizontalWrapped-margin-LR: -3.5px;--viewer-container-height: 0;--annotation-unfocused-field-background: url("data:image/svg+xml;charset=UTF-8,<svg width=\'1px\' height=\'1px\' xmlns=\'http://www.w3.org/2000/svg\'><rect width=\'100%\' height=\'100%\' style=\'fill:rgba(0, 54, 255, 0.13);\'/></svg>");--xfa-unfocused-field-background: var( --annotation-unfocused-field-background );--page-border-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAATCAYAAAByUDbMAAAA1ElEQVQ4jbWUWw6EIAxFy2NFs/8NzR4UJhpqLsdi5mOmSSMUOfYWqv3S0gMr4XlYH/64gZa/gN3ANYA7KAXALt4ktoQ5MI9YxqaG8bWmsIysMuT6piSQCa4whZThCu8CM4zP9YJaKci9jicPq3NcBWYoPMGUlhG7ivtkB+gVyFY75wXghOvh8t5mto1Mdim6e+MBqH6XsY+YAwjpq3vGF7weTWQptLEDVCZvPTMl5JZZsdh47FHW6qFMyvLYqjcnmdFfY9Xk/KDOlzCusX2mi/ofM7MPkzBcSp4Q1/wAAAAASUVORK5CYII=) 9 9 repeat;--scale-factor: 1;--focus-outline: solid 2px blue;--hover-outline: dashed 2px blue;--freetext-line-height: 1.35;--freetext-padding: 2px;--editorInk-editing-cursor: pointer}@media screen and (forced-colors: active){[_nghost-%COMP%]    {--pdfViewer-padding-bottom: 9px;--page-margin: 8px auto -1px;--page-border: 1px solid CanvasText;--page-border-image: none;--spreadHorizontalWrapped-margin-LR: 3.5px}}@media (forced-colors: active){[_nghost-%COMP%]    {--focus-outline: solid 3px ButtonText;--hover-outline: dashed 3px ButtonText}}[_nghost-%COMP%]     .textLayer{position:absolute;text-align:initial;inset:0;overflow:hidden;opacity:.2;line-height:1;-webkit-text-size-adjust:none;text-size-adjust:none;forced-color-adjust:none}[_nghost-%COMP%]     .textLayer span, [_nghost-%COMP%]     .textLayer br{color:transparent;position:absolute;white-space:pre;cursor:text;transform-origin:0% 0%}[_nghost-%COMP%]     .textLayer span.markedContent{top:0;height:0}[_nghost-%COMP%]     .textLayer .highlight{margin:-1px;padding:1px;background-color:#b400aa;border-radius:4px}[_nghost-%COMP%]     .textLayer .highlight.appended{position:initial}[_nghost-%COMP%]     .textLayer .highlight.begin{border-radius:4px 0 0 4px}[_nghost-%COMP%]     .textLayer .highlight.end{border-radius:0 4px 4px 0}[_nghost-%COMP%]     .textLayer .highlight.middle{border-radius:0}[_nghost-%COMP%]     .textLayer .highlight.selected{background-color:#006400}[_nghost-%COMP%]     .textLayer ::selection{background:rgb(0,0,255)}[_nghost-%COMP%]     .textLayer br::selection{background:transparent}[_nghost-%COMP%]     .textLayer .endOfContent{display:block;position:absolute;inset:100% 0 0;z-index:-1;cursor:default;-webkit-user-select:none;user-select:none}[_nghost-%COMP%]     .textLayer .endOfContent.active{top:0}@media (forced-colors: active){[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input:required, [_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea:required, [_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select:required, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:required, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input:required{outline:1.5px solid selectedItem}}[_nghost-%COMP%]     .annotationLayer{position:absolute;top:0;left:0;pointer-events:none;transform-origin:0 0}[_nghost-%COMP%]     .annotationLayer section{position:absolute;text-align:initial;pointer-events:auto;box-sizing:border-box;transform-origin:0 0}[_nghost-%COMP%]     .annotationLayer .linkAnnotation>a, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.pushButton>a{position:absolute;font-size:1em;top:0;left:0;width:100%;height:100%}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.pushButton>canvas{width:100%;height:100%}[_nghost-%COMP%]     .annotationLayer .linkAnnotation>a:hover, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.pushButton>a:hover{opacity:.2;background:rgb(255,255,0);box-shadow:0 2px 10px #ff0}[_nghost-%COMP%]     .annotationLayer .textAnnotation img{position:absolute;cursor:pointer;width:100%;height:100%}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input, [_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea, [_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input{background-image:var(--annotation-unfocused-field-background);border:1px solid transparent;box-sizing:border-box;font:calc(9px * var(--scale-factor)) sans-serif;height:100%;margin:0;vertical-align:top;width:100%}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input:required, [_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea:required, [_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select:required, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:required, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input:required{outline:1.5px solid red}[_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select option{padding:0}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input{border-radius:50%}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea{resize:none}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input[disabled], [_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea[disabled], [_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select[disabled], [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input[disabled], [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input[disabled]{background:none;border:1px solid transparent;cursor:not-allowed}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input:hover, [_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea:hover, [_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select:hover, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:hover, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input:hover{border:1px solid rgb(0,0,0)}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input:focus, [_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea:focus, [_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select:focus{background:none;border:1px solid transparent}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input :focus, [_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea :focus, [_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select :focus, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox :focus, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton :focus{background-image:none;background-color:transparent;outline:auto}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:checked:before, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:checked:after, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input:checked:before{background-color:CanvasText;content:"";display:block;position:absolute}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:checked:before, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:checked:after{height:80%;left:45%;width:1px}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:checked:before{transform:rotate(45deg)}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:checked:after{transform:rotate(-45deg)}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input:checked:before{border-radius:50%;height:50%;left:30%;top:20%;width:50%}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input.comb{font-family:monospace;padding-left:2px;padding-right:0}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input.comb:focus{width:103%}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input{-webkit-appearance:none;appearance:none}[_nghost-%COMP%]     .annotationLayer .popupTriggerArea{height:100%;width:100%}[_nghost-%COMP%]     .annotationLayer .popupWrapper{position:absolute;font-size:calc(9px * var(--scale-factor));width:100%;min-width:calc(180px * var(--scale-factor));pointer-events:none}[_nghost-%COMP%]     .annotationLayer .popup{position:absolute;max-width:calc(180px * var(--scale-factor));background-color:#ff9;box-shadow:0 calc(2px * var(--scale-factor)) calc(5px * var(--scale-factor)) #888;border-radius:calc(2px * var(--scale-factor));padding:calc(6px * var(--scale-factor));margin-left:calc(5px * var(--scale-factor));cursor:pointer;font:message-box;white-space:normal;word-wrap:break-word;pointer-events:auto}[_nghost-%COMP%]     .annotationLayer .popup>*{font-size:calc(9px * var(--scale-factor))}[_nghost-%COMP%]     .annotationLayer .popup h1{display:inline-block}[_nghost-%COMP%]     .annotationLayer .popupDate{display:inline-block;margin-left:calc(5px * var(--scale-factor))}[_nghost-%COMP%]     .annotationLayer .popupContent{border-top:1px solid rgb(51,51,51);margin-top:calc(2px * var(--scale-factor));padding-top:calc(2px * var(--scale-factor))}[_nghost-%COMP%]     .annotationLayer .richText>*{white-space:pre-wrap;font-size:calc(9px * var(--scale-factor))}[_nghost-%COMP%]     .annotationLayer .highlightAnnotation, [_nghost-%COMP%]     .annotationLayer .underlineAnnotation, [_nghost-%COMP%]     .annotationLayer .squigglyAnnotation, [_nghost-%COMP%]     .annotationLayer .strikeoutAnnotation, [_nghost-%COMP%]     .annotationLayer .freeTextAnnotation, [_nghost-%COMP%]     .annotationLayer .lineAnnotation svg line, [_nghost-%COMP%]     .annotationLayer .squareAnnotation svg rect, [_nghost-%COMP%]     .annotationLayer .circleAnnotation svg ellipse, [_nghost-%COMP%]     .annotationLayer .polylineAnnotation svg polyline, [_nghost-%COMP%]     .annotationLayer .polygonAnnotation svg polygon, [_nghost-%COMP%]     .annotationLayer .caretAnnotation, [_nghost-%COMP%]     .annotationLayer .inkAnnotation svg polyline, [_nghost-%COMP%]     .annotationLayer .stampAnnotation, [_nghost-%COMP%]     .annotationLayer .fileAttachmentAnnotation{cursor:pointer}[_nghost-%COMP%]     .annotationLayer section svg{position:absolute;width:100%;height:100%}[_nghost-%COMP%]     .annotationLayer .annotationTextContent{position:absolute;width:100%;height:100%;opacity:0;color:transparent;-webkit-user-select:none;user-select:none;pointer-events:none}[_nghost-%COMP%]     .annotationLayer .annotationTextContent span{width:100%;display:inline-block}@media (forced-colors: active){[_nghost-%COMP%]     .xfaLayer *:required{outline:1.5px solid selectedItem}}[_nghost-%COMP%]     .xfaLayer .highlight{margin:-1px;padding:1px;background-color:#efcbed;border-radius:4px}[_nghost-%COMP%]     .xfaLayer .highlight.appended{position:initial}[_nghost-%COMP%]     .xfaLayer .highlight.begin{border-radius:4px 0 0 4px}[_nghost-%COMP%]     .xfaLayer .highlight.end{border-radius:0 4px 4px 0}[_nghost-%COMP%]     .xfaLayer .highlight.middle{border-radius:0}[_nghost-%COMP%]     .xfaLayer .highlight.selected{background-color:#cbdfcb}[_nghost-%COMP%]     .xfaLayer ::selection{background:rgb(0,0,255)}[_nghost-%COMP%]     .xfaPage{overflow:hidden;position:relative}[_nghost-%COMP%]     .xfaContentarea{position:absolute}[_nghost-%COMP%]     .xfaPrintOnly{display:none}[_nghost-%COMP%]     .xfaLayer{position:absolute;text-align:initial;top:0;left:0;transform-origin:0 0;line-height:1.2}[_nghost-%COMP%]     .xfaLayer *{color:inherit;font:inherit;font-style:inherit;font-weight:inherit;font-kerning:inherit;letter-spacing:-.01px;text-align:inherit;text-decoration:inherit;box-sizing:border-box;background-color:transparent;padding:0;margin:0;pointer-events:auto;line-height:inherit}[_nghost-%COMP%]     .xfaLayer *:required{outline:1.5px solid red}[_nghost-%COMP%]     .xfaLayer div{pointer-events:none}[_nghost-%COMP%]     .xfaLayer svg{pointer-events:none}[_nghost-%COMP%]     .xfaLayer svg *{pointer-events:none}[_nghost-%COMP%]     .xfaLayer a{color:#00f}[_nghost-%COMP%]     .xfaRich li{margin-left:3em}[_nghost-%COMP%]     .xfaFont{color:#000;font-weight:400;font-kerning:none;font-size:10px;font-style:normal;letter-spacing:0;text-decoration:none;vertical-align:0}[_nghost-%COMP%]     .xfaCaption{overflow:hidden;flex:0 0 auto}[_nghost-%COMP%]     .xfaCaptionForCheckButton{overflow:hidden;flex:1 1 auto}[_nghost-%COMP%]     .xfaLabel{height:100%;width:100%}[_nghost-%COMP%]     .xfaLeft{display:flex;flex-direction:row;align-items:center}[_nghost-%COMP%]     .xfaRight{display:flex;flex-direction:row-reverse;align-items:center}[_nghost-%COMP%]     .xfaLeft>.xfaCaption, [_nghost-%COMP%]     .xfaLeft>.xfaCaptionForCheckButton, [_nghost-%COMP%]     .xfaRight>.xfaCaption, [_nghost-%COMP%]     .xfaRight>.xfaCaptionForCheckButton{max-height:100%}[_nghost-%COMP%]     .xfaTop{display:flex;flex-direction:column;align-items:flex-start}[_nghost-%COMP%]     .xfaBottom{display:flex;flex-direction:column-reverse;align-items:flex-start}[_nghost-%COMP%]     .xfaTop>.xfaCaption, [_nghost-%COMP%]     .xfaTop>.xfaCaptionForCheckButton, [_nghost-%COMP%]     .xfaBottom>.xfaCaption, [_nghost-%COMP%]     .xfaBottom>.xfaCaptionForCheckButton{width:100%}[_nghost-%COMP%]     .xfaBorder{background-color:transparent;position:absolute;pointer-events:none}[_nghost-%COMP%]     .xfaWrapped{width:100%;height:100%}[_nghost-%COMP%]     .xfaTextfield:focus, [_nghost-%COMP%]     .xfaSelect:focus{background-image:none;background-color:transparent;outline:auto;outline-offset:-1px}[_nghost-%COMP%]     .xfaCheckbox:focus, [_nghost-%COMP%]     .xfaRadio:focus{outline:auto}[_nghost-%COMP%]     .xfaTextfield, [_nghost-%COMP%]     .xfaSelect{height:100%;width:100%;flex:1 1 auto;border:none;resize:none;background-image:var(--xfa-unfocused-field-background)}[_nghost-%COMP%]     .xfaTop>.xfaTextfield, [_nghost-%COMP%]     .xfaTop>.xfaSelect, [_nghost-%COMP%]     .xfaBottom>.xfaTextfield, [_nghost-%COMP%]     .xfaBottom>.xfaSelect{flex:0 1 auto}[_nghost-%COMP%]     .xfaButton{cursor:pointer;width:100%;height:100%;border:none;text-align:center}[_nghost-%COMP%]     .xfaLink{width:100%;height:100%;position:absolute;top:0;left:0}[_nghost-%COMP%]     .xfaCheckbox, [_nghost-%COMP%]     .xfaRadio{width:100%;height:100%;flex:0 0 auto;border:none}[_nghost-%COMP%]     .xfaRich{white-space:pre-wrap;width:100%;height:100%}[_nghost-%COMP%]     .xfaImage{object-position:left top;object-fit:contain;width:100%;height:100%}[_nghost-%COMP%]     .xfaLrTb, [_nghost-%COMP%]     .xfaRlTb, [_nghost-%COMP%]     .xfaTb{display:flex;flex-direction:column;align-items:stretch}[_nghost-%COMP%]     .xfaLr{display:flex;flex-direction:row;align-items:stretch}[_nghost-%COMP%]     .xfaRl{display:flex;flex-direction:row-reverse;align-items:stretch}[_nghost-%COMP%]     .xfaTb>div{justify-content:left}[_nghost-%COMP%]     .xfaPosition{position:relative}[_nghost-%COMP%]     .xfaArea{position:relative}[_nghost-%COMP%]     .xfaValignMiddle{display:flex;align-items:center}[_nghost-%COMP%]     .xfaTable{display:flex;flex-direction:column;align-items:stretch}[_nghost-%COMP%]     .xfaTable .xfaRow{display:flex;flex-direction:row;align-items:stretch}[_nghost-%COMP%]     .xfaTable .xfaRlRow{display:flex;flex-direction:row-reverse;align-items:stretch;flex:1}[_nghost-%COMP%]     .xfaTable .xfaRlRow>div{flex:1}[_nghost-%COMP%]     .xfaNonInteractive input, [_nghost-%COMP%]     .xfaNonInteractive textarea, [_nghost-%COMP%]     .xfaDisabled input, [_nghost-%COMP%]     .xfaDisabled textarea, [_nghost-%COMP%]     .xfaReadOnly input, [_nghost-%COMP%]     .xfaReadOnly textarea{background:initial}@media print{[_nghost-%COMP%]     .xfaTextfield, [_nghost-%COMP%]     .xfaSelect{background:transparent}[_nghost-%COMP%]     .xfaSelect{-webkit-appearance:none;appearance:none;text-indent:1px;text-overflow:""}}[_nghost-%COMP%]     [data-editor-rotation="90"]{transform:rotate(90deg)}[_nghost-%COMP%]     [data-editor-rotation="180"]{transform:rotate(180deg)}[_nghost-%COMP%]     [data-editor-rotation="270"]{transform:rotate(270deg)}[_nghost-%COMP%]     .annotationEditorLayer{background:transparent;position:absolute;top:0;left:0;font-size:calc(100px * var(--scale-factor));transform-origin:0 0}[_nghost-%COMP%]     .annotationEditorLayer .selectedEditor{outline:var(--focus-outline);resize:none}[_nghost-%COMP%]     .annotationEditorLayer .freeTextEditor{position:absolute;background:transparent;border-radius:3px;padding:calc(var(--freetext-padding) * var(--scale-factor));resize:none;width:auto;height:auto;z-index:1;transform-origin:0 0;touch-action:none}[_nghost-%COMP%]     .annotationEditorLayer .freeTextEditor .internal{background:transparent;border:none;top:0;left:0;overflow:visible;white-space:nowrap;resize:none;font:10px sans-serif;line-height:var(--freetext-line-height)}[_nghost-%COMP%]     .annotationEditorLayer .freeTextEditor .overlay{position:absolute;display:none;background:transparent;top:0;left:0;width:100%;height:100%}[_nghost-%COMP%]     .annotationEditorLayer .freeTextEditor .overlay.enabled{display:block}[_nghost-%COMP%]     .annotationEditorLayer .freeTextEditor .internal:empty:before{content:attr(default-content);color:gray}[_nghost-%COMP%]     .annotationEditorLayer .freeTextEditor .internal:focus{outline:none}[_nghost-%COMP%]     .annotationEditorLayer .inkEditor.disabled{resize:none}[_nghost-%COMP%]     .annotationEditorLayer .inkEditor.disabled.selectedEditor{resize:horizontal}[_nghost-%COMP%]     .annotationEditorLayer .freeTextEditor:hover:not(.selectedEditor), [_nghost-%COMP%]     .annotationEditorLayer .inkEditor:hover:not(.selectedEditor){outline:var(--hover-outline)}[_nghost-%COMP%]     .annotationEditorLayer .inkEditor{position:absolute;background:transparent;border-radius:3px;overflow:auto;width:100%;height:100%;z-index:1;transform-origin:0 0;cursor:auto}[_nghost-%COMP%]     .annotationEditorLayer .inkEditor.editing{resize:none;cursor:var(--editorInk-editing-cursor),pointer}[_nghost-%COMP%]     .annotationEditorLayer .inkEditor .inkEditorCanvas{position:absolute;top:0;left:0;width:100%;height:100%;touch-action:none}[_nghost-%COMP%]     [data-main-rotation="90"]{transform:rotate(90deg) translateY(-100%)}[_nghost-%COMP%]     [data-main-rotation="180"]{transform:rotate(180deg) translate(-100%,-100%)}[_nghost-%COMP%]     [data-main-rotation="270"]{transform:rotate(270deg) translate(-100%)}[_nghost-%COMP%]     .pdfViewer{padding-bottom:var(--pdfViewer-padding-bottom)}[_nghost-%COMP%]     .pdfViewer .canvasWrapper{overflow:hidden}[_nghost-%COMP%]     .pdfViewer .page{direction:ltr;width:816px;height:1056px;margin:var(--page-margin);position:relative;overflow:visible;border:var(--page-border);border-image:var(--page-border-image);background-clip:content-box;background-color:#fff}[_nghost-%COMP%]     .pdfViewer .dummyPage{position:relative;width:0;height:var(--viewer-container-height)}[_nghost-%COMP%]     .pdfViewer.removePageBorders .page{margin:0 auto 10px;border:none}[_nghost-%COMP%]     .pdfViewer.singlePageView{display:inline-block}[_nghost-%COMP%]     .pdfViewer.singlePageView .page{margin:0;border:none}[_nghost-%COMP%]     .pdfViewer.scrollHorizontal, [_nghost-%COMP%]     .pdfViewer.scrollWrapped, [_nghost-%COMP%]     .spread{margin-left:3.5px;margin-right:3.5px;text-align:center}[_nghost-%COMP%]     .pdfViewer.scrollHorizontal, [_nghost-%COMP%]     .spread{white-space:nowrap}[_nghost-%COMP%]     .pdfViewer.removePageBorders, [_nghost-%COMP%]     .pdfViewer.scrollHorizontal .spread, [_nghost-%COMP%]     .pdfViewer.scrollWrapped .spread{margin-left:0;margin-right:0}[_nghost-%COMP%]     .spread .page, [_nghost-%COMP%]     .spread .dummyPage, [_nghost-%COMP%]     .pdfViewer.scrollHorizontal .page, [_nghost-%COMP%]     .pdfViewer.scrollWrapped .page, [_nghost-%COMP%]     .pdfViewer.scrollHorizontal .spread, [_nghost-%COMP%]     .pdfViewer.scrollWrapped .spread{display:inline-block;vertical-align:middle}[_nghost-%COMP%]     .spread .page, [_nghost-%COMP%]     .pdfViewer.scrollHorizontal .page, [_nghost-%COMP%]     .pdfViewer.scrollWrapped .page{margin-left:var(--spreadHorizontalWrapped-margin-LR);margin-right:var(--spreadHorizontalWrapped-margin-LR)}[_nghost-%COMP%]     .pdfViewer.removePageBorders .spread .page, [_nghost-%COMP%]     .pdfViewer.removePageBorders.scrollHorizontal .page, [_nghost-%COMP%]     .pdfViewer.removePageBorders.scrollWrapped .page{margin-left:5px;margin-right:5px}[_nghost-%COMP%]     .pdfViewer .page canvas{margin:0;display:block}[_nghost-%COMP%]     .pdfViewer .page canvas[hidden]{display:none}[_nghost-%COMP%]     .pdfViewer .page .loadingIcon{position:absolute;display:block;inset:0;background:url(data:image/gif;base64,R0lGODlhGAAYAPQQAM7Ozvr6+uDg4LCwsOjo6I6OjsjIyJycnNjY2KioqMDAwPLy8nZ2doaGhri4uGhoaP///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh/ilPcHRpbWl6ZWQgd2l0aCBodHRwczovL2V6Z2lmLmNvbS9vcHRpbWl6ZQAh+QQJBwAQACwAAAAAGAAYAAAFmiAkjiTkOGVaBgjZNGSgkgKjjM8zLoI8iy+BKCdiCX8iBeMAhEEIPRXLxViYUE9CbCQoFAzFhHY3zkaT3oPvBz1zE4UBsr1eWZH4vAowOBwGAHk8AoQLfH6Agm0Ed3qOAXWOIgQKiWyFJQgDgJEpdG+WEACNEFNFmKVlVzJQk6qdkwqBoi1mebJ3ALNGeIZHtGSwNDS1RZKueCEAIfkECQcAEAAsAAAAABgAGAAABZcgJI4kpChlWgYCWRQkEKgjURgjw4zOg9CjVwuiEyEeO6CxkBC9nA+HiuUqLEyoBZI0Mx4SAFFgQCDZuguBoGv6Dtg0gvpqdhxQQDkBzuUr/4A1JwMKP39pc2mDhYCIc4GQYn6QCwCMeY91l0p6dBAEJ0OfcFRimZ91Mwt0alxxAIZyRmuAsKxDLKKvZbM1tJxmvGKRpn8hACH5BAkHABAALAAAAAAYABgAAAWhICSOJGQYZVoGAnkcJBKoI3EAY1GMCtPSosSBINKJBIwGkHdwBGGQA0OhYpEGQxNqkYzNIITBACEKKBaxxNfBeOCO4vMy0Hg8nDHFeCktkKtfNAtoS4UqAicKBj9zBAKPC4iKi4aRkISGmWWBmjUIAIyHkCUEAKCVo2WmREecVqoCgZhgP4NHrGWCj7e3szSpuxAsoVWxnp6cVV4kyZW+KSEAIfkECQcAEAAsAAAAABgAGAAABZkgJI4kBABlWgYEOQykEKgjMSDjcYxG0dKi108nEhQKQN4rCIMkCgbawjWYnSCLY2yGVSgEooBhWqsGGwxc0RtNBgoMhmJ1QgETjANYFeBKyUmBKQQIdT9JDmgPDQ6EhoKJD4sOgpWWgiwChyqEBH5hmptSoSOZgJ4kLKWkYTF7C2SaqaM/hEWygay4mYG8t6uffFuzl1iANCEAIfkECQcAEAAsAAAAABgAGAAABZ0gJI4khCBlmhKkopBCoI6LIozDMAIHO4uuBVBnOiR+I4FrCDwAZsKdQnaCLIwwmRUA8JmioprWUCjcwlwUMnAoG0qL03k2KCS8cC0UjOzDCQKBfHQFDAwFU4CCfgqFhy9+kZJWgzSKSAcPZn+BfQENDw8OljGWJAFeDoZPYTBnC1GdSXqnsoBolSulX2GyP6hgvnG0KrS3NJNhuSQhACH5BAkHABAALAAAAAAYABgAAAWaICSOJCQIZZoupGGQRKCOC0CMijIiwz2LABtQZxoMfjQhxAXszWQ7gOwECRhh0MCJJRJARTUoIHFAgbfI6uBwAJS01J/i4PClVYHvfV8lbLlIBmwFbQt+aGmChG18jXeGT4dICQxlb4g/AQUMDER9XjR6BAdiDQwINDBmkAsPDVh4cX4imw53iLKuaVqAcUsPqEiidkt6j4AzIQAh+QQJBwAQACwAAAAAGAAYAAAFmSAkjiREEGWaBiSCtCoZCMsIAKOg1LEo0KKbaKFQ9EYLoOkFuQlirNxzCQkUW9GZ0hQd4nyDAWr4G/esYSbyZFYZwu3jqiuvr8u8I2BwOAwASXh1e31/doeHC3klWnElfAlTd46MfQUGk2stCVEGBQWSdCciDg5VDAVYKoEiDQ0iBwxGcj9RDw8+qHIzebc2DJJQJK6qiKVyIQAh+QQJBwAQACwAAAAAGAAYAAAFmSAkjiS0LGWaBiRBtCoZCKgoCCMB1DF0sz6cCQDo5W62l28XAyZFpyECBv3lnCbhUqHMIo0Qg4Jbmn1jRCa4iV27TzfXGjEecOFWMN1OdvvfPGUuXSoKBw6EXokrAwcHRVU0UAeEBANAAAmUI1gNDyhjJgUHLW0iDg8FIqOnBQZrDA9TELE2rEYIDw4jta2LMpCrqld/YQpgIQAh+QQJBwAQACwAAAAAGAAYAAAFmyAkjiS0LGWaBiRBkKw6BgIqCsJcyyMe4yJajhcEml5H26o1PN2QQd3uFiv2AADlAgflIbDdZLgkABOJgep5LfWty4p4zeU+w+XsvJWXliEKDwdEBgMKYQ4PDw1qK3EDCCMAiQ5BCV0LCj+FSDQkgCgGBiYHAy2MIgoMghAHqw4HAGsNDEMFBTekdgwKI7aRB2MwkL2rVHoQoWchACH5BAkHABAALAAAAAAYABgAAAWWICSOJLQsZZoGJEGQrDoGAioKwlzLIx7jIlqOFwSaXkfbqjU83ZBB3e4WK0qrCxyU55peid0qcUwuixyNx6PhILsAcAJazXYj4lvz2MkLiFsHDAlEcABKZwwMBX8pBgoKQxAIigpBA1sLBj+PSDQkB4uSACYDlTMyBgWDEKVnl2QFBUigN61gBQYjtLV5JZ4jtlR6omMhACH5BAkHABAALAAAAAAYABgAAAWaICSOJLQsZZoGJEGQrDoGAioKwlzLIx7jIlqOFwSaXkdbidYanm7I4AjwYDh6saJuJ3JUG1mZi9srPA7EcRimJLrfJYWZUVC8TziXnEG3u/E+cIJaPAFrPQl1aQAIbRAGBZGHJQiMUQKRBkEKbQsAPZaEXQcslSYKmjMyAAdXj34ACkNEiUgDA5t+PAQHn6Ogjkuzry2DNwhuIQAh+QQFBwAQACwAAAAAGAAYAAAFnCAkjiS0LGVaBgBJEGSguo8zCsK4CPIsMg+ECCcKEH0ix6MwhJl4KiOp8UCdmrEbo6EoHpxF8A6aBBZ6vhf5dmAkkGr0CoWs21WGQ2FvsI9xC3l7B311fy93iWGKJQQOhHCAJQB6A3IqcWwJLU90i2FkUiMKlhBELEI6MwgDXRAGhQgAYD6tTqRFAJxpA6mvrqazSKJJhUWMpjlIIQA7) center no-repeat}[_nghost-%COMP%]     .pdfViewer .page .loadingIcon.notVisible{background:none}[_nghost-%COMP%]     .pdfViewer.enablePermissions .textLayer span{-webkit-user-select:none!important;user-select:none!important;cursor:not-allowed}[_nghost-%COMP%]     .pdfPresentationMode .pdfViewer{padding-bottom:0}[_nghost-%COMP%]     .pdfPresentationMode .spread{margin:0}[_nghost-%COMP%]     .pdfPresentationMode .pdfViewer .page{margin:0 auto;border:2px solid transparent}']})),J})(),re=(()=>{var X;class J{}return X=J,ie(J,"\u0275fac",function(f){return new(f||X)}),ie(J,"\u0275mod",n.oAB({type:X})),ie(J,"\u0275inj",n.cJS({})),J})(),se=(()=>{var X;class J{constructor(){this.assetsUrl="",this.src="assets/data/decouvrir.pdf"}}return(X=J).\u0275fac=function(f){return new(f||X)},X.\u0275cmp=n.Xpm({type:X,selectors:[["app-home"]],standalone:!0,features:[n.jDz],decls:132,vars:15,consts:[[1,"row","g-3"],[1,"col-12"],["id","outerContainer"],[1,"pdf-container"],[3,"src","rotation","original-size","show-all","fit-to-page","zoom","zoom-scale","stick-to-page","render-text","external-link-target","autoresize","show-borders"],["controls","",1,"w-100"],["type","audio/mpeg",3,"src"]],template:function(f,M){1&f&&(n.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),n._UZ(4,"pdf-viewer",4),n.qZA()()(),n.TgZ(5,"div",1)(6,"mat-accordion")(7,"mat-expansion-panel")(8,"mat-expansion-panel-header")(9,"mat-panel-title"),n._uU(10," Hymnes du Canada "),n.qZA()(),n.TgZ(11,"p"),n._uU(12," Lorsqu'ils entendent les premiers accords familiers de l'\xab \xd4 Canada \xbb \xe0 l'\xe9cole, lors de matchs de hockey ou d'autres \xe9v\xe9nements, les Canadiens se l\xe8vent avec fiert\xe9 pour rendre hommage \xe0 leur pays. Proclam\xe9 hymne national du Canada le 1er juillet 1980, l'\xab \xd4 Canada \xbb fut chant\xe9 pour la premi\xe8re fois en fran\xe7ais un si\xe8cle plus t\xf4t. "),n.qZA(),n.TgZ(13,"h3"),n._uU(14,"Historique de l'hymne national"),n.qZA(),n.TgZ(15,"p"),n._uU(16," C'est en 1980 que l'\xab \xd4 Canada \xbb est proclam\xe9 hymne national. Compos\xe9e en 1880, la musique est l'\u0153uvre d'un c\xe9l\xe8bre compositeur \xe0 l'\xe9poque, Calixa Lavall\xe9e. Les paroles quant \xe0 elles ont \xe9t\xe9 \xe9crites par sir Adolphe-Basile Routhier. "),n._UZ(17,"br"),n._uU(18,"Au fur et \xe0 mesure que la popularit\xe9 de la chanson s'est accrue au cours des ann\xe9es, plusieurs versions anglaises ont \xe9t\xe9 \xe9crites, y compris celle bas\xe9e sur un po\xe8me compos\xe9 en 1908 par l'honorable Robert Stanley Weir. Les paroles de Weir sont devenues la version anglaise officielle en 1980. "),n._UZ(19,"br"),n._uU(20," Le 31 janvier 2018, un projet de loi a \xe9t\xe9 adopt\xe9 pour changer les paroles de la version anglaise. Le vers \xab True patriot love in all thy sons command \xbb a \xe9t\xe9 remplac\xe9 par \xab True patriot love in all of us command \xbb, afin d'\xe9liminer toute distinction de genre. "),n._UZ(21,"br"),n._uU(22,"Lisez l'historique complet de l'\xab \xd4 Canada \xbb et apprenez-en davantage sur la vie des personnes derri\xe8re l'hymne. "),n.qZA(),n.TgZ(23,"h3"),n._uU(24,"Moment ad\xe9quat et \xe9tiquette concernant l'hymne national"),n.qZA(),n.TgZ(25,"p"),n._uU(26," Aucune r\xe8gle ne dicte le moment appropri\xe9 pour chanter l'hymne national lors d'un \xe9v\xe9nement. Ce sont les organisateurs qui d\xe9terminent si l'\xab \xd4 Canada \xbb sera chant\xe9 au d\xe9but ou \xe0 la fin d'une c\xe9r\xe9monie. Si 2 hymnes sont jou\xe9s au d\xe9but d'un \xe9v\xe9nement, l'\xab \xd4 Canada \xbb doit \xeatre jou\xe9 en premier suivi de l'autre. Si les hymnes sont jou\xe9s \xe0 la fin de l'\xe9v\xe9nement, l'\xab \xd4 Canada \xbb doit \xeatre le dernier. "),n._UZ(27,"br"),n._uU(28,"Selon la tradition et par marque de respect, il est appropri\xe9 d'\xeatre debout lorsque l'\xab \xd4 Canada \xbb est jou\xe9. La m\xeame \xe9tiquette s'applique lorsqu'il s'agit de l'hymne d'une autre nation. La tradition veut \xe9galement que les hommes en tenues civiles retirent leur chapeau durant l'hymne national. Ce n'est pas le cas pour les femmes et les enfants. "),n._UZ(29,"br"),n._uU(30,"Il n'y a pas de loi ou de comportement \xe0 adopter en ce qui a trait \xe0 l'hymne national; c'est laiss\xe9 au sens du civisme des personnes. "),n.qZA()(),n.TgZ(31,"mat-expansion-panel")(32,"mat-expansion-panel-header")(33,"mat-panel-title"),n._uU(34," Hymnes du Canada version fran\xe7aise "),n.qZA()(),n.TgZ(35,"p"),n._uU(36,"chant\xe9e par Nathalie Paulin"),n.qZA(),n.TgZ(37,"div")(38,"audio",5),n._UZ(39,"source",6),n._uU(40," Your browser does not support the audio element. "),n.qZA()(),n._UZ(41,"br"),n.TgZ(42,"p"),n._uU(43," \xab \xd4 Canada! Terre de nos a\xefeux, "),n.qZA(),n.TgZ(44,"p"),n._uU(45," front est ceint de fleurons glorieux!"),n.qZA(),n._UZ(46,"br"),n.TgZ(47,"p"),n._uU(48,"Car ton bras sait porter l'\xe9p\xe9e, "),n.qZA(),n.TgZ(49,"p"),n._uU(50,"sait porter la croix!"),n.qZA(),n._UZ(51,"br"),n.TgZ(52,"p"),n._uU(53,"Ton histoire est une \xe9pop\xe9e"),n.qZA(),n.TgZ(54,"p"),n._uU(55,"Des plus brillants exploits."),n.qZA(),n._UZ(56,"br"),n.TgZ(57,"p"),n._uU(58,"Et ta valeur, de foi tremp\xe9e, "),n.qZA(),n.TgZ(59,"p"),n._uU(60,"Prot\xe9gera nos foyers et nos droits."),n.qZA(),n._UZ(61,"br"),n.TgZ(62,"p"),n._uU(63,"Prot\xe9gera nos foyers et nos droits. \xbb"),n.qZA()(),n.TgZ(64,"mat-expansion-panel")(65,"mat-expansion-panel-header")(66,"mat-panel-title"),n._uU(67," Hymnes du Canada version anglaise "),n.qZA()(),n.TgZ(68,"p"),n._uU(69,"chant\xe9e par Julie Nesrallah"),n.qZA(),n.TgZ(70,"div")(71,"audio",5),n._UZ(72,"source",6),n._uU(73," Your browser does not support the audio element. "),n.qZA()(),n._UZ(74,"br"),n.TgZ(75,"p"),n._uU(76,"O Canada!"),n.qZA(),n.TgZ(77,"p"),n._uU(78,"Our home and native land!"),n.qZA(),n.TgZ(79,"p"),n._uU(80,"True patriot love in all of us command."),n.qZA(),n._UZ(81,"br"),n.TgZ(82,"p"),n._uU(83," With glowing hearts we see thee rise,"),n.qZA(),n.TgZ(84,"p"),n._uU(85," The True North strong and free!"),n.qZA(),n._UZ(86,"br"),n.TgZ(87,"p"),n._uU(88,"From far and wide,"),n.qZA(),n.TgZ(89,"p"),n._uU(90,"O Canada, we stand on guard for thee."),n.qZA(),n._UZ(91,"br"),n.TgZ(92,"p"),n._uU(93,"God keep our land glorious and free!"),n.qZA(),n.TgZ(94,"p"),n._uU(95," O Canada, we stand on guard for thee."),n.qZA(),n._UZ(96,"br"),n.TgZ(97,"p"),n._uU(98," O Canada, we stand on guard for thee."),n.qZA()(),n.TgZ(99,"mat-expansion-panel")(100,"mat-expansion-panel-header")(101,"mat-panel-title"),n._uU(102," Hymnes du Canada version bilingue "),n.qZA()(),n.TgZ(103,"p"),n._uU(104,"chant\xe9e par Julie Nesrallah et Nathalie Paulin"),n.qZA(),n.TgZ(105,"div")(106,"audio",5),n._UZ(107,"source",6),n._uU(108," Your browser does not support the audio element. "),n.qZA()(),n._UZ(109,"br"),n.TgZ(110,"p"),n._uU(111,"O Canada! Our home and native land!"),n.qZA(),n.TgZ(112,"p"),n._uU(113,"True patriot love in all of us command,"),n.qZA(),n._UZ(114,"br"),n.TgZ(115,"p"),n._uU(116,"Car ton bras sait porter l'\xe9p\xe9e,"),n.qZA(),n.TgZ(117,"p"),n._uU(118,"Il sait porter la croix!"),n.qZA(),n._UZ(119,"br"),n.TgZ(120,"p"),n._uU(121,"Ton histoire est une \xe9pop\xe9e"),n.qZA(),n.TgZ(122,"p"),n._uU(123,"Des plus brillants exploits,"),n.qZA(),n._UZ(124,"br"),n.TgZ(125,"p"),n._uU(126,"God keep our land glorious and free!"),n.qZA(),n.TgZ(127,"p"),n._uU(128,"O Canada, we stand on guard for thee."),n.qZA(),n._UZ(129,"br"),n.TgZ(130,"p"),n._uU(131,"O Canada, we stand on guard for thee."),n.qZA()()()()()),2&f&&(n.xp6(4),n.Q6J("src",M.src)("rotation",0)("original-size",!1)("show-all",!0)("fit-to-page",!1)("zoom",1)("zoom-scale","page-width")("stick-to-page",!1)("render-text",!0)("external-link-target","blank")("autoresize",!0)("show-borders",!1),n.xp6(35),n.Q6J("src",M.assetsUrl+"/assets/data/_content_dam_pch_audios_services_anthems-canada_O-Canada-fra.mp3",n.LSH),n.xp6(33),n.Q6J("src",M.assetsUrl+"/assets/data/_content_dam_pch_audios_services_anthems-canada_O-Canada-eng.mp3",n.LSH),n.xp6(35),n.Q6J("src",M.assetsUrl+"/assets/data/_content_dam_pch_audios_services_anthems-canada_O-Canada-billingual.mp3",n.LSH))},dependencies:[r.ez,m.QW,K,$,L,d,R,re,ne],styles:["pdf-viewer[_ngcontent-%COMP%]{height:100vh}"]}),J})()},9627:(module,__unused_webpack_exports,__webpack_require__)=>{var _classStaticPrivateMethodGet=__webpack_require__(5764).default,_defineProperty=__webpack_require__(8416).default,_classPrivateMethodInitSpec=__webpack_require__(1860).default,_classPrivateMethodGet=__webpack_require__(4467).default,_classPrivateFieldInitSpec=__webpack_require__(9159).default,_classPrivateFieldSet=__webpack_require__(5661).default,_classPrivateFieldGet=__webpack_require__(468).default,_classStaticPrivateFieldSpecSet=__webpack_require__(9382).default,_classStaticPrivateFieldSpecGet=__webpack_require__(1280).default,_asyncToGenerator=__webpack_require__(7156).default,k;globalThis,k=()=>(()=>{"use strict";var __webpack_modules__=[,(Z,s,k)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.VerbosityLevel=s.Util=s.UnknownErrorException=s.UnexpectedResponseException=s.UNSUPPORTED_FEATURES=s.TextRenderingMode=s.StreamType=s.RenderingIntentFlag=s.PermissionFlag=s.PasswordResponses=s.PasswordException=s.PageActionEventType=s.OPS=s.MissingPDFException=s.LINE_FACTOR=s.LINE_DESCENT_FACTOR=s.InvalidPDFException=s.ImageKind=s.IDENTITY_MATRIX=s.FormatError=s.FontType=s.FeatureTest=s.FONT_IDENTITY_MATRIX=s.DocumentActionEventType=s.CMapCompressionType=s.BaseException=s.AnnotationType=s.AnnotationStateModelType=s.AnnotationReviewState=s.AnnotationReplyType=s.AnnotationMode=s.AnnotationMarkedState=s.AnnotationFlag=s.AnnotationFieldFlag=s.AnnotationEditorType=s.AnnotationEditorPrefix=s.AnnotationEditorParamsType=s.AnnotationBorderStyleType=s.AnnotationActionEventType=s.AbortException=void 0,s.arrayByteLength=me,s.arraysToBytes=function ie(H){const f=H.length;if(1===f&&H[0]instanceof Uint8Array)return H[0];let M=0;for(let he=0;he<f;he++)M+=me(H[he]);let le=0;const ve=new Uint8Array(M);for(let he=0;he<f;he++){let pe=H[he];pe instanceof Uint8Array||(pe="string"==typeof pe?de(pe):new Uint8Array(pe));const be=pe.byteLength;ve.set(pe,le),le+=be}return ve},s.assert=function l(H,f){H||g(f)},s.bytesToString=function te(H){("object"!=typeof H||null===H||void 0===H.length)&&g("Invalid argument for bytesToString");const f=H.length,M=8192;if(f<M)return String.fromCharCode.apply(null,H);const le=[];for(let ve=0;ve<f;ve+=M){const he=Math.min(ve+M,f),pe=H.subarray(ve,he);le.push(String.fromCharCode.apply(null,pe))}return le.join("")},s.createPromiseCapability=function J(){const H=Object.create(null);let f=!1;return Object.defineProperty(H,"settled",{get:()=>f}),H.promise=new Promise(function(M,le){H.resolve=function(ve){f=!0,M(ve)},H.reject=function(ve){f=!0,le(ve)}}),H},s.createValidAbsoluteUrl=function L(H,f=null,M=null){if(!H)return null;try{if(M&&"string"==typeof H){if(M.addDefaultProtocol&&H.startsWith("www.")){const ve=H.match(/\./g);ve&&ve.length>=2&&(H=`http://${H}`)}if(M.tryConvertEncoding)try{H=B(H)}catch{}}const le=f?new URL(H,f):new URL(H);if(function x(H){if(!H)return!1;switch(H.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}(le))return le}catch{}return null},s.escapeString=function Me(H){return H.replace(/([()\\\n\r])/g,f=>"\n"===f?"\\n":"\r"===f?"\\r":`\\${f}`)},s.getModificationDate=function X(H=new Date){return[H.getUTCFullYear().toString(),(H.getUTCMonth()+1).toString().padStart(2,"0"),H.getUTCDate().toString().padStart(2,"0"),H.getUTCHours().toString().padStart(2,"0"),H.getUTCMinutes().toString().padStart(2,"0"),H.getUTCSeconds().toString().padStart(2,"0")].join("")},s.getVerbosityLevel=function ee(){return j},s.info=function oe(H){j>=b.INFOS&&console.log(`Info: ${H}`)},s.isArrayBuffer=function re(H){return"object"==typeof H&&null!==H&&void 0!==H.byteLength},s.isArrayEqual=function se(H,f){if(H.length!==f.length)return!1;for(let M=0,le=H.length;M<le;M++)if(H[M]!==f[M])return!1;return!0},s.isAscii=function xe(H){return/^[\x00-\x7F]*$/.test(H)},s.objectFromMap=function _e(H){const f=Object.create(null);for(const[M,le]of H)f[M]=le;return f},s.objectSize=function Ae(H){return Object.keys(H).length},s.setVerbosityLevel=function z(H){Number.isInteger(H)&&(j=H)},s.shadow=E,s.string32=function fe(H){return String.fromCharCode(H>>24&255,H>>16&255,H>>8&255,255&H)},s.stringToBytes=de,s.stringToPDFString=function Pe(H){if(H[0]>="\xef"){let M;if("\xfe"===H[0]&&"\xff"===H[1]?M="utf-16be":"\xff"===H[0]&&"\xfe"===H[1]?M="utf-16le":"\xef"===H[0]&&"\xbb"===H[1]&&"\xbf"===H[2]&&(M="utf-8"),M)try{const le=new TextDecoder(M,{fatal:!0}),ve=de(H);return le.decode(ve)}catch(le){V(`stringToPDFString: "${le}".`)}}const f=[];for(let M=0,le=H.length;M<le;M++){const ve=ge[H.charCodeAt(M)];f.push(ve?String.fromCharCode(ve):H.charAt(M))}return f.join("")},s.stringToUTF16BEString=function Se(H){const f=["\xfe\xff"];for(let M=0,le=H.length;M<le;M++){const ve=H.charCodeAt(M);f.push(String.fromCharCode(ve>>8&255),String.fromCharCode(255&ve))}return f.join("")},s.stringToUTF8String=B,s.unreachable=g,s.utf8StringToString=function ne(H){return unescape(encodeURIComponent(H))},s.warn=V,k(2),s.IDENTITY_MATRIX=[1,0,0,1,0,0],s.FONT_IDENTITY_MATRIX=[.001,0,0,.001,0,0],s.LINE_FACTOR=1.35,s.LINE_DESCENT_FACTOR=.35,s.RenderingIntentFlag={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256},s.AnnotationMode={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},s.AnnotationEditorPrefix="pdfjs_internal_editor_",s.AnnotationEditorType={DISABLE:-1,NONE:0,FREETEXT:3,INK:15},s.AnnotationEditorParamsType={FREETEXT_SIZE:1,FREETEXT_COLOR:2,FREETEXT_OPACITY:3,INK_COLOR:11,INK_THICKNESS:12,INK_OPACITY:13},s.PermissionFlag={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},s.TextRenderingMode={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},s.ImageKind={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},s.AnnotationType={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},s.AnnotationStateModelType={MARKED:"Marked",REVIEW:"Review"},s.AnnotationMarkedState={MARKED:"Marked",UNMARKED:"Unmarked"},s.AnnotationReviewState={ACCEPTED:"Accepted",REJECTED:"Rejected",CANCELLED:"Cancelled",COMPLETED:"Completed",NONE:"None"},s.AnnotationReplyType={GROUP:"Group",REPLY:"R"},s.AnnotationFlag={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512},s.AnnotationFieldFlag={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864},s.AnnotationBorderStyleType={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},s.AnnotationActionEventType={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"},s.DocumentActionEventType={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"},s.PageActionEventType={O:"PageOpen",C:"PageClose"},s.StreamType={UNKNOWN:"UNKNOWN",FLATE:"FLATE",LZW:"LZW",DCT:"DCT",JPX:"JPX",JBIG:"JBIG",A85:"A85",AHX:"AHX",CCF:"CCF",RLX:"RLX"},s.FontType={UNKNOWN:"UNKNOWN",TYPE1:"TYPE1",TYPE1STANDARD:"TYPE1STANDARD",TYPE1C:"TYPE1C",CIDFONTTYPE0:"CIDFONTTYPE0",CIDFONTTYPE0C:"CIDFONTTYPE0C",TRUETYPE:"TRUETYPE",CIDFONTTYPE2:"CIDFONTTYPE2",TYPE3:"TYPE3",OPENTYPE:"OPENTYPE",TYPE0:"TYPE0",MMTYPE1:"MMTYPE1"};const b={ERRORS:0,WARNINGS:1,INFOS:5};s.VerbosityLevel=b,s.CMapCompressionType={NONE:0,BINARY:1,STREAM:2},s.OPS={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotations:78,endAnnotations:79,beginAnnotation:80,endAnnotation:81,paintJpegXObject:82,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91},s.UNSUPPORTED_FEATURES={unknown:"unknown",forms:"forms",javaScript:"javaScript",signatures:"signatures",smask:"smask",shadingPattern:"shadingPattern",font:"font",errorTilingPattern:"errorTilingPattern",errorExtGState:"errorExtGState",errorXObject:"errorXObject",errorFontLoadType3:"errorFontLoadType3",errorFontState:"errorFontState",errorFontMissing:"errorFontMissing",errorFontTranslate:"errorFontTranslate",errorColorSpace:"errorColorSpace",errorOperatorList:"errorOperatorList",errorFontToUnicode:"errorFontToUnicode",errorFontLoadNative:"errorFontLoadNative",errorFontBuildPath:"errorFontBuildPath",errorFontGetPath:"errorFontGetPath",errorMarkedContent:"errorMarkedContent",errorContentSubStream:"errorContentSubStream"},s.PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let j=b.WARNINGS;function V(H){j>=b.WARNINGS&&console.log(`Warning: ${H}`)}function g(H){throw new Error(H)}function E(H,f,M){return Object.defineProperty(H,f,{value:M,enumerable:!0,configurable:!0,writable:!1}),M}const i=function(){function f(M,le){this.constructor===f&&g("Cannot initialize BaseException."),this.message=M,this.name=le}return f.prototype=new Error,f.constructor=f,f}();function de(H){"string"!=typeof H&&g("Invalid argument for stringToBytes");const f=H.length,M=new Uint8Array(f);for(let le=0;le<f;++le)M[le]=255&H.charCodeAt(le);return M}function me(H){return void 0!==H.length?H.length:void 0!==H.byteLength?H.byteLength:void g("Invalid argument for arrayByteLength")}s.BaseException=i,s.PasswordException=class h extends i{constructor(f,M){super(f,"PasswordException"),this.code=M}},s.UnknownErrorException=class d extends i{constructor(f,M){super(f,"UnknownErrorException"),this.details=M}},s.InvalidPDFException=class O extends i{constructor(f){super(f,"InvalidPDFException")}},s.MissingPDFException=class R extends i{constructor(f){super(f,"MissingPDFException")}},s.UnexpectedResponseException=class $ extends i{constructor(f,M){super(f,"UnexpectedResponseException"),this.status=M}},s.FormatError=class K extends i{constructor(f){super(f,"FormatError")}},s.AbortException=class ce extends i{constructor(f){super(f,"AbortException")}},s.FeatureTest=class we{static get isLittleEndian(){return E(this,"isLittleEndian",function ae(){const H=new Uint8Array(4);return H[0]=1,1===new Uint32Array(H.buffer,0,1)[0]}())}static get isEvalSupported(){return E(this,"isEvalSupported",function ue(){try{return new Function(""),!0}catch{return!1}}())}static get isOffscreenCanvasSupported(){return E(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}};const ke=[...Array(256).keys()].map(H=>H.toString(16).padStart(2,"0"));class Fe{static makeHexColor(f,M,le){return`#${ke[f]}${ke[M]}${ke[le]}`}static scaleMinMax(f,M){let le;f[0]?(f[0]<0&&(le=M[0],M[0]=M[1],M[1]=le),M[0]*=f[0],M[1]*=f[0],f[3]<0&&(le=M[2],M[2]=M[3],M[3]=le),M[2]*=f[3],M[3]*=f[3]):(le=M[0],M[0]=M[2],M[2]=le,le=M[1],M[1]=M[3],M[3]=le,f[1]<0&&(le=M[2],M[2]=M[3],M[3]=le),M[2]*=f[1],M[3]*=f[1],f[2]<0&&(le=M[0],M[0]=M[1],M[1]=le),M[0]*=f[2],M[1]*=f[2]),M[0]+=f[4],M[1]+=f[4],M[2]+=f[5],M[3]+=f[5]}static transform(f,M){return[f[0]*M[0]+f[2]*M[1],f[1]*M[0]+f[3]*M[1],f[0]*M[2]+f[2]*M[3],f[1]*M[2]+f[3]*M[3],f[0]*M[4]+f[2]*M[5]+f[4],f[1]*M[4]+f[3]*M[5]+f[5]]}static applyTransform(f,M){return[f[0]*M[0]+f[1]*M[2]+M[4],f[0]*M[1]+f[1]*M[3]+M[5]]}static applyInverseTransform(f,M){const le=M[0]*M[3]-M[1]*M[2];return[(f[0]*M[3]-f[1]*M[2]+M[2]*M[5]-M[4]*M[3])/le,(-f[0]*M[1]+f[1]*M[0]+M[4]*M[1]-M[5]*M[0])/le]}static getAxialAlignedBoundingBox(f,M){const le=Fe.applyTransform(f,M),ve=Fe.applyTransform(f.slice(2,4),M),he=Fe.applyTransform([f[0],f[3]],M),pe=Fe.applyTransform([f[2],f[1]],M);return[Math.min(le[0],ve[0],he[0],pe[0]),Math.min(le[1],ve[1],he[1],pe[1]),Math.max(le[0],ve[0],he[0],pe[0]),Math.max(le[1],ve[1],he[1],pe[1])]}static inverseTransform(f){const M=f[0]*f[3]-f[1]*f[2];return[f[3]/M,-f[1]/M,-f[2]/M,f[0]/M,(f[2]*f[5]-f[4]*f[3])/M,(f[4]*f[1]-f[5]*f[0])/M]}static apply3dTransform(f,M){return[f[0]*M[0]+f[1]*M[1]+f[2]*M[2],f[3]*M[0]+f[4]*M[1]+f[5]*M[2],f[6]*M[0]+f[7]*M[1]+f[8]*M[2]]}static singularValueDecompose2dScale(f){const M=[f[0],f[2],f[1],f[3]],le=f[0]*M[0]+f[1]*M[2],pe=f[2]*M[1]+f[3]*M[3],be=(le+pe)/2,ye=Math.sqrt((le+pe)**2-4*(le*pe-(f[2]*M[0]+f[3]*M[2])*(f[0]*M[1]+f[1]*M[3])))/2,Te=be-ye||1;return[Math.sqrt(be+ye||1),Math.sqrt(Te)]}static normalizeRect(f){const M=f.slice(0);return f[0]>f[2]&&(M[0]=f[2],M[2]=f[0]),f[1]>f[3]&&(M[1]=f[3],M[3]=f[1]),M}static intersect(f,M){const le=Math.max(Math.min(f[0],f[2]),Math.min(M[0],M[2])),ve=Math.min(Math.max(f[0],f[2]),Math.max(M[0],M[2]));if(le>ve)return null;const he=Math.max(Math.min(f[1],f[3]),Math.min(M[1],M[3])),pe=Math.min(Math.max(f[1],f[3]),Math.max(M[1],M[3]));return he>pe?null:[le,he,ve,pe]}static bezierBoundingBox(f,M,le,ve,he,pe,be,ye){const Ee=[],Te=[[],[]];let Re,Le,Oe,Ce,Ie,Be,Ue,Ge;for(let qe=0;qe<2;++qe)if(0===qe?(Le=6*f-12*le+6*he,Re=-3*f+9*le-9*he+3*be,Oe=3*le-3*f):(Le=6*M-12*ve+6*pe,Re=-3*M+9*ve-9*pe+3*ye,Oe=3*ve-3*M),Math.abs(Re)<1e-12){if(Math.abs(Le)<1e-12)continue;Ce=-Oe/Le,0<Ce&&Ce<1&&Ee.push(Ce)}else Ue=Le*Le-4*Oe*Re,Ge=Math.sqrt(Ue),!(Ue<0)&&(Ie=(-Le+Ge)/(2*Re),0<Ie&&Ie<1&&Ee.push(Ie),Be=(-Le-Ge)/(2*Re),0<Be&&Be<1&&Ee.push(Be));let De,Ne=Ee.length;const ze=Ne;for(;Ne--;)Ce=Ee[Ne],De=1-Ce,Te[0][Ne]=De*De*De*f+3*De*De*Ce*le+3*De*Ce*Ce*he+Ce*Ce*Ce*be,Te[1][Ne]=De*De*De*M+3*De*De*Ce*ve+3*De*Ce*Ce*pe+Ce*Ce*Ce*ye;return Te[0][ze]=f,Te[1][ze]=M,Te[0][ze+1]=be,Te[1][ze+1]=ye,Te[0].length=Te[1].length=ze+2,[Math.min(...Te[0]),Math.min(...Te[1]),Math.max(...Te[0]),Math.max(...Te[1])]}}s.Util=Fe;const ge=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function B(H){return decodeURIComponent(escape(H))}},(Z,s,k)=>{k(3)},(Z,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.isNodeJS=void 0;const k=!("object"!=typeof process||process+""!="[object process]"||process.versions.nw||process.versions.electron&&process.type&&"browser"!==process.type);s.isNodeJS=k},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.build=exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,exports.getDocument=getDocument,exports.setPDFNetworkStreamFactory=setPDFNetworkStreamFactory,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(5),_display_utils=__w_pdfjs_require__(8),_font_loader=__w_pdfjs_require__(11),_canvas=__w_pdfjs_require__(12),_worker_options=__w_pdfjs_require__(15),_is_node=__w_pdfjs_require__(3),_message_handler=__w_pdfjs_require__(16),_metadata=__w_pdfjs_require__(17),_optional_content_config=__w_pdfjs_require__(18),_transport_stream=__w_pdfjs_require__(19),_xfa_text=__w_pdfjs_require__(20);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100;let DefaultCanvasFactory=_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;let DefaultCMapReaderFactory=_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;let DefaultStandardFontDataFactory=_display_utils.DOMStandardFontDataFactory,createPDFNetworkStream;if(exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory,_is_node.isNodeJS){const{NodeCanvasFactory:Z,NodeCMapReaderFactory:s,NodeStandardFontDataFactory:k}=__w_pdfjs_require__(21);exports.DefaultCanvasFactory=DefaultCanvasFactory=Z,exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory=s,exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory=k}function setPDFNetworkStreamFactory(Z){createPDFNetworkStream=Z}function getDocument(Z){const s=new PDFDocumentLoadingTask;let k;if("string"==typeof Z||Z instanceof URL)k={url:Z};else if((0,_util.isArrayBuffer)(Z))k={data:Z};else if(Z instanceof PDFDataRangeTransport)k={range:Z};else{if("object"!=typeof Z)throw new Error("Invalid parameter in getDocument, need either string, URL, TypedArray, or parameter object.");if(!Z.url&&!Z.data&&!Z.range)throw new Error("Invalid parameter object: need either .data, .range or .url");k=Z}const r=Object.create(null);let m=null,n=null;for(const Q in k){const F=k[Q];switch(Q){case"url":if(typeof window<"u")try{r[Q]=new URL(F,window.location).href;continue}catch(T){(0,_util.warn)(`Cannot create valid URL: "${T}".`)}else if("string"==typeof F||F instanceof URL){r[Q]=F.toString();continue}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.");case"range":m=F;continue;case"worker":n=F;continue;case"data":if(_is_node.isNodeJS&&typeof Buffer<"u"&&F instanceof Buffer)r[Q]=new Uint8Array(F);else{if(F instanceof Uint8Array)break;if("string"==typeof F)r[Q]=(0,_util.stringToBytes)(F);else if("object"!=typeof F||null===F||isNaN(F.length)){if(!(0,_util.isArrayBuffer)(F))throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.");r[Q]=new Uint8Array(F)}else r[Q]=new Uint8Array(F)}continue}r[Q]=F}if(r.CMapReaderFactory=r.CMapReaderFactory||DefaultCMapReaderFactory,r.StandardFontDataFactory=r.StandardFontDataFactory||DefaultStandardFontDataFactory,r.ignoreErrors=!0!==r.stopAtErrors,r.fontExtraProperties=!0===r.fontExtraProperties,r.pdfBug=!0===r.pdfBug,r.enableXfa=!0===r.enableXfa,(!Number.isInteger(r.rangeChunkSize)||r.rangeChunkSize<1)&&(r.rangeChunkSize=DEFAULT_RANGE_CHUNK_SIZE),("string"!=typeof r.docBaseUrl||(0,_display_utils.isDataScheme)(r.docBaseUrl))&&(r.docBaseUrl=null),(!Number.isInteger(r.maxImageSize)||r.maxImageSize<-1)&&(r.maxImageSize=-1),"string"!=typeof r.cMapUrl&&(r.cMapUrl=null),"string"!=typeof r.standardFontDataUrl&&(r.standardFontDataUrl=null),"boolean"!=typeof r.useWorkerFetch&&(r.useWorkerFetch=r.CMapReaderFactory===_display_utils.DOMCMapReaderFactory&&r.StandardFontDataFactory===_display_utils.DOMStandardFontDataFactory),"boolean"!=typeof r.isEvalSupported&&(r.isEvalSupported=!0),"boolean"!=typeof r.disableFontFace&&(r.disableFontFace=_is_node.isNodeJS),"boolean"!=typeof r.useSystemFonts&&(r.useSystemFonts=!_is_node.isNodeJS&&!r.disableFontFace),("object"!=typeof r.ownerDocument||null===r.ownerDocument)&&(r.ownerDocument=globalThis.document),"boolean"!=typeof r.disableRange&&(r.disableRange=!1),"boolean"!=typeof r.disableStream&&(r.disableStream=!1),"boolean"!=typeof r.disableAutoFetch&&(r.disableAutoFetch=!1),(0,_util.setVerbosityLevel)(r.verbosity),!n){const Q={verbosity:r.verbosity,port:_worker_options.GlobalWorkerOptions.workerPort};n=Q.port?PDFWorker.fromPort(Q):new PDFWorker(Q),s._worker=n}const D=s.docId;return n.promise.then(function(){if(s.destroyed)throw new Error("Loading aborted");const Q=_fetchDocument(n,r,m,D),F=new Promise(function(T){let G;m?G=new _transport_stream.PDFDataTransportStream({length:r.length,initialData:r.initialData,progressiveDone:r.progressiveDone,contentDispositionFilename:r.contentDispositionFilename,disableRange:r.disableRange,disableStream:r.disableStream},m):r.data||(G=createPDFNetworkStream({url:r.url,length:r.length,httpHeaders:r.httpHeaders,withCredentials:r.withCredentials,rangeChunkSize:r.rangeChunkSize,disableRange:r.disableRange,disableStream:r.disableStream})),T(G)});return Promise.all([Q,F]).then(function([T,G]){if(s.destroyed)throw new Error("Loading aborted");const q=new _message_handler.MessageHandler(D,T,n.port),U=new WorkerTransport(q,s,G,r);s._transport=U,q.send("Ready",null)})}).catch(s._capability.reject),s}function _fetchDocument(Z,s,k,r){return _fetchDocument2.apply(this,arguments)}function _fetchDocument2(){return(_fetchDocument2=_asyncToGenerator(function*(Z,s,k,r){if(Z.destroyed)throw new Error("Worker was destroyed");k&&(s.length=k.length,s.initialData=k.initialData,s.progressiveDone=k.progressiveDone,s.contentDispositionFilename=k.contentDispositionFilename);const m=yield Z.messageHandler.sendWithPromise("GetDocRequest",{docId:r,apiVersion:"2.16.105",source:{data:s.data,url:s.url,password:s.password,disableAutoFetch:s.disableAutoFetch,rangeChunkSize:s.rangeChunkSize,length:s.length},maxImageSize:s.maxImageSize,disableFontFace:s.disableFontFace,docBaseUrl:s.docBaseUrl,ignoreErrors:s.ignoreErrors,isEvalSupported:s.isEvalSupported,fontExtraProperties:s.fontExtraProperties,enableXfa:s.enableXfa,useSystemFonts:s.useSystemFonts,cMapUrl:s.useWorkerFetch?s.cMapUrl:null,standardFontDataUrl:s.useWorkerFetch?s.standardFontDataUrl:null});if(s.data&&(s.data=null),Z.destroyed)throw new Error("Worker was destroyed");return m})).apply(this,arguments)}class PDFDocumentLoadingTask{constructor(){var s,k;this._capability=(0,_util.createPromiseCapability)(),this._transport=null,this._worker=null,this.docId=`d${_classStaticPrivateFieldSpecSet(PDFDocumentLoadingTask,PDFDocumentLoadingTask,_docId,(s=_classStaticPrivateFieldSpecGet(PDFDocumentLoadingTask,PDFDocumentLoadingTask,_docId),k=s++,s)),k}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null,this.onUnsupportedFeature=null}get promise(){return this._capability.promise}destroy(){var s=this;return _asyncToGenerator(function*(){s.destroyed=!0,yield s._transport?.destroy(),s._transport=null,s._worker&&(s._worker.destroy(),s._worker=null)})()}}var _docId={writable:!0,value:0};exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(s,k,r=!1,m=null){this.length=s,this.initialData=k,this.progressiveDone=r,this.contentDispositionFilename=m,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=(0,_util.createPromiseCapability)()}addRangeListener(s){this._rangeListeners.push(s)}addProgressListener(s){this._progressListeners.push(s)}addProgressiveReadListener(s){this._progressiveReadListeners.push(s)}addProgressiveDoneListener(s){this._progressiveDoneListeners.push(s)}onDataRange(s,k){for(const r of this._rangeListeners)r(s,k)}onDataProgress(s,k){this._readyCapability.promise.then(()=>{for(const r of this._progressListeners)r(s,k)})}onDataProgressiveRead(s){this._readyCapability.promise.then(()=>{for(const k of this._progressiveReadListeners)k(s)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const s of this._progressiveDoneListeners)s()})}transportReady(){this._readyCapability.resolve()}requestDataRange(s,k){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(s,k){var m,r=this;this._pdfInfo=s,this._transport=k,Object.defineProperty(this,"fingerprint",{get(){return(0,_display_utils.deprecated)("`PDFDocumentProxy.fingerprint`, please use `PDFDocumentProxy.fingerprints` instead."),this.fingerprints[0]}}),Object.defineProperty(this,"getStats",{value:(m=_asyncToGenerator(function*(){return(0,_display_utils.deprecated)("`PDFDocumentProxy.getStats`, please use the `PDFDocumentProxy.stats`-getter instead."),r.stats||{streamTypes:{},fontTypes:{}}}),function(){return m.apply(this,arguments)})})}get annotationStorage(){return this._transport.annotationStorage}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get stats(){return this._transport.stats}get isPureXfa(){return!!this._transport._htmlForXfa}get allXfaHtml(){return this._transport._htmlForXfa}getPage(s){return this._transport.getPage(s)}getPageIndex(s){return this._transport.getPageIndex(s)}getDestinations(){return this._transport.getDestinations()}getDestination(s){return this._transport.getDestination(s)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJavaScript(){return this._transport.getJavaScript()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(s=!1){return this._transport.startCleanup(s||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}saveDocument(){return this._transport.annotationStorage.size<=0&&(0,_display_utils.deprecated)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead."),this._transport.saveDocument()}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(s,k,r,m,n=!1){this._pageIndex=s,this._pageInfo=k,this._ownerDocument=m,this._transport=r,this._stats=n?new _display_utils.StatTimer:null,this._pdfBug=n,this.commonObjs=r.commonObjs,this.objs=new PDFObjects,this._bitmaps=new Set,this.cleanupAfterRender=!1,this.pendingCleanup=!1,this._intentStates=new Map,this._annotationPromises=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:s,rotation:k=this.rotate,offsetX:r=0,offsetY:m=0,dontFlip:n=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:s,rotation:k,offsetX:r,offsetY:m,dontFlip:n})}getAnnotations({intent:s="display"}={}){const k=this._transport.getRenderingIntent(s);let r=this._annotationPromises.get(k.cacheKey);return r||(r=this._transport.getAnnotations(this._pageIndex,k.renderingIntent),this._annotationPromises.set(k.cacheKey,r),r=r.then(m=>{for(const n of m)void 0!==n.titleObj&&Object.defineProperty(n,"title",{get:()=>((0,_display_utils.deprecated)("`title`-property on annotation, please use `titleObj` instead."),n.titleObj.str)}),void 0!==n.contentsObj&&Object.defineProperty(n,"contents",{get:()=>((0,_display_utils.deprecated)("`contents`-property on annotation, please use `contentsObj` instead."),n.contentsObj.str)});return m})),r}getJSActions(){return this._jsActionsPromise||=this._transport.getPageJSActions(this._pageIndex)}getXfa(){var s=this;return _asyncToGenerator(function*(){return s._transport._htmlForXfa?.children[s._pageIndex]||null})()}render({canvasContext:s,viewport:k,intent:r="display",annotationMode:m=_util.AnnotationMode.ENABLE,transform:n=null,imageLayer:D=null,canvasFactory:Q=null,background:F=null,optionalContentConfigPromise:T=null,annotationCanvasMap:G=null,pageColors:q=null,printAnnotationStorage:U=null}){void 0!==arguments[0]?.renderInteractiveForms&&((0,_display_utils.deprecated)("render no longer accepts the `renderInteractiveForms`-option, please use the `annotationMode`-option instead."),!0===arguments[0].renderInteractiveForms&&m===_util.AnnotationMode.ENABLE&&(m=_util.AnnotationMode.ENABLE_FORMS)),void 0!==arguments[0]?.includeAnnotationStorage&&((0,_display_utils.deprecated)("render no longer accepts the `includeAnnotationStorage`-option, please use the `annotationMode`-option instead."),!0===arguments[0].includeAnnotationStorage&&m===_util.AnnotationMode.ENABLE&&(m=_util.AnnotationMode.ENABLE_STORAGE)),this._stats&&this._stats.time("Overall");const C=this._transport.getRenderingIntent(r,m,U);this.pendingCleanup=!1,T||(T=this._transport.getOptionalContentConfig());let w=this._intentStates.get(C.cacheKey);w||(w=Object.create(null),this._intentStates.set(C.cacheKey,w)),w.streamReaderCancelTimeout&&(clearTimeout(w.streamReaderCancelTimeout),w.streamReaderCancelTimeout=null);const a=Q||new DefaultCanvasFactory({ownerDocument:this._ownerDocument}),_=!!(C.renderingIntent&_util.RenderingIntentFlag.PRINT);w.displayReadyCapability||(w.displayReadyCapability=(0,_util.createPromiseCapability)(),w.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList(C));const A=u=>{w.renderTasks.delete(y),(this.cleanupAfterRender||_)&&(this.pendingCleanup=!0),this._tryCleanup(),u?(y.capability.reject(u),this._abortOperatorList({intentState:w,reason:u instanceof Error?u:new Error(u)})):y.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"))},y=new InternalRenderTask({callback:A,params:{canvasContext:s,viewport:k,transform:n,imageLayer:D,background:F},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:G,operatorList:w.operatorList,pageIndex:this._pageIndex,canvasFactory:a,useRequestAnimationFrame:!_,pdfBug:this._pdfBug,pageColors:q});(w.renderTasks||=new Set).add(y);const P=y.task;return Promise.all([w.displayReadyCapability.promise,T]).then(([u,t])=>{this.pendingCleanup?A():(this._stats&&this._stats.time("Rendering"),y.initializeGraphics({transparency:u,optionalContentConfig:t}),y.operatorListChanged())}).catch(A),P}getOperatorList({intent:s="display",annotationMode:k=_util.AnnotationMode.ENABLE,printAnnotationStorage:r=null}={}){const n=this._transport.getRenderingIntent(s,k,r,!0);let Q,D=this._intentStates.get(n.cacheKey);return D||(D=Object.create(null),this._intentStates.set(n.cacheKey,D)),D.opListReadCapability||(Q=Object.create(null),Q.operatorListChanged=function m(){D.operatorList.lastChunk&&(D.opListReadCapability.resolve(D.operatorList),D.renderTasks.delete(Q))},D.opListReadCapability=(0,_util.createPromiseCapability)(),(D.renderTasks||=new Set).add(Q),D.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList(n)),D.opListReadCapability.promise}streamTextContent({disableCombineTextItems:s=!1,includeMarkedContent:k=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,combineTextItems:!0!==s,includeMarkedContent:!0===k},{highWaterMark:100,size:m=>m.items.length})}getTextContent(s={}){if(this._transport._htmlForXfa)return this.getXfa().then(r=>_xfa_text.XfaText.textContent(r));const k=this.streamTextContent(s);return new Promise(function(r,m){const D=k.getReader(),Q={items:[],styles:Object.create(null)};!function n(){D.read().then(function({value:F,done:T}){T?r(Q):(Object.assign(Q.styles,F.styles),Q.items.push(...F.items),n())},m)}()})}getStructTree(){return this._structTreePromise||=this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const s=[];for(const k of this._intentStates.values())if(this._abortOperatorList({intentState:k,reason:new Error("Page was destroyed."),force:!0}),!k.opListReadCapability)for(const r of k.renderTasks)s.push(r.completed),r.cancel();this.objs.clear();for(const k of this._bitmaps)k.close();return this._bitmaps.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,this.pendingCleanup=!1,Promise.all(s)}cleanup(s=!1){return this.pendingCleanup=!0,this._tryCleanup(s)}_tryCleanup(s=!1){if(!this.pendingCleanup)return!1;for(const{renderTasks:k,operatorList:r}of this._intentStates.values())if(k.size>0||!r.lastChunk)return!1;this._intentStates.clear(),this.objs.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,s&&this._stats&&(this._stats=new _display_utils.StatTimer);for(const k of this._bitmaps)k.close();return this._bitmaps.clear(),this.pendingCleanup=!1,!0}_startRenderPage(s,k){const r=this._intentStates.get(k);r&&(this._stats&&this._stats.timeEnd("Page Request"),r.displayReadyCapability&&r.displayReadyCapability.resolve(s))}_renderPageChunk(s,k){for(let r=0,m=s.length;r<m;r++)k.operatorList.fnArray.push(s.fnArray[r]),k.operatorList.argsArray.push(s.argsArray[r]);k.operatorList.lastChunk=s.lastChunk,k.operatorList.separateAnnots=s.separateAnnots;for(const r of k.renderTasks)r.operatorListChanged();s.lastChunk&&this._tryCleanup()}_pumpOperatorList({renderingIntent:s,cacheKey:k,annotationStorageMap:r}){const n=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:s,cacheKey:k,annotationStorage:r}).getReader(),D=this._intentStates.get(k);D.streamReader=n;const Q=()=>{n.read().then(({value:F,done:T})=>{T?D.streamReader=null:this._transport.destroyed||(this._renderPageChunk(F,D),Q())},F=>{if(D.streamReader=null,!this._transport.destroyed){if(D.operatorList){D.operatorList.lastChunk=!0;for(const T of D.renderTasks)T.operatorListChanged();this._tryCleanup()}if(D.displayReadyCapability)D.displayReadyCapability.reject(F);else{if(!D.opListReadCapability)throw F;D.opListReadCapability.reject(F)}}})};Q()}_abortOperatorList({intentState:s,reason:k,force:r=!1}){if(s.streamReader){if(!r){if(s.renderTasks.size>0)return;if(k instanceof _display_utils.RenderingCancelledException)return void(s.streamReaderCancelTimeout=setTimeout(()=>{this._abortOperatorList({intentState:s,reason:k,force:!0}),s.streamReaderCancelTimeout=null},RENDERING_CANCELLED_TIMEOUT))}if(s.streamReader.cancel(new _util.AbortException(k.message)).catch(()=>{}),s.streamReader=null,!this._transport.destroyed){for(const[m,n]of this._intentStates)if(n===s){this._intentStates.delete(m);break}this.cleanup()}}}get stats(){return this._stats}}exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){this._listeners=[],this._deferred=Promise.resolve()}postMessage(s,k){const r={data:structuredClone(s,k)};this._deferred.then(()=>{for(const m of this._listeners)m.call(this,r)})}addEventListener(s,k){this._listeners.push(k)}removeEventListener(s,k){const r=this._listeners.indexOf(k);this._listeners.splice(r,1)}terminate(){this._listeners.length=0}}exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};if(exports.PDFWorkerUtil=PDFWorkerUtil,_is_node.isNodeJS)PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if("object"==typeof document){const Z=document?.currentScript?.src;Z&&(PDFWorkerUtil.fallbackWorkerSrc=Z.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(Z,s){let k;try{if(k=new URL(Z),!k.origin||"null"===k.origin)return!1}catch{return!1}const r=new URL(s,k);return k.origin===r.origin},PDFWorkerUtil.createCDNWrapper=function(Z){return URL.createObjectURL(new Blob([`importScripts("${Z}");`]))};class PDFWorker{constructor({name:Z=null,port:s=null,verbosity:k=(0,_util.getVerbosityLevel)()}={}){if(s&&_classStaticPrivateFieldSpecGet(PDFWorker,PDFWorker,_workerPorts).has(s))throw new Error("Cannot use more than one PDFWorker per port.");if(this.name=Z,this.destroyed=!1,this.verbosity=k,this._readyCapability=(0,_util.createPromiseCapability)(),this._port=null,this._webWorker=null,this._messageHandler=null,s)return _classStaticPrivateFieldSpecGet(PDFWorker,PDFWorker,_workerPorts).set(s,this),void this._initializeFromPort(s);this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(Z){this._port=Z,this._messageHandler=new _message_handler.MessageHandler("main","worker",Z),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve()}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:Z}=PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,Z)||(Z=PDFWorkerUtil.createCDNWrapper(new URL(Z,window.location).href));const s=new Worker(Z),k=new _message_handler.MessageHandler("main","worker",s),r=()=>{s.removeEventListener("error",m),k.destroy(),s.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},m=()=>{this._webWorker||r()};s.addEventListener("error",m),k.on("test",D=>{s.removeEventListener("error",m),this.destroyed?r():D?(this._messageHandler=k,this._port=s,this._webWorker=s,this._readyCapability.resolve(),k.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),k.destroy(),s.terminate())}),k.on("ready",D=>{if(s.removeEventListener("error",m),this.destroyed)r();else try{n()}catch{this._setupFakeWorker()}});const n=()=>{const D=new Uint8Array;k.send("test",D,[D.buffer])};return void n()}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),PDFWorker._setupFakeWorkerGlobal.then(Z=>{if(this.destroyed)return void this._readyCapability.reject(new Error("Worker was destroyed"));const s=new LoopbackPort;this._port=s;const k="fake"+PDFWorkerUtil.fakeWorkerId++,r=new _message_handler.MessageHandler(k+"_worker",k,s);Z.setup(r,s);const m=new _message_handler.MessageHandler(k,k+"_worker",s);this._messageHandler=m,this._readyCapability.resolve(),m.send("configure",{verbosity:this.verbosity})}).catch(Z=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${Z.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),_classStaticPrivateFieldSpecGet(PDFWorker,PDFWorker,_workerPorts).delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(Z){if(!Z?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return _classStaticPrivateFieldSpecGet(this,PDFWorker,_workerPorts).has(Z.port)?_classStaticPrivateFieldSpecGet(this,PDFWorker,_workerPorts).get(Z.port):new PDFWorker(Z)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(null!==PDFWorkerUtil.fallbackWorkerSrc)return _is_node.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}}static get _setupFakeWorkerGlobal(){var _this4=this;const loader=function(){var _ref2=_asyncToGenerator(function*(){const mainWorkerMessageHandler=_this4._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_is_node.isNodeJS){const worker=eval("require")(_this4.workerSrc);return worker.WorkerMessageHandler}return yield(0,_display_utils.loadScript)(_this4.workerSrc),window.pdfjsWorker.WorkerMessageHandler});return function Z(){return _ref2.apply(this,arguments)}}();return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}}var _workerPorts={writable:!0,value:new WeakMap};exports.PDFWorker=PDFWorker,PDFWorker.getWorkerSrc=function(){return(0,_display_utils.deprecated)("`PDFWorker.getWorkerSrc()`, please use `PDFWorker.workerSrc` instead."),this.workerSrc};var _docStats=new WeakMap,_pageCache=new WeakMap,_pagePromises=new WeakMap,_metadataPromise=new WeakMap;class WorkerTransport{constructor(s,k,r,m){_classPrivateFieldInitSpec(this,_docStats,{writable:!0,value:null}),_classPrivateFieldInitSpec(this,_pageCache,{writable:!0,value:new Map}),_classPrivateFieldInitSpec(this,_pagePromises,{writable:!0,value:new Map}),_classPrivateFieldInitSpec(this,_metadataPromise,{writable:!0,value:null}),this.messageHandler=s,this.loadingTask=k,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({docId:k.docId,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),ownerDocument:m.ownerDocument,styleElement:m.styleElement}),this._params=m,m.useWorkerFetch||(this.CMapReaderFactory=new m.CMapReaderFactory({baseUrl:m.cMapUrl,isCompressed:m.cMapPacked}),this.StandardFontDataFactory=new m.StandardFontDataFactory({baseUrl:m.standardFontDataUrl})),this.destroyed=!1,this.destroyCapability=null,this._passwordCapability=null,this._networkStream=r,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=(0,_util.createPromiseCapability)(),this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}get stats(){return _classPrivateFieldGet(this,_docStats)}getRenderingIntent(s,k=_util.AnnotationMode.ENABLE,r=null,m=!1){let n=_util.RenderingIntentFlag.DISPLAY,D=null;switch(s){case"any":n=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":n=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${s}`)}switch(k){case _util.AnnotationMode.DISABLE:n+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:n+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:n+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,D=(n&_util.RenderingIntentFlag.PRINT&&r instanceof _annotation_storage.PrintAnnotationStorage?r:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${k}`)}return m&&(n+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:n,cacheKey:`${n}_${_annotation_storage.AnnotationStorage.getHash(D)}`,annotationStorageMap:D}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=(0,_util.createPromiseCapability)(),this._passwordCapability&&this._passwordCapability.reject(new Error("Worker was destroyed during onPassword callback"));const s=[];for(const r of _classPrivateFieldGet(this,_pageCache).values())s.push(r._destroy());_classPrivateFieldGet(this,_pageCache).clear(),_classPrivateFieldGet(this,_pagePromises).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const k=this.messageHandler.sendWithPromise("Terminate",null);return s.push(k),Promise.all(s).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),_classPrivateFieldSet(this,_metadataPromise,null),this._getFieldObjectsPromise=null,this._hasJSActionsPromise=null,this._networkStream&&this._networkStream.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:s,loadingTask:k}=this;s.on("GetReader",(r,m)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=n=>{this._lastProgress={loaded:n.loaded,total:n.total}},m.onPull=()=>{this._fullReader.read().then(function({value:n,done:D}){D?m.close():((0,_util.assert)((0,_util.isArrayBuffer)(n),"GetReader - expected an ArrayBuffer."),m.enqueue(new Uint8Array(n),1,[n]))}).catch(n=>{m.error(n)})},m.onCancel=n=>{this._fullReader.cancel(n),m.ready.catch(D=>{if(!this.destroyed)throw D})}}),s.on("ReaderHeadersReady",r=>{const m=(0,_util.createPromiseCapability)(),n=this._fullReader;return n.headersReady.then(()=>{(!n.isStreamingSupported||!n.isRangeSupported)&&(this._lastProgress&&k.onProgress?.(this._lastProgress),n.onProgress=D=>{k.onProgress?.({loaded:D.loaded,total:D.total})}),m.resolve({isStreamingSupported:n.isStreamingSupported,isRangeSupported:n.isRangeSupported,contentLength:n.contentLength})},m.reject),m.promise}),s.on("GetRangeReader",(r,m)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const n=this._networkStream.getRangeReader(r.begin,r.end);n?(m.onPull=()=>{n.read().then(function({value:D,done:Q}){Q?m.close():((0,_util.assert)((0,_util.isArrayBuffer)(D),"GetRangeReader - expected an ArrayBuffer."),m.enqueue(new Uint8Array(D),1,[D]))}).catch(D=>{m.error(D)})},m.onCancel=D=>{n.cancel(D),m.ready.catch(Q=>{if(!this.destroyed)throw Q})}):m.close()}),s.on("GetDoc",({pdfInfo:r})=>{this._numPages=r.numPages,this._htmlForXfa=r.htmlForXfa,delete r.htmlForXfa,k._capability.resolve(new PDFDocumentProxy(r,this))}),s.on("DocException",function(r){let m;switch(r.name){case"PasswordException":m=new _util.PasswordException(r.message,r.code);break;case"InvalidPDFException":m=new _util.InvalidPDFException(r.message);break;case"MissingPDFException":m=new _util.MissingPDFException(r.message);break;case"UnexpectedResponseException":m=new _util.UnexpectedResponseException(r.message,r.status);break;case"UnknownErrorException":m=new _util.UnknownErrorException(r.message,r.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}k._capability.reject(m)}),s.on("PasswordRequest",r=>{if(this._passwordCapability=(0,_util.createPromiseCapability)(),k.onPassword){const m=n=>{n instanceof Error?this._passwordCapability.reject(n):this._passwordCapability.resolve({password:n})};try{k.onPassword(m,r.code)}catch(n){this._passwordCapability.reject(n)}}else this._passwordCapability.reject(new _util.PasswordException(r.message,r.code));return this._passwordCapability.promise}),s.on("DataLoaded",r=>{k.onProgress?.({loaded:r.length,total:r.length}),this.downloadInfoCapability.resolve(r)}),s.on("StartRenderPage",r=>{this.destroyed||_classPrivateFieldGet(this,_pageCache).get(r.pageIndex)._startRenderPage(r.transparency,r.cacheKey)}),s.on("commonobj",([r,m,n])=>{if(!this.destroyed&&!this.commonObjs.has(r))switch(m){case"Font":const D=this._params;if("error"in n){const T=n.error;(0,_util.warn)(`Error during font loading: ${T}`),this.commonObjs.resolve(r,T);break}let Q=null;D.pdfBug&&globalThis.FontInspector?.enabled&&(Q={registerFont(T,G){globalThis.FontInspector.fontAdded(T,G)}});const F=new _font_loader.FontFaceObject(n,{isEvalSupported:D.isEvalSupported,disableFontFace:D.disableFontFace,ignoreErrors:D.ignoreErrors,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),fontRegistry:Q});this.fontLoader.bind(F).catch(T=>s.sendWithPromise("FontFallback",{id:r})).finally(()=>{!D.fontExtraProperties&&F.data&&(F.data=null),this.commonObjs.resolve(r,F)});break;case"FontPath":case"Image":this.commonObjs.resolve(r,n);break;default:throw new Error(`Got unknown common object type ${m}`)}}),s.on("obj",([r,m,n,D])=>{if(this.destroyed)return;const Q=_classPrivateFieldGet(this,_pageCache).get(m);if(!Q.objs.has(r))switch(n){case"Image":Q.objs.resolve(r,D);const F=8e6;if(D){let T;if(D.bitmap){const{bitmap:G,width:q,height:U}=D;T=q*U*4,Q._bitmaps.add(G)}else T=D.data?.length||0;T>F&&(Q.cleanupAfterRender=!0)}break;case"Pattern":Q.objs.resolve(r,D);break;default:throw new Error(`Got unknown object type ${n}`)}}),s.on("DocProgress",r=>{this.destroyed||k.onProgress?.({loaded:r.loaded,total:r.total})}),s.on("DocStats",r=>{this.destroyed||_classPrivateFieldSet(this,_docStats,Object.freeze({streamTypes:Object.freeze(r.streamTypes),fontTypes:Object.freeze(r.fontTypes)}))}),s.on("UnsupportedFeature",this._onUnsupportedFeature.bind(this)),s.on("FetchBuiltInCMap",r=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.CMapReaderFactory?this.CMapReaderFactory.fetch(r):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),s.on("FetchStandardFontData",r=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.StandardFontDataFactory?this.StandardFontDataFactory.fetch(r):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}_onUnsupportedFeature({featureId:s}){this.destroyed||this.loadingTask.onUnsupportedFeature?.(s)}getData(){return this.messageHandler.sendWithPromise("GetData",null)}getPage(s){if(!Number.isInteger(s)||s<=0||s>this._numPages)return Promise.reject(new Error("Invalid page request."));const k=s-1,r=_classPrivateFieldGet(this,_pagePromises).get(k);if(r)return r;const m=this.messageHandler.sendWithPromise("GetPage",{pageIndex:k}).then(n=>{if(this.destroyed)throw new Error("Transport destroyed");const D=new PDFPageProxy(k,n,this,this._params.ownerDocument,this._params.pdfBug);return _classPrivateFieldGet(this,_pageCache).set(k,D),D});return _classPrivateFieldGet(this,_pagePromises).set(k,m),m}getPageIndex(s){return"object"!=typeof s||null===s||!Number.isInteger(s.num)||s.num<0||!Number.isInteger(s.gen)||s.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:s.num,gen:s.gen})}getAnnotations(s,k){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:s,intent:k})}saveDocument(){return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:this.annotationStorage.serializable,filename:this._fullReader?.filename??null}).finally(()=>{this.annotationStorage.resetModified()})}getFieldObjects(){return this._getFieldObjectsPromise||=this.messageHandler.sendWithPromise("GetFieldObjects",null)}hasJSActions(){return this._hasJSActionsPromise||=this.messageHandler.sendWithPromise("HasJSActions",null)}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(s){return"string"!=typeof s?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:s})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getJavaScript(){return this.messageHandler.sendWithPromise("GetJavaScript",null)}getDocJSActions(){return this.messageHandler.sendWithPromise("GetDocJSActions",null)}getPageJSActions(s){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:s})}getStructTree(s){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:s})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(s=>new _optional_content_config.OptionalContentConfig(s))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){return _classPrivateFieldGet(this,_metadataPromise)||_classPrivateFieldSet(this,_metadataPromise,this.messageHandler.sendWithPromise("GetMetadata",null).then(s=>({info:s[0],metadata:s[1]?new _metadata.Metadata(s[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null})))}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}startCleanup(s=!1){var k=this;return _asyncToGenerator(function*(){if(yield k.messageHandler.sendWithPromise("Cleanup",null),!k.destroyed){for(const r of _classPrivateFieldGet(k,_pageCache).values())if(!r.cleanup())throw new Error(`startCleanup: Page ${r.pageNumber} is currently rendering.`);k.commonObjs.clear(),s||k.fontLoader.clear(),_classPrivateFieldSet(k,_metadataPromise,null),k._getFieldObjectsPromise=null,k._hasJSActionsPromise=null}})()}get loadingParams(){const s=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:s.disableAutoFetch,enableXfa:s.enableXfa})}}var _objs=new WeakMap,_ensureObj=new WeakSet;class PDFObjects{constructor(){_classPrivateMethodInitSpec(this,_ensureObj),_classPrivateFieldInitSpec(this,_objs,{writable:!0,value:Object.create(null)})}get(s,k=null){if(k){const m=_classPrivateMethodGet(this,_ensureObj,_ensureObj2).call(this,s);return m.capability.promise.then(()=>k(m.data)),null}const r=_classPrivateFieldGet(this,_objs)[s];if(!r?.capability.settled)throw new Error(`Requesting object that isn't resolved yet ${s}.`);return r.data}has(s){return _classPrivateFieldGet(this,_objs)[s]?.capability.settled||!1}resolve(s,k=null){const r=_classPrivateMethodGet(this,_ensureObj,_ensureObj2).call(this,s);r.data=k,r.capability.resolve()}clear(){_classPrivateFieldSet(this,_objs,Object.create(null))}}function _ensureObj2(Z){return _classPrivateFieldGet(this,_objs)[Z]||(_classPrivateFieldGet(this,_objs)[Z]={capability:(0,_util.createPromiseCapability)(),data:null})}var _internalRenderTask=new WeakMap;class RenderTask{constructor(s){_classPrivateFieldInitSpec(this,_internalRenderTask,{writable:!0,value:null}),_classPrivateFieldSet(this,_internalRenderTask,s),this.onContinue=null}get promise(){return _classPrivateFieldGet(this,_internalRenderTask).capability.promise}cancel(){_classPrivateFieldGet(this,_internalRenderTask).cancel()}get separateAnnots(){const{separateAnnots:s}=_classPrivateFieldGet(this,_internalRenderTask).operatorList;if(!s)return!1;const{annotationCanvasMap:k}=_classPrivateFieldGet(this,_internalRenderTask);return s.form||s.canvas&&k?.size>0}}exports.RenderTask=RenderTask;class InternalRenderTask{constructor({callback:s,params:k,objs:r,commonObjs:m,annotationCanvasMap:n,operatorList:D,pageIndex:Q,canvasFactory:F,useRequestAnimationFrame:T=!1,pdfBug:G=!1,pageColors:q=null}){this.callback=s,this.params=k,this.objs=r,this.commonObjs=m,this.annotationCanvasMap=n,this.operatorListIdx=null,this.operatorList=D,this._pageIndex=Q,this.canvasFactory=F,this._pdfBug=G,this.pageColors=q,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=!0===T&&typeof window<"u",this.cancelled=!1,this.capability=(0,_util.createPromiseCapability)(),this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=k.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:s=!1,optionalContentConfig:k}){if(this.cancelled)return;if(this._canvas){if(_classStaticPrivateFieldSpecGet(InternalRenderTask,InternalRenderTask,_canvasInUse).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");_classStaticPrivateFieldSpecGet(InternalRenderTask,InternalRenderTask,_canvasInUse).add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:r,viewport:m,transform:n,imageLayer:D,background:Q}=this.params;this.gfx=new _canvas.CanvasGraphics(r,this.commonObjs,this.objs,this.canvasFactory,D,k,this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:n,viewport:m,transparency:s,background:Q}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback&&this.graphicsReadyCallback()}cancel(s=null){this.running=!1,this.cancelled=!0,this.gfx&&this.gfx.endDrawing(),this._canvas&&_classStaticPrivateFieldSpecGet(InternalRenderTask,InternalRenderTask,_canvasInUse).delete(this._canvas),this.callback(s||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,"canvas"))}operatorListChanged(){this.graphicsReady?(this.stepper&&this.stepper.updateOperatorList(this.operatorList),!this.running&&this._continue()):this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound)}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}_next(){var s=this;return _asyncToGenerator(function*(){s.cancelled||(s.operatorListIdx=s.gfx.executeOperatorList(s.operatorList,s.operatorListIdx,s._continueBound,s.stepper),s.operatorListIdx===s.operatorList.argsArray.length&&(s.running=!1,s.operatorList.lastChunk&&(s.gfx.endDrawing(),s._canvas&&_classStaticPrivateFieldSpecGet(InternalRenderTask,InternalRenderTask,_canvasInUse).delete(s._canvas),s.callback())))})()}}var _canvasInUse={writable:!0,value:new WeakSet};const version="2.16.105";exports.version=version;const build="172ccdbe5";exports.build=build},(Z,s,k)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.PrintAnnotationStorage=s.AnnotationStorage=void 0;var r=k(1),m=k(6),n=k(10),D=new WeakSet;class Q{constructor(){_classPrivateMethodInitSpec(this,D),this._storage=new Map,this._modified=!1,this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(U,C){const w=this._storage.get(U);return void 0===w?C:Object.assign(C,w)}getRawValue(U){return this._storage.get(U)}remove(U){if(this._storage.delete(U),0===this._storage.size&&this.resetModified(),"function"==typeof this.onAnnotationEditor){for(const C of this._storage.values())if(C instanceof m.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(U,C){const w=this._storage.get(U);let a=!1;if(void 0!==w)for(const[_,A]of Object.entries(C))w[_]!==A&&(a=!0,w[_]=A);else a=!0,this._storage.set(U,C);a&&_classPrivateMethodGet(this,D,F).call(this),C instanceof m.AnnotationEditor&&"function"==typeof this.onAnnotationEditor&&this.onAnnotationEditor(C.constructor._type)}has(U){return this._storage.has(U)}getAll(){return this._storage.size>0?(0,r.objectFromMap)(this._storage):null}get size(){return this._storage.size}resetModified(){this._modified&&(this._modified=!1,"function"==typeof this.onResetModified&&this.onResetModified())}get print(){return new G(this)}get serializable(){if(0===this._storage.size)return null;const U=new Map;for(const[C,w]of this._storage){const a=w instanceof m.AnnotationEditor?w.serialize():w;a&&U.set(C,a)}return U}static getHash(U){if(!U)return"";const C=new n.MurmurHash3_64;for(const[w,a]of U)C.update(`${w}:${JSON.stringify(a)}`);return C.hexdigest()}}function F(){this._modified||(this._modified=!0,"function"==typeof this.onSetModified&&this.onSetModified())}s.AnnotationStorage=Q;var T=new WeakMap;class G extends Q{constructor(U){super(),_classPrivateFieldInitSpec(this,T,{writable:!0,value:null}),_classPrivateFieldSet(this,T,structuredClone(U.serializable))}get print(){(0,r.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return _classPrivateFieldGet(this,T)}}s.PrintAnnotationStorage=G},(Z,s,k)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.AnnotationEditor=void 0;var r=k(7),m=k(1),n=new WeakMap,D=new WeakMap,Q=new WeakMap,F=new WeakMap,T=new WeakMap,G=new WeakMap;class q{constructor(C){_classPrivateFieldInitSpec(this,n,{writable:!0,value:this.focusin.bind(this)}),_classPrivateFieldInitSpec(this,D,{writable:!0,value:this.focusout.bind(this)}),_classPrivateFieldInitSpec(this,Q,{writable:!0,value:!1}),_classPrivateFieldInitSpec(this,F,{writable:!0,value:!1}),_classPrivateFieldInitSpec(this,T,{writable:!0,value:!1}),_classPrivateFieldInitSpec(this,G,{writable:!0,value:q._zIndex++}),this.constructor===q&&(0,m.unreachable)("Cannot initialize AnnotationEditor."),this.parent=C.parent,this.id=C.id,this.width=this.height=null,this.pageIndex=C.parent.pageIndex,this.name=C.name,this.div=null;const[w,a]=this.parent.viewportBaseDimensions;this.x=C.x/w,this.y=C.y/a,this.rotation=this.parent.viewport.rotation,this.isAttachedToDOM=!1}static get _defaultLineColor(){return(0,m.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=_classPrivateFieldGet(this,G)}focusin(C){_classPrivateFieldGet(this,Q)?_classPrivateFieldSet(this,Q,!1):this.parent.setSelected(this)}focusout(C){!this.isAttachedToDOM||C.relatedTarget?.closest(`#${this.id}`)||(C.preventDefault(),this.parent.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.parent.addToAnnotationStorage(this)}dragstart(C){const w=this.parent.div.getBoundingClientRect();this.startX=C.clientX-w.x,this.startY=C.clientY-w.y,C.dataTransfer.setData("text/plain",this.id),C.dataTransfer.effectAllowed="move"}setAt(C,w,a,_){const[A,y]=this.parent.viewportBaseDimensions;[a,_]=this.screenToPageTranslation(a,_),this.x=(C+a)/A,this.y=(w+_)/y,this.div.style.left=100*this.x+"%",this.div.style.top=100*this.y+"%"}translate(C,w){const[a,_]=this.parent.viewportBaseDimensions;[C,w]=this.screenToPageTranslation(C,w),this.x+=C/a,this.y+=w/_,this.div.style.left=100*this.x+"%",this.div.style.top=100*this.y+"%"}screenToPageTranslation(C,w){const{rotation:a}=this.parent.viewport;switch(a){case 90:return[w,-C];case 180:return[-C,-w];case 270:return[-w,C];default:return[C,w]}}setDims(C,w){const[a,_]=this.parent.viewportBaseDimensions;this.div.style.width=100*C/a+"%",this.div.style.height=100*w/_+"%"}getInitialTranslation(){return[0,0]}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",_classPrivateFieldGet(this,n)),this.div.addEventListener("focusout",_classPrivateFieldGet(this,D));const[C,w]=this.getInitialTranslation();return this.translate(C,w),(0,r.bindEvents)(this,this.div,["dragstart","pointerdown"]),this.div}pointerdown(C){const w=r.KeyboardManager.platform.isMac;0!==C.button||C.ctrlKey&&w?C.preventDefault():(C.ctrlKey&&!w||C.shiftKey||C.metaKey&&w?this.parent.toggleSelected(this):this.parent.setSelected(this),_classPrivateFieldSet(this,Q,!0))}getRect(C,w){const[a,_]=this.parent.viewportBaseDimensions,[A,y]=this.parent.pageDimensions,P=A*C/a,u=y*w/_,t=this.x*A,e=this.y*y,o=this.width*A,v=this.height*y;switch(this.rotation){case 0:return[t+P,y-e-u-v,t+P+o,y-e-u];case 90:return[t+u,y-e+P,t+u+v,y-e+P+o];case 180:return[t-P-o,y-e+u,t-P,y-e+u+v];case 270:return[t-u-v,y-e-P-o,t-u,y-e-P];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(C,w){const[a,_,A,y]=C,P=A-a,u=y-_;switch(this.rotation){case 0:return[a,w-y,P,u];case 90:return[a,w-_,u,P];case 180:return[A,w-_,P,u];case 270:return[A,w-y,u,P];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){_classPrivateFieldSet(this,T,!0)}disableEditMode(){_classPrivateFieldSet(this,T,!1)}isInEditMode(){return _classPrivateFieldGet(this,T)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){this.div?.addEventListener("focusin",_classPrivateFieldGet(this,n))}serialize(){(0,m.unreachable)("An editor must be serializable")}static deserialize(C,w){const a=new this.prototype.constructor({parent:w,id:w.getNextId()});a.rotation=C.rotation;const[_,A]=w.pageDimensions,[y,P,u,t]=a.getRectInCurrentCoords(C.rect,A);return a.x=y/_,a.y=P/A,a.width=u/_,a.height=t/A,a}remove(){this.div.removeEventListener("focusin",_classPrivateFieldGet(this,n)),this.div.removeEventListener("focusout",_classPrivateFieldGet(this,D)),this.isEmpty()||this.commit(),this.parent.remove(this)}select(){this.div?.classList.add("selectedEditor")}unselect(){this.div?.classList.remove("selectedEditor")}updateParams(C,w){}disableEditing(){}enableEditing(){}get propertiesToUpdate(){return{}}get contentDiv(){return this.div}get isEditing(){return _classPrivateFieldGet(this,F)}set isEditing(C){_classPrivateFieldSet(this,F,C),C?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null)}}_defineProperty(q,"_colorManager",new r.ColorManager),_defineProperty(q,"_zIndex",1),s.AnnotationEditor=q},(Z,s,k)=>{var r;Object.defineProperty(s,"__esModule",{value:!0}),s.KeyboardManager=s.CommandManager=s.ColorManager=s.AnnotationEditorUIManager=void 0,s.bindEvents=function D(_e,ae,ue){for(const we of ue)ae.addEventListener(we,_e[we].bind(_e))},s.opacityToHex=function Q(_e){return Math.round(Math.min(255,Math.max(1,255*_e))).toString(16).padStart(2,"0")};var m=k(1),n=k(8),F=new WeakMap;class T{constructor(){_classPrivateFieldInitSpec(this,F,{writable:!0,value:0})}getId(){var ae,ue;return`${m.AnnotationEditorPrefix}${_classPrivateFieldSet(this,F,(ae=_classPrivateFieldGet(this,F),ue=ae++,ae)),ue}`}}var G=new WeakMap,q=new WeakMap,U=new WeakMap,C=new WeakMap;class w{constructor(ae=128){_classPrivateFieldInitSpec(this,G,{writable:!0,value:[]}),_classPrivateFieldInitSpec(this,q,{writable:!0,value:!1}),_classPrivateFieldInitSpec(this,U,{writable:!0,value:void 0}),_classPrivateFieldInitSpec(this,C,{writable:!0,value:-1}),_classPrivateFieldSet(this,U,ae)}add({cmd:ae,undo:ue,mustExec:we,type:ke=NaN,overwriteIfSameType:Fe=!1,keepUndo:ge=!1}){if(we&&ae(),_classPrivateFieldGet(this,q))return;const Pe={cmd:ae,undo:ue,type:ke};if(-1===_classPrivateFieldGet(this,C))return _classPrivateFieldGet(this,G).length>0&&(_classPrivateFieldGet(this,G).length=0),_classPrivateFieldSet(this,C,0),void _classPrivateFieldGet(this,G).push(Pe);if(Fe&&_classPrivateFieldGet(this,G)[_classPrivateFieldGet(this,C)].type===ke)return ge&&(Pe.undo=_classPrivateFieldGet(this,G)[_classPrivateFieldGet(this,C)].undo),void(_classPrivateFieldGet(this,G)[_classPrivateFieldGet(this,C)]=Pe);const Me=_classPrivateFieldGet(this,C)+1;Me===_classPrivateFieldGet(this,U)?_classPrivateFieldGet(this,G).splice(0,1):(_classPrivateFieldSet(this,C,Me),Me<_classPrivateFieldGet(this,G).length&&_classPrivateFieldGet(this,G).splice(Me)),_classPrivateFieldGet(this,G).push(Pe)}undo(){-1!==_classPrivateFieldGet(this,C)&&(_classPrivateFieldSet(this,q,!0),_classPrivateFieldGet(this,G)[_classPrivateFieldGet(this,C)].undo(),_classPrivateFieldSet(this,q,!1),_classPrivateFieldSet(this,C,_classPrivateFieldGet(this,C)-1))}redo(){_classPrivateFieldGet(this,C)<_classPrivateFieldGet(this,G).length-1&&(_classPrivateFieldSet(this,C,_classPrivateFieldGet(this,C)+1),_classPrivateFieldSet(this,q,!0),_classPrivateFieldGet(this,G)[_classPrivateFieldGet(this,C)].cmd(),_classPrivateFieldSet(this,q,!1))}hasSomethingToUndo(){return-1!==_classPrivateFieldGet(this,C)}hasSomethingToRedo(){return _classPrivateFieldGet(this,C)<_classPrivateFieldGet(this,G).length-1}destroy(){_classPrivateFieldSet(this,G,null)}}s.CommandManager=w;var a=new WeakSet;class _{constructor(ae){_classPrivateMethodInitSpec(this,a),this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const ue=_.platform.isMac;for(const[we,ke]of ae)for(const Fe of we){const ge=Fe.startsWith("mac+");ue&&ge?(this.callbacks.set(Fe.slice(4),ke),this.allKeys.add(Fe.split("+").at(-1))):!ue&&!ge&&(this.callbacks.set(Fe,ke),this.allKeys.add(Fe.split("+").at(-1)))}}static get platform(){const ae=typeof navigator<"u"?navigator.platform:"";return(0,m.shadow)(this,"platform",{isWin:ae.includes("Win"),isMac:ae.includes("Mac")})}exec(ae,ue){if(!this.allKeys.has(ue.key))return;const we=this.callbacks.get(_classPrivateMethodGet(this,a,A).call(this,ue));we&&(we.bind(ae)(),ue.stopPropagation(),ue.preventDefault())}}function A(_e){_e.altKey&&this.buffer.push("alt"),_e.ctrlKey&&this.buffer.push("ctrl"),_e.metaKey&&this.buffer.push("meta"),_e.shiftKey&&this.buffer.push("shift"),this.buffer.push(_e.key);const ae=this.buffer.join("+");return this.buffer.length=0,ae}s.KeyboardManager=_;var y=new WeakMap;class P{constructor(){_classPrivateFieldInitSpec(this,y,{writable:!0,value:null})}copy(ae){ae&&(Array.isArray(ae)?_classPrivateFieldSet(this,y,ae.map(ue=>ue.serialize())):_classPrivateFieldSet(this,y,[ae.serialize()]),_classPrivateFieldSet(this,y,_classPrivateFieldGet(this,y).filter(ue=>!!ue)),0===_classPrivateFieldGet(this,y).length&&_classPrivateFieldSet(this,y,null))}paste(){return _classPrivateFieldGet(this,y)}isEmpty(){return null===_classPrivateFieldGet(this,y)}destroy(){_classPrivateFieldSet(this,y,null)}}class u{get _colors(){const ae=new Map([["CanvasText",null],["Canvas",null]]);return(0,n.getColorValues)(ae),(0,m.shadow)(this,"_colors",ae)}convert(ae){const ue=(0,n.getRGB)(ae);if(!window.matchMedia("(forced-colors: active)").matches)return ue;for(const[we,ke]of this._colors)if(ke.every((Fe,ge)=>Fe===ue[ge]))return u._colorsMapping.get(we);return ue}getHexCode(ae){const ue=this._colors.get(ae);return ue?m.Util.makeHexColor(...ue):ae}}_defineProperty(u,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]])),s.ColorManager=u;var t=new WeakMap,e=new WeakMap,o=new WeakMap,v=new WeakMap,S=new WeakMap,p=new WeakMap,c=new WeakMap,b=new WeakMap,N=new WeakMap,I=new WeakMap,Y=new WeakMap,W=new WeakMap,j=new WeakMap,z=new WeakMap,ee=new WeakMap,oe=new WeakMap,V=new WeakMap,g=new WeakSet,l=new WeakSet,x=new WeakSet,L=new WeakSet,E=new WeakSet,i=new WeakSet,h=new WeakSet,d=new WeakSet,O=new WeakSet;class R{constructor(ae,ue){_classPrivateMethodInitSpec(this,O),_classPrivateMethodInitSpec(this,d),_classPrivateMethodInitSpec(this,h),_classPrivateMethodInitSpec(this,i),_classPrivateMethodInitSpec(this,E),_classPrivateMethodInitSpec(this,L),_classPrivateMethodInitSpec(this,x),_classPrivateMethodInitSpec(this,l),_classPrivateMethodInitSpec(this,g),_classPrivateFieldInitSpec(this,t,{writable:!0,value:null}),_classPrivateFieldInitSpec(this,e,{writable:!0,value:new Map}),_classPrivateFieldInitSpec(this,o,{writable:!0,value:new Map}),_classPrivateFieldInitSpec(this,v,{writable:!0,value:new P}),_classPrivateFieldInitSpec(this,S,{writable:!0,value:new w}),_classPrivateFieldInitSpec(this,p,{writable:!0,value:0}),_classPrivateFieldInitSpec(this,c,{writable:!0,value:null}),_classPrivateFieldInitSpec(this,b,{writable:!0,value:null}),_classPrivateFieldInitSpec(this,N,{writable:!0,value:new T}),_classPrivateFieldInitSpec(this,I,{writable:!0,value:!1}),_classPrivateFieldInitSpec(this,Y,{writable:!0,value:m.AnnotationEditorType.NONE}),_classPrivateFieldInitSpec(this,W,{writable:!0,value:new Set}),_classPrivateFieldInitSpec(this,j,{writable:!0,value:this.keydown.bind(this)}),_classPrivateFieldInitSpec(this,z,{writable:!0,value:this.onEditingAction.bind(this)}),_classPrivateFieldInitSpec(this,ee,{writable:!0,value:this.onPageChanging.bind(this)}),_classPrivateFieldInitSpec(this,oe,{writable:!0,value:{isEditing:!1,isEmpty:!0,hasEmptyClipboard:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1}}),_classPrivateFieldInitSpec(this,V,{writable:!0,value:null}),_classPrivateFieldSet(this,V,ae),_classPrivateFieldSet(this,b,ue),_classPrivateFieldGet(this,b)._on("editingaction",_classPrivateFieldGet(this,z)),_classPrivateFieldGet(this,b)._on("pagechanging",_classPrivateFieldGet(this,ee))}destroy(){_classPrivateMethodGet(this,l,K).call(this),_classPrivateFieldGet(this,b)._off("editingaction",_classPrivateFieldGet(this,z)),_classPrivateFieldGet(this,b)._off("pagechanging",_classPrivateFieldGet(this,ee));for(const ae of _classPrivateFieldGet(this,o).values())ae.destroy();_classPrivateFieldGet(this,o).clear(),_classPrivateFieldGet(this,e).clear(),_classPrivateFieldSet(this,t,null),_classPrivateFieldGet(this,W).clear(),_classPrivateFieldGet(this,v).destroy(),_classPrivateFieldGet(this,S).destroy()}onPageChanging({pageNumber:ae}){_classPrivateFieldSet(this,p,ae-1)}focusMainContainer(){_classPrivateFieldGet(this,V).focus()}keydown(ae){this.getActive()?.shouldGetKeyboardEvents()||R._keyboardManager.exec(this,ae)}onEditingAction(ae){["undo","redo","cut","copy","paste","delete","selectAll"].includes(ae.name)&&this[ae.name]()}setEditingState(ae){ae?(_classPrivateMethodGet(this,g,$).call(this),_classPrivateMethodGet(this,x,ce).call(this,{isEditing:_classPrivateFieldGet(this,Y)!==m.AnnotationEditorType.NONE,isEmpty:_classPrivateMethodGet(this,d,fe).call(this),hasSomethingToUndo:_classPrivateFieldGet(this,S).hasSomethingToUndo(),hasSomethingToRedo:_classPrivateFieldGet(this,S).hasSomethingToRedo(),hasSelectedEditor:!1,hasEmptyClipboard:_classPrivateFieldGet(this,v).isEmpty()})):(_classPrivateMethodGet(this,l,K).call(this),_classPrivateMethodGet(this,x,ce).call(this,{isEditing:!1}))}registerEditorTypes(ae){_classPrivateFieldSet(this,c,ae);for(const ue of _classPrivateFieldGet(this,c))_classPrivateMethodGet(this,L,te).call(this,ue.defaultPropertiesToUpdate)}getId(){return _classPrivateFieldGet(this,N).getId()}addLayer(ae){_classPrivateFieldGet(this,o).set(ae.pageIndex,ae),_classPrivateFieldGet(this,I)?ae.enable():ae.disable()}removeLayer(ae){_classPrivateFieldGet(this,o).delete(ae.pageIndex)}updateMode(ae){if(_classPrivateFieldSet(this,Y,ae),ae===m.AnnotationEditorType.NONE)this.setEditingState(!1),_classPrivateMethodGet(this,i,me).call(this);else{this.setEditingState(!0),_classPrivateMethodGet(this,E,de).call(this);for(const ue of _classPrivateFieldGet(this,o).values())ue.updateMode(ae)}}updateToolbar(ae){ae!==_classPrivateFieldGet(this,Y)&&_classPrivateFieldGet(this,b).dispatch("switchannotationeditormode",{source:this,mode:ae})}updateParams(ae,ue){for(const we of _classPrivateFieldGet(this,W))we.updateParams(ae,ue);for(const we of _classPrivateFieldGet(this,c))we.updateDefaultParams(ae,ue)}getEditors(ae){const ue=[];for(const we of _classPrivateFieldGet(this,e).values())we.pageIndex===ae&&ue.push(we);return ue}getEditor(ae){return _classPrivateFieldGet(this,e).get(ae)}addEditor(ae){_classPrivateFieldGet(this,e).set(ae.id,ae)}removeEditor(ae){_classPrivateFieldGet(this,e).delete(ae.id),this.unselect(ae)}setActiveEditor(ae){_classPrivateFieldGet(this,t)!==ae&&(_classPrivateFieldSet(this,t,ae),ae&&_classPrivateMethodGet(this,L,te).call(this,ae.propertiesToUpdate))}toggleSelected(ae){if(_classPrivateFieldGet(this,W).has(ae))return _classPrivateFieldGet(this,W).delete(ae),ae.unselect(),void _classPrivateMethodGet(this,x,ce).call(this,{hasSelectedEditor:this.hasSelection});_classPrivateFieldGet(this,W).add(ae),ae.select(),_classPrivateMethodGet(this,L,te).call(this,ae.propertiesToUpdate),_classPrivateMethodGet(this,x,ce).call(this,{hasSelectedEditor:!0})}setSelected(ae){for(const ue of _classPrivateFieldGet(this,W))ue!==ae&&ue.unselect();_classPrivateFieldGet(this,W).clear(),_classPrivateFieldGet(this,W).add(ae),ae.select(),_classPrivateMethodGet(this,L,te).call(this,ae.propertiesToUpdate),_classPrivateMethodGet(this,x,ce).call(this,{hasSelectedEditor:!0})}isSelected(ae){return _classPrivateFieldGet(this,W).has(ae)}unselect(ae){ae.unselect(),_classPrivateFieldGet(this,W).delete(ae),_classPrivateMethodGet(this,x,ce).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return 0!==_classPrivateFieldGet(this,W).size}undo(){_classPrivateFieldGet(this,S).undo(),_classPrivateMethodGet(this,x,ce).call(this,{hasSomethingToUndo:_classPrivateFieldGet(this,S).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:_classPrivateMethodGet(this,d,fe).call(this)})}redo(){_classPrivateFieldGet(this,S).redo(),_classPrivateMethodGet(this,x,ce).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:_classPrivateFieldGet(this,S).hasSomethingToRedo(),isEmpty:_classPrivateMethodGet(this,d,fe).call(this)})}addCommands(ae){_classPrivateFieldGet(this,S).add(ae),_classPrivateMethodGet(this,x,ce).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:_classPrivateMethodGet(this,d,fe).call(this)})}delete(){if(_classPrivateFieldGet(this,t)&&_classPrivateFieldGet(this,t).commitOrRemove(),!this.hasSelection)return;const ae=[..._classPrivateFieldGet(this,W)];this.addCommands({cmd:()=>{for(const ke of ae)ke.remove()},undo:()=>{for(const ke of ae)_classPrivateMethodGet(this,h,ie).call(this,ke)},mustExec:!0})}copy(){if(_classPrivateFieldGet(this,t)&&_classPrivateFieldGet(this,t).commitOrRemove(),this.hasSelection){const ae=[];for(const ue of _classPrivateFieldGet(this,W))ue.isEmpty()||ae.push(ue);if(0===ae.length)return;_classPrivateFieldGet(this,v).copy(ae),_classPrivateMethodGet(this,x,ce).call(this,{hasEmptyClipboard:!1})}}cut(){this.copy(),this.delete()}paste(){if(_classPrivateFieldGet(this,v).isEmpty())return;this.unselectAll();const ae=_classPrivateFieldGet(this,o).get(_classPrivateFieldGet(this,p)),ue=_classPrivateFieldGet(this,v).paste().map(Fe=>ae.deserialize(Fe));this.addCommands({cmd:()=>{for(const Fe of ue)_classPrivateMethodGet(this,h,ie).call(this,Fe);_classPrivateMethodGet(this,O,Ae).call(this,ue)},undo:()=>{for(const Fe of ue)Fe.remove()},mustExec:!0})}selectAll(){for(const ae of _classPrivateFieldGet(this,W))ae.commit();_classPrivateMethodGet(this,O,Ae).call(this,_classPrivateFieldGet(this,e).values())}unselectAll(){if(_classPrivateFieldGet(this,t))_classPrivateFieldGet(this,t).commitOrRemove();else if(0!==_classPrivateMethodGet(this,O,Ae).size){for(const ae of _classPrivateFieldGet(this,W))ae.unselect();_classPrivateFieldGet(this,W).clear(),_classPrivateMethodGet(this,x,ce).call(this,{hasSelectedEditor:!1})}}isActive(ae){return _classPrivateFieldGet(this,t)===ae}getActive(){return _classPrivateFieldGet(this,t)}getMode(){return _classPrivateFieldGet(this,Y)}}function $(){_classPrivateFieldGet(this,V).addEventListener("keydown",_classPrivateFieldGet(this,j))}function K(){_classPrivateFieldGet(this,V).removeEventListener("keydown",_classPrivateFieldGet(this,j))}function ce(_e){Object.entries(_e).some(([ue,we])=>_classPrivateFieldGet(this,oe)[ue]!==we)&&_classPrivateFieldGet(this,b).dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(_classPrivateFieldGet(this,oe),_e)})}function te(_e){_classPrivateFieldGet(this,b).dispatch("annotationeditorparamschanged",{source:this,details:_e})}function de(){if(!_classPrivateFieldGet(this,I)){_classPrivateFieldSet(this,I,!0);for(const _e of _classPrivateFieldGet(this,o).values())_e.enable()}}function me(){if(this.unselectAll(),_classPrivateFieldGet(this,I)){_classPrivateFieldSet(this,I,!1);for(const _e of _classPrivateFieldGet(this,o).values())_e.disable()}}function ie(_e){const ae=_classPrivateFieldGet(this,o).get(_e.pageIndex);ae?ae.addOrRebuild(_e):this.addEditor(_e)}function fe(){if(0===_classPrivateFieldGet(this,e).size)return!0;if(1===_classPrivateFieldGet(this,e).size)for(const _e of _classPrivateFieldGet(this,e).values())return _e.isEmpty();return!1}function Ae(_e){_classPrivateFieldGet(this,W).clear();for(const ae of _e)ae.isEmpty()||(_classPrivateFieldGet(this,W).add(ae),ae.select());_classPrivateMethodGet(this,x,ce).call(this,{hasSelectedEditor:!0})}_defineProperty(R,"_keyboardManager",new _([[["ctrl+a","mac+meta+a"],(r=R).prototype.selectAll],[["ctrl+c","mac+meta+c"],r.prototype.copy],[["ctrl+v","mac+meta+v"],r.prototype.paste],[["ctrl+x","mac+meta+x"],r.prototype.cut],[["ctrl+z","mac+meta+z"],r.prototype.undo],[["ctrl+y","ctrl+shift+Z","mac+meta+shift+Z"],r.prototype.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete"],r.prototype.delete],[["Escape","mac+Escape"],r.prototype.unselectAll]])),s.AnnotationEditorUIManager=R},(Z,s,k)=>{var r;Object.defineProperty(s,"__esModule",{value:!0}),s.StatTimer=s.RenderingCancelledException=s.PixelsPerInch=s.PageViewport=s.PDFDateString=s.DOMStandardFontDataFactory=s.DOMSVGFactory=s.DOMCanvasFactory=s.DOMCMapReaderFactory=s.AnnotationPrefix=void 0,s.deprecated=function v(W){console.log("Deprecated API usage: "+W)},s.getColorValues=function N(W){const j=document.createElement("span");j.style.visibility="hidden",document.body.append(j);for(const z of W.keys()){j.style.color=z;const ee=window.getComputedStyle(j).color;W.set(z,b(ee))}j.remove()},s.getCurrentTransform=function I(W){const{a:j,b:z,c:ee,d:oe,e:V,f:g}=W.getTransform();return[j,z,ee,oe,V,g]},s.getCurrentTransformInverse=function Y(W){const{a:j,b:z,c:ee,d:oe,e:V,f:g}=W.getTransform().invertSelf();return[j,z,ee,oe,V,g]},s.getFilenameFromUrl=function P(W){const j=W.indexOf("#"),z=W.indexOf("?"),ee=Math.min(j>0?j:W.length,z>0?z:W.length);return W.substring(W.lastIndexOf("/",ee)+1,ee)},s.getPdfFilenameFromUrl=function u(W,j="document.pdf"){if("string"!=typeof W)return j;if(A(W))return(0,n.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),j;const ee=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,oe=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/.exec(W);let V=ee.exec(oe[1])||ee.exec(oe[2])||ee.exec(oe[3]);if(V&&(V=V[0],V.includes("%")))try{V=ee.exec(decodeURIComponent(V))[0]}catch{}return V||j},s.getRGB=b,s.getXfaPageViewport=function c(W,{scale:j=1,rotation:z=0}){const{width:ee,height:oe}=W.attributes.style,V=[0,0,parseInt(ee),parseInt(oe)];return new a({viewBox:V,scale:j,rotation:z})},s.isDataScheme=A,s.isPdfFile=function y(W){return"string"==typeof W&&/\.pdf$/i.test(W)},s.isValidFetchUrl=e,s.loadScript=function o(W,j=!1){return new Promise((z,ee)=>{const oe=document.createElement("script");oe.src=W,oe.onload=function(V){j&&oe.remove(),z(V)},oe.onerror=function(){ee(new Error(`Cannot load script at: ${oe.src}`))},(document.head||document.documentElement).append(oe)})};var m=k(9),n=k(1);s.AnnotationPrefix="pdfjs_internal_id_";class F{}function G(W){return q.apply(this,arguments)}function q(){return(q=_asyncToGenerator(function*(W,j=!1){if(e(W,document.baseURI)){const z=yield fetch(W);if(!z.ok)throw new Error(z.statusText);return j?new Uint8Array(yield z.arrayBuffer()):(0,n.stringToBytes)(yield z.text())}return new Promise((z,ee)=>{const oe=new XMLHttpRequest;oe.open("GET",W,!0),j&&(oe.responseType="arraybuffer"),oe.onreadystatechange=()=>{if(oe.readyState===XMLHttpRequest.DONE){if(200===oe.status||0===oe.status){let V;if(j&&oe.response?V=new Uint8Array(oe.response):!j&&oe.responseText&&(V=(0,n.stringToBytes)(oe.responseText)),V)return void z(V)}ee(new Error(oe.statusText))}},oe.send(null)})})).apply(this,arguments)}r=F,_defineProperty(F,"CSS",96),_defineProperty(F,"PDF",72),_defineProperty(F,"PDF_TO_CSS_UNITS",r.CSS/r.PDF),s.PixelsPerInch=F,s.DOMCanvasFactory=class T extends m.BaseCanvasFactory{constructor({ownerDocument:j=globalThis.document}={}){super(),this._document=j}_createCanvas(j,z){const ee=this._document.createElement("canvas");return ee.width=j,ee.height=z,ee}},s.DOMCMapReaderFactory=class U extends m.BaseCMapReaderFactory{_fetchData(j,z){return G(j,this.isCompressed).then(ee=>({cMapData:ee,compressionType:z}))}},s.DOMStandardFontDataFactory=class C extends m.BaseStandardFontDataFactory{_fetchData(j){return G(j,!0)}},s.DOMSVGFactory=class w extends m.BaseSVGFactory{_createSVG(j){return document.createElementNS("http://www.w3.org/2000/svg",j)}};class a{constructor({viewBox:j,scale:z,rotation:ee,offsetX:oe=0,offsetY:V=0,dontFlip:g=!1}){this.viewBox=j,this.scale=z,this.rotation=ee,this.offsetX=oe,this.offsetY=V;const l=(j[2]+j[0])/2,x=(j[3]+j[1])/2;let L,E,i,h,d,O,R,$;switch((ee%=360)<0&&(ee+=360),ee){case 180:L=-1,E=0,i=0,h=1;break;case 90:L=0,E=1,i=1,h=0;break;case 270:L=0,E=-1,i=-1,h=0;break;case 0:L=1,E=0,i=0,h=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}g&&(i=-i,h=-h),0===L?(d=Math.abs(x-j[1])*z+oe,O=Math.abs(l-j[0])*z+V,R=Math.abs(j[3]-j[1])*z,$=Math.abs(j[2]-j[0])*z):(d=Math.abs(l-j[0])*z+oe,O=Math.abs(x-j[1])*z+V,R=Math.abs(j[2]-j[0])*z,$=Math.abs(j[3]-j[1])*z),this.transform=[L*z,E*z,i*z,h*z,d-L*z*l-i*z*x,O-E*z*l-h*z*x],this.width=R,this.height=$}clone({scale:j=this.scale,rotation:z=this.rotation,offsetX:ee=this.offsetX,offsetY:oe=this.offsetY,dontFlip:V=!1}={}){return new a({viewBox:this.viewBox.slice(),scale:j,rotation:z,offsetX:ee,offsetY:oe,dontFlip:V})}convertToViewportPoint(j,z){return n.Util.applyTransform([j,z],this.transform)}convertToViewportRectangle(j){const z=n.Util.applyTransform([j[0],j[1]],this.transform),ee=n.Util.applyTransform([j[2],j[3]],this.transform);return[z[0],z[1],ee[0],ee[1]]}convertToPdfPoint(j,z){return n.Util.applyInverseTransform([j,z],this.transform)}}function A(W){const j=W.length;let z=0;for(;z<j&&""===W[z].trim();)z++;return"data:"===W.substring(z,z+5).toLowerCase()}function e(W,j){try{const{protocol:z}=j?new URL(W,j):new URL(W);return"http:"===z||"https:"===z}catch{return!1}}let S;function b(W){if(W.startsWith("#")){const j=parseInt(W.slice(1),16);return[(16711680&j)>>16,(65280&j)>>8,255&j]}return W.startsWith("rgb(")?W.slice(4,-1).split(",").map(j=>parseInt(j)):W.startsWith("rgba(")?W.slice(5,-1).split(",").map(j=>parseInt(j)).slice(0,3):((0,n.warn)(`Not a valid color format: "${W}"`),[0,0,0])}s.PageViewport=a,s.RenderingCancelledException=class _ extends n.BaseException{constructor(j,z){super(j,"RenderingCancelledException"),this.type=z}},s.StatTimer=class t{constructor(){this.started=Object.create(null),this.times=[]}time(j){j in this.started&&(0,n.warn)(`Timer is already running for ${j}`),this.started[j]=Date.now()}timeEnd(j){j in this.started||(0,n.warn)(`Timer has not been started for ${j}`),this.times.push({name:j,start:this.started[j],end:Date.now()}),delete this.started[j]}toString(){const j=[];let z=0;for(const ee of this.times){const oe=ee.name;oe.length>z&&(z=oe.length)}for(const ee of this.times){const oe=ee.end-ee.start;j.push(`${ee.name.padEnd(z)} ${oe}ms\n`)}return j.join("")}},s.PDFDateString=class p{static toDateObject(j){if(!j||"string"!=typeof j)return null;S||(S=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const z=S.exec(j);if(!z)return null;const ee=parseInt(z[1],10);let oe=parseInt(z[2],10);oe=oe>=1&&oe<=12?oe-1:0;let V=parseInt(z[3],10);V=V>=1&&V<=31?V:1;let g=parseInt(z[4],10);g=g>=0&&g<=23?g:0;let l=parseInt(z[5],10);l=l>=0&&l<=59?l:0;let x=parseInt(z[6],10);x=x>=0&&x<=59?x:0;const L=z[7]||"Z";let E=parseInt(z[8],10);E=E>=0&&E<=23?E:0;let i=parseInt(z[9],10)||0;return i=i>=0&&i<=59?i:0,"-"===L?(g+=E,l+=i):"+"===L&&(g-=E,l-=i),new Date(Date.UTC(ee,oe,V,g,l,x))}}},(Z,s,k)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BaseStandardFontDataFactory=s.BaseSVGFactory=s.BaseCanvasFactory=s.BaseCMapReaderFactory=void 0;var r=k(1);class m{constructor(){this.constructor===m&&(0,r.unreachable)("Cannot initialize BaseCanvasFactory.")}create(T,G){if(T<=0||G<=0)throw new Error("Invalid canvas size");const q=this._createCanvas(T,G);return{canvas:q,context:q.getContext("2d")}}reset(T,G,q){if(!T.canvas)throw new Error("Canvas is not specified");if(G<=0||q<=0)throw new Error("Invalid canvas size");T.canvas.width=G,T.canvas.height=q}destroy(T){if(!T.canvas)throw new Error("Canvas is not specified");T.canvas.width=0,T.canvas.height=0,T.canvas=null,T.context=null}_createCanvas(T,G){(0,r.unreachable)("Abstract method `_createCanvas` called.")}}s.BaseCanvasFactory=m;class n{constructor({baseUrl:T=null,isCompressed:G=!1}){this.constructor===n&&(0,r.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=T,this.isCompressed=G}fetch({name:T}){var G=this;return _asyncToGenerator(function*(){if(!G.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!T)throw new Error("CMap name must be specified.");const q=G.baseUrl+T+(G.isCompressed?".bcmap":"");return G._fetchData(q,G.isCompressed?r.CMapCompressionType.BINARY:r.CMapCompressionType.NONE).catch(C=>{throw new Error(`Unable to load ${G.isCompressed?"binary ":""}CMap at: ${q}`)})})()}_fetchData(T,G){(0,r.unreachable)("Abstract method `_fetchData` called.")}}s.BaseCMapReaderFactory=n;class D{constructor({baseUrl:T=null}){this.constructor===D&&(0,r.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=T}fetch({filename:T}){var G=this;return _asyncToGenerator(function*(){if(!G.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!T)throw new Error("Font filename must be specified.");const q=`${G.baseUrl}${T}`;return G._fetchData(q).catch(U=>{throw new Error(`Unable to load font data at: ${q}`)})})()}_fetchData(T){(0,r.unreachable)("Abstract method `_fetchData` called.")}}s.BaseStandardFontDataFactory=D;class Q{constructor(){this.constructor===Q&&(0,r.unreachable)("Cannot initialize BaseSVGFactory.")}create(T,G,q=!1){if(T<=0||G<=0)throw new Error("Invalid SVG dimensions");const U=this._createSVG("svg:svg");return U.setAttribute("version","1.1"),q||(U.setAttribute("width",`${T}px`),U.setAttribute("height",`${G}px`)),U.setAttribute("preserveAspectRatio","none"),U.setAttribute("viewBox",`0 0 ${T} ${G}`),U}createElement(T){if("string"!=typeof T)throw new Error("Invalid SVG element type");return this._createSVG(T)}_createSVG(T){(0,r.unreachable)("Abstract method `_createSVG` called.")}}s.BaseSVGFactory=Q},(Z,s,k)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.MurmurHash3_64=void 0;var r=k(1);const m=3285377520,n=4294901760,D=65535;s.MurmurHash3_64=class Q{constructor(T){this.h1=T?4294967295&T:m,this.h2=T?4294967295&T:m}update(T){let G,q;if("string"==typeof T){G=new Uint8Array(2*T.length),q=0;for(let o=0,v=T.length;o<v;o++){const S=T.charCodeAt(o);S<=255?G[q++]=S:(G[q++]=S>>>8,G[q++]=255&S)}}else{if(!(0,r.isArrayBuffer)(T))throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");G=T.slice(),q=G.byteLength}const U=q>>2,C=q-4*U,w=new Uint32Array(G.buffer,0,U);let a=0,_=0,A=this.h1,y=this.h2;const P=3432918353,u=461845907,t=P&D,e=u&D;for(let o=0;o<U;o++)1&o?(a=w[o],a=a*P&n|a*t&D,a=a<<15|a>>>17,a=a*u&n|a*e&D,A^=a,A=A<<13|A>>>19,A=5*A+3864292196):(_=w[o],_=_*P&n|_*t&D,_=_<<15|_>>>17,_=_*u&n|_*e&D,y^=_,y=y<<13|y>>>19,y=5*y+3864292196);switch(a=0,C){case 3:a^=G[4*U+2]<<16;case 2:a^=G[4*U+1]<<8;case 1:a^=G[4*U],a=a*P&n|a*t&D,a=a<<15|a>>>17,a=a*u&n|a*e&D,1&U?A^=a:y^=a}this.h1=A,this.h2=y}hexdigest(){let T=this.h1,G=this.h2;T^=G>>>1,T=3981806797*T&n|36045*T&D,G=4283543511*G&n|(2950163797*(G<<16|T>>>16)&n)>>>16,T^=G>>>1,T=444984403*T&n|60499*T&D,G=3301882366*G&n|(3120437893*(G<<16|T>>>16)&n)>>>16,T^=G>>>1;const q=(T>>>0).toString(16),U=(G>>>0).toString(16);return q.padStart(8,"0")+U.padStart(8,"0")}}},(Z,s,k)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.FontLoader=s.FontFaceObject=void 0;var r=k(1);class m{constructor({docId:F,onUnsupportedFeature:T,ownerDocument:G=globalThis.document,styleElement:q=null}){this.constructor===m&&(0,r.unreachable)("Cannot initialize BaseFontLoader."),this.docId=F,this._onUnsupportedFeature=T,this._document=G,this.nativeFontFaces=[],this.styleElement=null}addNativeFontFace(F){this.nativeFontFaces.push(F),this._document.fonts.add(F)}insertRule(F){let T=this.styleElement;T||(T=this.styleElement=this._document.createElement("style"),T.id=`PDFJS_FONT_STYLE_TAG_${this.docId}`,this._document.documentElement.getElementsByTagName("head")[0].append(T));const G=T.sheet;G.insertRule(F,G.cssRules.length)}clear(){for(const F of this.nativeFontFaces)this._document.fonts.delete(F);this.nativeFontFaces.length=0,this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}bind(F){var T=this;return _asyncToGenerator(function*(){if(F.attached||F.missingFile)return;if(F.attached=!0,T.isFontLoadingAPISupported){const q=F.createNativeFontFace();if(q){T.addNativeFontFace(q);try{yield q.loaded}catch(U){throw T._onUnsupportedFeature({featureId:r.UNSUPPORTED_FEATURES.errorFontLoadNative}),(0,r.warn)(`Failed to load font '${q.family}': '${U}'.`),F.disableFontFace=!0,U}}return}const G=F.createFontFaceRule();if(G){if(T.insertRule(G),T.isSyncFontLoadingSupported)return;yield new Promise(q=>{const U=T._queueLoadingCallback(q);T._prepareFontLoadEvent([G],[F],U)})}})()}_queueLoadingCallback(F){(0,r.unreachable)("Abstract method `_queueLoadingCallback`.")}get isFontLoadingAPISupported(){return(0,r.shadow)(this,"isFontLoadingAPISupported",!!this._document?.fonts)}get isSyncFontLoadingSupported(){(0,r.unreachable)("Abstract method `isSyncFontLoadingSupported`.")}get _loadTestFont(){(0,r.unreachable)("Abstract method `_loadTestFont`.")}_prepareFontLoadEvent(F,T,G){(0,r.unreachable)("Abstract method `_prepareFontLoadEvent`.")}}let n;s.FontLoader=n,s.FontLoader=n=class extends m{constructor(F){super(F),this.loadingContext={requests:[],nextRequestId:0},this.loadTestFontId=0}get isSyncFontLoadingSupported(){let F=!1;return(typeof navigator>"u"||/Mozilla\/5.0.*?rv:(\d+).*? Gecko/.exec(navigator.userAgent)?.[1]>=14)&&(F=!0),(0,r.shadow)(this,"isSyncFontLoadingSupported",F)}_queueLoadingCallback(F){const G=this.loadingContext,q={id:"pdfjs-font-loading-"+G.nextRequestId++,done:!1,complete:function T(){for((0,r.assert)(!q.done,"completeRequest() cannot be called twice."),q.done=!0;G.requests.length>0&&G.requests[0].done;){const U=G.requests.shift();setTimeout(U.callback,0)}},callback:F};return G.requests.push(q),q}get _loadTestFont(){return(0,r.shadow)(this,"_loadTestFont",atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA=="))}_prepareFontLoadEvent(F,T,G){function q(N,I){return N.charCodeAt(I)<<24|N.charCodeAt(I+1)<<16|N.charCodeAt(I+2)<<8|255&N.charCodeAt(I+3)}function U(N,I,Y,W){return N.substring(0,I)+W+N.substring(I+Y)}let C,w;const a=this._document.createElement("canvas");a.width=1,a.height=1;const _=a.getContext("2d");let A=0;const P=`lt${Date.now()}${this.loadTestFontId++}`;let u=this._loadTestFont;u=U(u,976,P.length,P);const o=1482184792;let v=q(u,16);for(C=0,w=P.length-3;C<w;C+=4)v=v-o+q(P,C)|0;C<P.length&&(v=v-o+q(P+"XXX",C)|0),u=U(u,16,4,(0,r.string32)(v));const S=`url(data:font/opentype;base64,${btoa(u)});`;this.insertRule(`@font-face {font-family:"${P}";src:${S}}`);const c=[];for(const N of T)c.push(N.loadedName);c.push(P);const b=this._document.createElement("div");b.style.visibility="hidden",b.style.width=b.style.height="10px",b.style.position="absolute",b.style.top=b.style.left="0px";for(const N of c){const I=this._document.createElement("span");I.textContent="Hi",I.style.fontFamily=N,b.append(I)}this._document.body.append(b),function y(N,I){if(A++,A>30)return(0,r.warn)("Load test font never loaded."),void I();_.font="30px "+N,_.fillText(".",0,20),_.getImageData(0,0,1,1).data[3]>0?I():setTimeout(y.bind(null,N,I))}(P,()=>{b.remove(),G.complete()})}},s.FontFaceObject=class D{constructor(F,{isEvalSupported:T=!0,disableFontFace:G=!1,ignoreErrors:q=!1,onUnsupportedFeature:U,fontRegistry:C=null}){this.compiledGlyphs=Object.create(null);for(const w in F)this[w]=F[w];this.isEvalSupported=!1!==T,this.disableFontFace=!0===G,this.ignoreErrors=!0===q,this._onUnsupportedFeature=U,this.fontRegistry=C}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let F;if(this.cssFontInfo){const T={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(T.style=`oblique ${this.cssFontInfo.italicAngle}deg`),F=new FontFace(this.cssFontInfo.fontFamily,this.data,T)}else F=new FontFace(this.loadedName,this.data,{});return this.fontRegistry&&this.fontRegistry.registerFont(this),F}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const F=(0,r.bytesToString)(this.data),T=`url(data:${this.mimetype};base64,${btoa(F)});`;let G;if(this.cssFontInfo){let q=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(q+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),G=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${q}src:${T}}`}else G=`@font-face {font-family:"${this.loadedName}";src:${T}}`;return this.fontRegistry&&this.fontRegistry.registerFont(this,T),G}getPathGenerator(F,T){if(void 0!==this.compiledGlyphs[T])return this.compiledGlyphs[T];let G;try{G=F.get(this.loadedName+"_path_"+T)}catch(q){if(!this.ignoreErrors)throw q;return this._onUnsupportedFeature({featureId:r.UNSUPPORTED_FEATURES.errorFontGetPath}),(0,r.warn)(`getPathGenerator - ignoring character: "${q}".`),this.compiledGlyphs[T]=function(U,C){}}if(this.isEvalSupported&&r.FeatureTest.isEvalSupported){const q=[];for(const U of G){const C=void 0!==U.args?U.args.join(","):"";q.push("c.",U.cmd,"(",C,");\n")}return this.compiledGlyphs[T]=new Function("c","size",q.join(""))}return this.compiledGlyphs[T]=function(q,U){for(const C of G)"scale"===C.cmd&&(C.args=[U,-U]),q[C.cmd].apply(q,C.args)}}}},(Z,s,k)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CanvasGraphics=void 0;var r=k(8),m=k(1),n=k(13),D=k(14),Q=k(3);const G=4096,C=Q.isNodeJS&&typeof Path2D>"u"?-1:1e3,w=16;class _{constructor(g){this.canvasFactory=g,this.cache=Object.create(null)}getCanvas(g,l,x){let L;return void 0!==this.cache[g]?(L=this.cache[g],this.canvasFactory.reset(L,l,x)):(L=this.canvasFactory.create(l,x),this.cache[g]=L),L}delete(g){delete this.cache[g]}clear(){for(const g in this.cache)this.canvasFactory.destroy(this.cache[g]),delete this.cache[g]}}function A(V,g,l,x,L,E,i,h,d,O){const[R,$,K,ce,te,de]=(0,r.getCurrentTransform)(V);if(0===$&&0===K){const Ae=Math.round(i*R+te),ae=Math.round(h*ce+de),we=Math.abs(Math.round((i+d)*R+te)-Ae)||1,Fe=Math.abs(Math.round((h+O)*ce+de)-ae)||1;return V.setTransform(Math.sign(R),0,0,Math.sign(ce),Ae,ae),V.drawImage(g,l,x,L,E,0,0,we,Fe),V.setTransform(R,$,K,ce,te,de),[we,Fe]}if(0===R&&0===ce){const Ae=Math.round(h*K+te),ae=Math.round(i*$+de),we=Math.abs(Math.round((h+O)*K+te)-Ae)||1,Fe=Math.abs(Math.round((i+d)*$+de)-ae)||1;return V.setTransform(0,Math.sign($),Math.sign(K),0,Ae,ae),V.drawImage(g,l,x,L,E,0,0,Fe,we),V.setTransform(R,$,K,ce,te,de),[Fe,we]}return V.drawImage(g,l,x,L,E,i,h,d,O),[Math.hypot(R,$)*d,Math.hypot(K,ce)*O]}class P{constructor(g,l){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=m.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=m.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=m.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps=null,this.startNewPathAndClipBox([0,0,g,l])}clone(){const g=Object.create(this);return g.clipBox=this.clipBox.slice(),g}setCurrentPoint(g,l){this.x=g,this.y=l}updatePathMinMax(g,l,x){[l,x]=m.Util.applyTransform([l,x],g),this.minX=Math.min(this.minX,l),this.minY=Math.min(this.minY,x),this.maxX=Math.max(this.maxX,l),this.maxY=Math.max(this.maxY,x)}updateRectMinMax(g,l){const x=m.Util.applyTransform(l,g),L=m.Util.applyTransform(l.slice(2),g);this.minX=Math.min(this.minX,x[0],L[0]),this.minY=Math.min(this.minY,x[1],L[1]),this.maxX=Math.max(this.maxX,x[0],L[0]),this.maxY=Math.max(this.maxY,x[1],L[1])}updateScalingPathMinMax(g,l){m.Util.scaleMinMax(g,l),this.minX=Math.min(this.minX,l[0]),this.maxX=Math.max(this.maxX,l[1]),this.minY=Math.min(this.minY,l[2]),this.maxY=Math.max(this.maxY,l[3])}updateCurvePathMinMax(g,l,x,L,E,i,h,d,O,R){const $=m.Util.bezierBoundingBox(l,x,L,E,i,h,d,O);if(R)return R[0]=Math.min(R[0],$[0],$[2]),R[1]=Math.max(R[1],$[0],$[2]),R[2]=Math.min(R[2],$[1],$[3]),void(R[3]=Math.max(R[3],$[1],$[3]));this.updateRectMinMax(g,$)}getPathBoundingBox(g=n.PathType.FILL,l=null){const x=[this.minX,this.minY,this.maxX,this.maxY];if(g===n.PathType.STROKE){l||(0,m.unreachable)("Stroke bounding box must include transform.");const L=m.Util.singularValueDecompose2dScale(l),E=L[0]*this.lineWidth/2,i=L[1]*this.lineWidth/2;x[0]-=E,x[1]-=i,x[2]+=E,x[3]+=i}return x}updateClipFromPath(){const g=m.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(g||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(g){this.clipBox=g,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(g=n.PathType.FILL,l=null){return m.Util.intersect(this.clipBox,this.getPathBoundingBox(g,l))}}function u(V,g,l=null){if(typeof ImageData<"u"&&g instanceof ImageData)return void V.putImageData(g,0,0);const x=g.height,L=g.width,E=x%w,i=(x-E)/w,h=0===E?i:i+1,d=V.createImageData(L,w);let R,O=0;const $=g.data,K=d.data;let ce,te,de,me,ie,fe,Ae,_e;if(l)switch(l.length){case 1:ie=l[0],fe=l[0],Ae=l[0],_e=l[0];break;case 4:ie=l[0],fe=l[1],Ae=l[2],_e=l[3]}if(g.kind===m.ImageKind.GRAYSCALE_1BPP){const ae=$.byteLength,ue=new Uint32Array(K.buffer,0,K.byteLength>>2),we=ue.length,ke=L+7>>3;let Fe=4294967295,ge=m.FeatureTest.isLittleEndian?4278190080:255;for(_e&&255===_e[0]&&0===_e[255]&&([Fe,ge]=[ge,Fe]),ce=0;ce<h;ce++){for(de=ce<i?w:E,R=0,te=0;te<de;te++){const Pe=ae-O;let Me=0;const xe=Pe>ke?L:8*Pe-7,Se=-8&xe;let B=0,ne=0;for(;Me<Se;Me+=8)ne=$[O++],ue[R++]=128&ne?Fe:ge,ue[R++]=64&ne?Fe:ge,ue[R++]=32&ne?Fe:ge,ue[R++]=16&ne?Fe:ge,ue[R++]=8&ne?Fe:ge,ue[R++]=4&ne?Fe:ge,ue[R++]=2&ne?Fe:ge,ue[R++]=1&ne?Fe:ge;for(;Me<xe;Me++)0===B&&(ne=$[O++],B=128),ue[R++]=ne&B?Fe:ge,B>>=1}for(;R<we;)ue[R++]=0;V.putImageData(d,0,ce*w)}}else if(g.kind===m.ImageKind.RGBA_32BPP){const ae=!!(ie||fe||Ae);for(te=0,me=L*w*4,ce=0;ce<i;ce++){if(K.set($.subarray(O,O+me)),O+=me,ae)for(let ue=0;ue<me;ue+=4)ie&&(K[ue+0]=ie[K[ue+0]]),fe&&(K[ue+1]=fe[K[ue+1]]),Ae&&(K[ue+2]=Ae[K[ue+2]]);V.putImageData(d,0,te),te+=w}if(ce<h){if(me=L*E*4,K.set($.subarray(O,O+me)),ae)for(let ue=0;ue<me;ue+=4)ie&&(K[ue+0]=ie[K[ue+0]]),fe&&(K[ue+1]=fe[K[ue+1]]),Ae&&(K[ue+2]=Ae[K[ue+2]]);V.putImageData(d,0,te)}}else{if(g.kind!==m.ImageKind.RGB_24BPP)throw new Error(`bad image kind: ${g.kind}`);{const ae=!!(ie||fe||Ae);for(de=w,me=L*de,ce=0;ce<h;ce++){for(ce>=i&&(de=E,me=L*de),R=0,te=me;te--;)K[R++]=$[O++],K[R++]=$[O++],K[R++]=$[O++],K[R++]=255;if(ae)for(let ue=0;ue<R;ue+=4)ie&&(K[ue+0]=ie[K[ue+0]]),fe&&(K[ue+1]=fe[K[ue+1]]),Ae&&(K[ue+2]=Ae[K[ue+2]]);V.putImageData(d,0,ce*w)}}}}function t(V,g){if(g.bitmap)return void V.drawImage(g.bitmap,0,0);const l=g.height,x=g.width,L=l%w,E=(l-L)/w,i=0===L?E:E+1,h=V.createImageData(x,w);let d=0;const O=g.data,R=h.data;for(let $=0;$<i;$++){const K=$<E?w:L;({srcPos:d}=(0,D.applyMaskImageData)({src:O,srcPos:d,dest:R,width:x,height:K})),V.putImageData(h,0,$*w)}}function e(V,g){const l=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font"];for(let x=0,L=l.length;x<L;x++){const E=l[x];void 0!==V[E]&&(g[E]=V[E])}void 0!==V.setLineDash&&(g.setLineDash(V.getLineDash()),g.lineDashOffset=V.lineDashOffset)}function o(V,g){V.strokeStyle=V.fillStyle=g||"#000000",V.fillRule="nonzero",V.globalAlpha=1,V.lineWidth=1,V.lineCap="butt",V.lineJoin="miter",V.miterLimit=10,V.globalCompositeOperation="source-over",V.font="10px sans-serif",void 0!==V.setLineDash&&(V.setLineDash([]),V.lineDashOffset=0)}function v(V,g,l,x){const L=V.length;for(let E=3;E<L;E+=4){const i=V[E];if(0===i)V[E-3]=g,V[E-2]=l,V[E-1]=x;else if(i<255){const h=255-i;V[E-3]=V[E-3]*i+g*h>>8,V[E-2]=V[E-2]*i+l*h>>8,V[E-1]=V[E-1]*i+x*h>>8}}}function S(V,g,l){const x=V.length;for(let E=3;E<x;E+=4)g[E]=g[E]*(l?l[V[E]]:V[E])*.00392156862745098|0}function p(V,g,l){const x=V.length;for(let L=3;L<x;L+=4){const E=77*V[L-3]+152*V[L-2]+28*V[L-1];g[L]=l?g[L]*l[E>>8]>>8:g[L]*E>>16}}function N(V,g){const l=m.Util.singularValueDecompose2dScale(V);l[0]=Math.fround(l[0]),l[1]=Math.fround(l[1]);const x=Math.fround((globalThis.devicePixelRatio||1)*r.PixelsPerInch.PDF_TO_CSS_UNITS);return void 0!==g?g:l[0]<=x||l[1]<=x}const I=["butt","round","square"],Y=["miter","round","bevel"],W={},j={};var z=new WeakSet;class ee{constructor(g,l,x,L,E,i,h,d){_classPrivateMethodInitSpec(this,z),this.ctx=g,this.current=new P(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=l,this.objs=x,this.canvasFactory=L,this.imageLayer=E,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=[],this.optionalContentConfig=i,this.cachedCanvases=new _(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=h,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.backgroundColor=d?.background||null,this.foregroundColor=d?.foreground||null,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(g,l=null){return"string"==typeof g?g.startsWith("g_")?this.commonObjs.get(g):this.objs.get(g):l}beginDrawing({transform:g,viewport:l,transparency:x=!1,background:L=null}){const E=this.ctx.canvas.width,i=this.ctx.canvas.height,h=L||"#ffffff";if(this.ctx.save(),this.foregroundColor&&this.backgroundColor){this.ctx.fillStyle=this.foregroundColor;const d=this.foregroundColor=this.ctx.fillStyle;this.ctx.fillStyle=this.backgroundColor;const O=this.backgroundColor=this.ctx.fillStyle;let R=!0,$=h;if(this.ctx.fillStyle=h,$=this.ctx.fillStyle,R="string"==typeof $&&/^#[0-9A-Fa-f]{6}$/.test($),"#000000"===d&&"#ffffff"===O||d===O||!R)this.foregroundColor=this.backgroundColor=null;else{const[K,ce,te]=(0,r.getRGB)($),de=ie=>(ie/=255)<=.03928?ie/12.92:((ie+.055)/1.055)**2.4,me=Math.round(.2126*de(K)+.7152*de(ce)+.0722*de(te));this.selectColor=(ie,fe,Ae)=>{const _e=.2126*de(ie)+.7152*de(fe)+.0722*de(Ae);return Math.round(_e)===me?O:d}}}if(this.ctx.fillStyle=this.backgroundColor||h,this.ctx.fillRect(0,0,E,i),this.ctx.restore(),x){const d=this.cachedCanvases.getCanvas("transparent",E,i);this.compositeCtx=this.ctx,this.transparentCanvas=d.canvas,this.ctx=d.context,this.ctx.save(),this.ctx.transform(...(0,r.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),o(this.ctx,this.foregroundColor),g&&(this.ctx.transform(...g),this.outputScaleX=g[0],this.outputScaleY=g[0]),this.ctx.transform(...l.transform),this.viewportScale=l.scale,this.baseTransform=(0,r.getCurrentTransform)(this.ctx),this.imageLayer&&((0,r.deprecated)("The `imageLayer` functionality will be removed in the future."),this.imageLayer.beginLayout())}executeOperatorList(g,l,x,L){const E=g.argsArray,i=g.fnArray;let h=l||0;const d=E.length;if(d===h)return h;const O=d-h>10&&"function"==typeof x,R=O?Date.now()+15:0;let $=0;const K=this.commonObjs,ce=this.objs;let te;for(;;){if(void 0!==L&&h===L.nextBreakPoint)return L.breakIt(h,x),h;if(te=i[h],te!==m.OPS.dependency)this[te].apply(this,E[h]);else for(const de of E[h]){const me=de.startsWith("g_")?K:ce;if(!me.has(de))return me.get(de,x),h}if(h++,h===d)return h;if(O&&++$>10){if(Date.now()>R)return x(),h;$=0}}}endDrawing(){_classPrivateMethodGet(this,z,oe).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const g of this._cachedBitmapsMap.values()){for(const l of g.values())typeof HTMLCanvasElement<"u"&&l instanceof HTMLCanvasElement&&(l.width=l.height=0);g.clear()}this._cachedBitmapsMap.clear(),this.imageLayer&&this.imageLayer.endLayout()}_scaleImage(g,l){const x=g.width,L=g.height;let R,$,E=Math.max(Math.hypot(l[0],l[1]),1),i=Math.max(Math.hypot(l[2],l[3]),1),h=x,d=L,O="prescale1";for(;E>2&&h>1||i>2&&d>1;){let K=h,ce=d;E>2&&h>1&&(K=Math.ceil(h/2),E/=h/K),i>2&&d>1&&(ce=Math.ceil(d/2),i/=d/ce),R=this.cachedCanvases.getCanvas(O,K,ce),$=R.context,$.clearRect(0,0,K,ce),$.drawImage(g,0,0,h,d,0,0,K,ce),g=R.canvas,h=K,d=ce,O="prescale1"===O?"prescale2":"prescale1"}return{img:g,paintWidth:h,paintHeight:d}}_createMaskCanvas(g){const l=this.ctx,{width:x,height:L}=g,E=this.current.fillColor,i=this.current.patternFill,h=(0,r.getCurrentTransform)(l);let d,O,R,$;if((g.bitmap||g.data)&&g.count>1){const we=g.bitmap||g.data.buffer,ke=h.slice(0,4);O=JSON.stringify(i?ke:[ke,E]),d=this._cachedBitmapsMap.get(we),d||(d=new Map,this._cachedBitmapsMap.set(we,d));const Fe=d.get(O);if(Fe&&!i)return{canvas:Fe,offsetX:Math.round(Math.min(h[0],h[2])+h[4]),offsetY:Math.round(Math.min(h[1],h[3])+h[5])};R=Fe}R||($=this.cachedCanvases.getCanvas("maskCanvas",x,L),t($.context,g));let K=m.Util.transform(h,[1/x,0,0,-1/L,0,0]);K=m.Util.transform(K,[1,0,0,1,0,-L]);const ce=m.Util.applyTransform([0,0],K),te=m.Util.applyTransform([x,L],K),de=m.Util.normalizeRect([ce[0],ce[1],te[0],te[1]]),me=Math.round(de[2]-de[0])||1,ie=Math.round(de[3]-de[1])||1,fe=this.cachedCanvases.getCanvas("fillCanvas",me,ie),Ae=fe.context,_e=Math.min(ce[0],te[0]),ae=Math.min(ce[1],te[1]);Ae.translate(-_e,-ae),Ae.transform(...K),R||(R=this._scaleImage($.canvas,(0,r.getCurrentTransformInverse)(Ae)),R=R.img,d&&i&&d.set(O,R)),Ae.imageSmoothingEnabled=N((0,r.getCurrentTransform)(Ae),g.interpolate),A(Ae,R,0,0,R.width,R.height,0,0,x,L),Ae.globalCompositeOperation="source-in";const ue=m.Util.transform((0,r.getCurrentTransformInverse)(Ae),[1,0,0,1,-_e,-ae]);return Ae.fillStyle=i?E.getPattern(l,this,ue,n.PathType.FILL):E,Ae.fillRect(0,0,x,L),d&&!i&&(this.cachedCanvases.delete("fillCanvas"),d.set(O,fe.canvas)),{canvas:fe.canvas,offsetX:Math.round(_e),offsetY:Math.round(ae)}}setLineWidth(g){g!==this.current.lineWidth&&(this._cachedScaleForStroking=null),this.current.lineWidth=g,this.ctx.lineWidth=g}setLineCap(g){this.ctx.lineCap=I[g]}setLineJoin(g){this.ctx.lineJoin=Y[g]}setMiterLimit(g){this.ctx.miterLimit=g}setDash(g,l){const x=this.ctx;void 0!==x.setLineDash&&(x.setLineDash(g),x.lineDashOffset=l)}setRenderingIntent(g){}setFlatness(g){}setGState(g){for(let l=0,x=g.length;l<x;l++){const L=g[l],i=L[1];switch(L[0]){case"LW":this.setLineWidth(i);break;case"LC":this.setLineCap(i);break;case"LJ":this.setLineJoin(i);break;case"ML":this.setMiterLimit(i);break;case"D":this.setDash(i[0],i[1]);break;case"RI":this.setRenderingIntent(i);break;case"FL":this.setFlatness(i);break;case"Font":this.setFont(i[0],i[1]);break;case"CA":this.current.strokeAlpha=L[1];break;case"ca":this.current.fillAlpha=L[1],this.ctx.globalAlpha=L[1];break;case"BM":this.ctx.globalCompositeOperation=i;break;case"SMask":this.current.activeSMask=i?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.current.transferMaps=i}}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const g=this.inSMaskMode;this.current.activeSMask&&!g?this.beginSMaskMode():!this.current.activeSMask&&g&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const L=this.cachedCanvases.getCanvas("smaskGroupAt"+this.groupLevel,this.ctx.canvas.width,this.ctx.canvas.height);this.suspendedCtx=this.ctx,this.ctx=L.context;const E=this.ctx;E.setTransform(...(0,r.getCurrentTransform)(this.suspendedCtx)),e(this.suspendedCtx,E),function a(V,g){if(V._removeMirroring)throw new Error("Context is already forwarding operations.");V.__originalSave=V.save,V.__originalRestore=V.restore,V.__originalRotate=V.rotate,V.__originalScale=V.scale,V.__originalTranslate=V.translate,V.__originalTransform=V.transform,V.__originalSetTransform=V.setTransform,V.__originalResetTransform=V.resetTransform,V.__originalClip=V.clip,V.__originalMoveTo=V.moveTo,V.__originalLineTo=V.lineTo,V.__originalBezierCurveTo=V.bezierCurveTo,V.__originalRect=V.rect,V.__originalClosePath=V.closePath,V.__originalBeginPath=V.beginPath,V._removeMirroring=()=>{V.save=V.__originalSave,V.restore=V.__originalRestore,V.rotate=V.__originalRotate,V.scale=V.__originalScale,V.translate=V.__originalTranslate,V.transform=V.__originalTransform,V.setTransform=V.__originalSetTransform,V.resetTransform=V.__originalResetTransform,V.clip=V.__originalClip,V.moveTo=V.__originalMoveTo,V.lineTo=V.__originalLineTo,V.bezierCurveTo=V.__originalBezierCurveTo,V.rect=V.__originalRect,V.closePath=V.__originalClosePath,V.beginPath=V.__originalBeginPath,delete V._removeMirroring},V.save=function(){g.save(),this.__originalSave()},V.restore=function(){g.restore(),this.__originalRestore()},V.translate=function(x,L){g.translate(x,L),this.__originalTranslate(x,L)},V.scale=function(x,L){g.scale(x,L),this.__originalScale(x,L)},V.transform=function(x,L,E,i,h,d){g.transform(x,L,E,i,h,d),this.__originalTransform(x,L,E,i,h,d)},V.setTransform=function(x,L,E,i,h,d){g.setTransform(x,L,E,i,h,d),this.__originalSetTransform(x,L,E,i,h,d)},V.resetTransform=function(){g.resetTransform(),this.__originalResetTransform()},V.rotate=function(x){g.rotate(x),this.__originalRotate(x)},V.clip=function(x){g.clip(x),this.__originalClip(x)},V.moveTo=function(l,x){g.moveTo(l,x),this.__originalMoveTo(l,x)},V.lineTo=function(l,x){g.lineTo(l,x),this.__originalLineTo(l,x)},V.bezierCurveTo=function(l,x,L,E,i,h){g.bezierCurveTo(l,x,L,E,i,h),this.__originalBezierCurveTo(l,x,L,E,i,h)},V.rect=function(l,x,L,E){g.rect(l,x,L,E),this.__originalRect(l,x,L,E)},V.closePath=function(){g.closePath(),this.__originalClosePath()},V.beginPath=function(){g.beginPath(),this.__originalBeginPath()}}(E,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),e(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(g){this.current.activeSMask&&(g?(g[0]=Math.floor(g[0]),g[1]=Math.floor(g[1]),g[2]=Math.ceil(g[2]),g[3]=Math.ceil(g[3])):g=[0,0,this.ctx.canvas.width,this.ctx.canvas.height],function b(V,g,l,x){const L=x[0],E=x[1],i=x[2]-L,h=x[3]-E;0===i||0===h||(function c(V,g,l,x,L,E,i,h,d,O,R){const $=!!E,K=$?E[0]:0,ce=$?E[1]:0,te=$?E[2]:0;let de;de="Luminosity"===L?p:S;const ie=Math.min(x,Math.ceil(1048576/l));for(let fe=0;fe<x;fe+=ie){const Ae=Math.min(ie,x-fe),_e=V.getImageData(h-O,fe+(d-R),l,Ae),ae=g.getImageData(h,fe+d,l,Ae);$&&v(_e.data,K,ce,te),de(_e.data,ae.data,i),g.putImageData(ae,h,fe+d)}}(g.context,l,i,h,g.subtype,g.backdrop,g.transferMap,L,E,g.offsetX,g.offsetY),V.save(),V.globalAlpha=1,V.globalCompositeOperation="source-over",V.setTransform(1,0,0,1,0,0),V.drawImage(l.canvas,0,0),V.restore())}(this.suspendedCtx,this.current.activeSMask,this.ctx,g),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore())}save(){this.inSMaskMode?(e(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const g=this.current;this.stateStack.push(g),this.current=g.clone()}restore(){0===this.stateStack.length&&this.inSMaskMode&&this.endSMaskMode(),0!==this.stateStack.length&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),e(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null)}transform(g,l,x,L,E,i){this.ctx.transform(g,l,x,L,E,i),this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null}constructPath(g,l,x){const L=this.ctx,E=this.current;let d,O,i=E.x,h=E.y;const R=(0,r.getCurrentTransform)(L),$=0===R[0]&&0===R[3]||0===R[1]&&0===R[2],K=$?x.slice(0):null;for(let ce=0,te=0,de=g.length;ce<de;ce++)switch(0|g[ce]){case m.OPS.rectangle:i=l[te++],h=l[te++];const me=l[te++],ie=l[te++],fe=i+me,Ae=h+ie;L.moveTo(i,h),0===me||0===ie?L.lineTo(fe,Ae):(L.lineTo(fe,h),L.lineTo(fe,Ae),L.lineTo(i,Ae)),$||E.updateRectMinMax(R,[i,h,fe,Ae]),L.closePath();break;case m.OPS.moveTo:i=l[te++],h=l[te++],L.moveTo(i,h),$||E.updatePathMinMax(R,i,h);break;case m.OPS.lineTo:i=l[te++],h=l[te++],L.lineTo(i,h),$||E.updatePathMinMax(R,i,h);break;case m.OPS.curveTo:d=i,O=h,i=l[te+4],h=l[te+5],L.bezierCurveTo(l[te],l[te+1],l[te+2],l[te+3],i,h),E.updateCurvePathMinMax(R,d,O,l[te],l[te+1],l[te+2],l[te+3],i,h,K),te+=6;break;case m.OPS.curveTo2:d=i,O=h,L.bezierCurveTo(i,h,l[te],l[te+1],l[te+2],l[te+3]),E.updateCurvePathMinMax(R,d,O,i,h,l[te],l[te+1],l[te+2],l[te+3],K),i=l[te+2],h=l[te+3],te+=4;break;case m.OPS.curveTo3:d=i,O=h,i=l[te+2],h=l[te+3],L.bezierCurveTo(l[te],l[te+1],i,h,i,h),E.updateCurvePathMinMax(R,d,O,l[te],l[te+1],i,h,i,h,K),te+=4;break;case m.OPS.closePath:L.closePath()}$&&E.updateScalingPathMinMax(R,K),E.setCurrentPoint(i,h)}closePath(){this.ctx.closePath()}stroke(g){g=!(typeof g<"u")||g;const l=this.ctx,x=this.current.strokeColor;l.globalAlpha=this.current.strokeAlpha,this.contentVisible&&("object"==typeof x&&x?.getPattern?(l.save(),l.strokeStyle=x.getPattern(l,this,(0,r.getCurrentTransformInverse)(l),n.PathType.STROKE),this.rescaleAndStroke(!1),l.restore()):this.rescaleAndStroke(!0)),g&&this.consumePath(this.current.getClippedPathBoundingBox()),l.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(g){g=!(typeof g<"u")||g;const l=this.ctx,x=this.current.fillColor;let E=!1;this.current.patternFill&&(l.save(),l.fillStyle=x.getPattern(l,this,(0,r.getCurrentTransformInverse)(l),n.PathType.FILL),E=!0);const i=this.current.getClippedPathBoundingBox();this.contentVisible&&null!==i&&(this.pendingEOFill?(l.fill("evenodd"),this.pendingEOFill=!1):l.fill()),E&&l.restore(),g&&this.consumePath(i)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=W}eoClip(){this.pendingClip=j}beginText(){this.current.textMatrix=m.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const g=this.pendingTextPaths,l=this.ctx;if(void 0!==g){l.save(),l.beginPath();for(const x of g)l.setTransform(...x.transform),l.translate(x.x,x.y),x.addToPath(l,x.fontSize);l.restore(),l.clip(),l.beginPath(),delete this.pendingTextPaths}else l.beginPath()}setCharSpacing(g){this.current.charSpacing=g}setWordSpacing(g){this.current.wordSpacing=g}setHScale(g){this.current.textHScale=g/100}setLeading(g){this.current.leading=-g}setFont(g,l){const x=this.commonObjs.get(g),L=this.current;if(!x)throw new Error(`Can't find font for ${g}`);if(L.fontMatrix=x.fontMatrix||m.FONT_IDENTITY_MATRIX,(0===L.fontMatrix[0]||0===L.fontMatrix[3])&&(0,m.warn)("Invalid font matrix for font "+g),l<0?(l=-l,L.fontDirection=-1):L.fontDirection=1,this.current.font=x,this.current.fontSize=l,x.isType3Font)return;let i="normal";x.black?i="900":x.bold&&(i="bold");const h=x.italic?"italic":"normal",d=`"${x.loadedName||"sans-serif"}", ${x.fallbackName}`;let O=l;l<16?O=16:l>100&&(O=100),this.current.fontSizeScale=l/O,this.ctx.font=`${h} ${i} ${O}px ${d}`}setTextRenderingMode(g){this.current.textRenderingMode=g}setTextRise(g){this.current.textRise=g}moveText(g,l){this.current.x=this.current.lineX+=g,this.current.y=this.current.lineY+=l}setLeadingMoveText(g,l){this.setLeading(-l),this.moveText(g,l)}setTextMatrix(g,l,x,L,E,i){this.current.textMatrix=[g,l,x,L,E,i],this.current.textMatrixScale=Math.hypot(g,l),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(g,l,x,L){const E=this.ctx,i=this.current,h=i.font,d=i.textRenderingMode,O=i.fontSize/i.fontSizeScale,R=d&m.TextRenderingMode.FILL_STROKE_MASK,$=!!(d&m.TextRenderingMode.ADD_TO_PATH_FLAG),K=i.patternFill&&!h.missingFile;let ce;(h.disableFontFace||$||K)&&(ce=h.getPathGenerator(this.commonObjs,g)),h.disableFontFace||K?(E.save(),E.translate(l,x),E.beginPath(),ce(E,O),L&&E.setTransform(...L),(R===m.TextRenderingMode.FILL||R===m.TextRenderingMode.FILL_STROKE)&&E.fill(),(R===m.TextRenderingMode.STROKE||R===m.TextRenderingMode.FILL_STROKE)&&E.stroke(),E.restore()):((R===m.TextRenderingMode.FILL||R===m.TextRenderingMode.FILL_STROKE)&&E.fillText(g,l,x),(R===m.TextRenderingMode.STROKE||R===m.TextRenderingMode.FILL_STROKE)&&E.strokeText(g,l,x)),$&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,r.getCurrentTransform)(E),x:l,y:x,fontSize:O,addToPath:ce})}get isFontSubpixelAAEnabled(){const{context:g}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);g.scale(1.5,1),g.fillText("I",0,10);const l=g.getImageData(0,0,10,10).data;let x=!1;for(let L=3;L<l.length;L+=4)if(l[L]>0&&l[L]<255){x=!0;break}return(0,m.shadow)(this,"isFontSubpixelAAEnabled",x)}showText(g){const l=this.current,x=l.font;if(x.isType3Font)return this.showType3Text(g);const L=l.fontSize;if(0===L)return;const E=this.ctx,i=l.fontSizeScale,h=l.charSpacing,d=l.wordSpacing,O=l.fontDirection,R=l.textHScale*O,$=g.length,K=x.vertical,ce=K?1:-1,te=x.defaultVMetrics,de=L*l.fontMatrix[0],me=l.textRenderingMode===m.TextRenderingMode.FILL&&!x.disableFontFace&&!l.patternFill;let ie;if(E.save(),E.transform(...l.textMatrix),E.translate(l.x,l.y+l.textRise),E.scale(R,O>0?-1:1),l.patternFill){E.save();const ue=l.fillColor.getPattern(E,this,(0,r.getCurrentTransformInverse)(E),n.PathType.FILL);ie=(0,r.getCurrentTransform)(E),E.restore(),E.fillStyle=ue}let fe=l.lineWidth;const Ae=l.textMatrixScale;if(0===Ae||0===fe){const ue=l.textRenderingMode&m.TextRenderingMode.FILL_STROKE_MASK;(ue===m.TextRenderingMode.STROKE||ue===m.TextRenderingMode.FILL_STROKE)&&(fe=this.getSinglePixelWidth())}else fe/=Ae;1!==i&&(E.scale(i,i),fe/=i),E.lineWidth=fe;let ae,_e=0;for(ae=0;ae<$;++ae){const ue=g[ae];if("number"==typeof ue){_e+=ce*ue*L/1e3;continue}let we=!1;const ke=(ue.isSpace?d:0)+h,Fe=ue.fontChar,ge=ue.accent;let Pe,Me,Se,xe=ue.width;if(K){const B=ue.vmetric||te,ne=-(ue.vmetric?B[1]:.5*xe)*de;xe=B?-B[0]:xe,Pe=ne/i,Me=(_e+B[2]*de)/i}else Pe=_e/i,Me=0;if(x.remeasure&&xe>0){const B=1e3*E.measureText(Fe).width/L*i;if(xe<B&&this.isFontSubpixelAAEnabled){const ne=xe/B;we=!0,E.save(),E.scale(ne,1),Pe/=ne}else xe!==B&&(Pe+=(xe-B)/2e3*L/i)}this.contentVisible&&(ue.isInFont||x.missingFile)&&(me&&!ge?E.fillText(Fe,Pe,Me):(this.paintChar(Fe,Pe,Me,ie),ge&&this.paintChar(ge.fontChar,Pe+L*ge.offset.x/i,Me-L*ge.offset.y/i,ie))),Se=K?xe*de-ke*O:xe*de+ke*O,_e+=Se,we&&E.restore()}K?l.y-=_e:l.x+=_e*R,E.restore(),this.compose()}showType3Text(g){const l=this.ctx,x=this.current,L=x.font,E=x.fontSize,i=x.fontDirection,h=L.vertical?1:-1,d=x.charSpacing,O=x.wordSpacing,R=x.textHScale*i,$=x.fontMatrix||m.FONT_IDENTITY_MATRIX,K=g.length;let te,de,me,ie;if(x.textRenderingMode!==m.TextRenderingMode.INVISIBLE&&0!==E){for(this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,l.save(),l.transform(...x.textMatrix),l.translate(x.x,x.y),l.scale(R,i),te=0;te<K;++te){if(de=g[te],"number"==typeof de){ie=h*de*E/1e3,this.ctx.translate(ie,0),x.x+=ie*R;continue}const fe=(de.isSpace?O:0)+d,Ae=L.charProcOperatorList[de.operatorListId];Ae?(this.contentVisible&&(this.processingType3=de,this.save(),l.scale(E,E),l.transform(...$),this.executeOperatorList(Ae),this.restore()),me=m.Util.applyTransform([de.width,0],$)[0]*E+fe,l.translate(me,0),x.x+=me*R):(0,m.warn)(`Type3 character "${de.operatorListId}" is not available.`)}l.restore(),this.processingType3=null}}setCharWidth(g,l){}setCharWidthAndBounds(g,l,x,L,E,i){this.ctx.rect(x,L,E-x,i-L),this.ctx.clip(),this.endPath()}getColorN_Pattern(g){let l;if("TilingPattern"===g[0]){const x=g[1],L=this.baseTransform||(0,r.getCurrentTransform)(this.ctx);l=new n.TilingPattern(g,x,this.ctx,{createCanvasGraphics:i=>new ee(i,this.commonObjs,this.objs,this.canvasFactory)},L)}else l=this._getPattern(g[1],g[2]);return l}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(g,l,x){const L=this.selectColor?.(g,l,x)||m.Util.makeHexColor(g,l,x);this.ctx.strokeStyle=L,this.current.strokeColor=L}setFillRGBColor(g,l,x){const L=this.selectColor?.(g,l,x)||m.Util.makeHexColor(g,l,x);this.ctx.fillStyle=L,this.current.fillColor=L,this.current.patternFill=!1}_getPattern(g,l=null){let x;return this.cachedPatterns.has(g)?x=this.cachedPatterns.get(g):(x=(0,n.getShadingPattern)(this.objs.get(g)),this.cachedPatterns.set(g,x)),l&&(x.matrix=l),x}shadingFill(g){if(!this.contentVisible)return;const l=this.ctx;this.save();const x=this._getPattern(g);l.fillStyle=x.getPattern(l,this,(0,r.getCurrentTransformInverse)(l),n.PathType.SHADING);const L=(0,r.getCurrentTransformInverse)(l);if(L){const E=l.canvas,i=E.width,h=E.height,d=m.Util.applyTransform([0,0],L),O=m.Util.applyTransform([0,h],L),R=m.Util.applyTransform([i,0],L),$=m.Util.applyTransform([i,h],L),K=Math.min(d[0],O[0],R[0],$[0]),ce=Math.min(d[1],O[1],R[1],$[1]),te=Math.max(d[0],O[0],R[0],$[0]),de=Math.max(d[1],O[1],R[1],$[1]);this.ctx.fillRect(K,ce,te-K,de-ce)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,m.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,m.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(g,l){this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(g)&&6===g.length&&this.transform(...g),this.baseTransform=(0,r.getCurrentTransform)(this.ctx),l)&&(this.ctx.rect(l[0],l[1],l[2]-l[0],l[3]-l[1]),this.current.updateRectMinMax((0,r.getCurrentTransform)(this.ctx),l),this.clip(),this.endPath())}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(g){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const l=this.ctx;g.isolated||(0,m.info)("TODO: Support non-isolated groups."),g.knockout&&(0,m.warn)("Knockout groups not supported.");const x=(0,r.getCurrentTransform)(l);if(g.matrix&&l.transform(...g.matrix),!g.bbox)throw new Error("Bounding box is required.");let L=m.Util.getAxialAlignedBoundingBox(g.bbox,(0,r.getCurrentTransform)(l));L=m.Util.intersect(L,[0,0,l.canvas.width,l.canvas.height])||[0,0,0,0];const i=Math.floor(L[0]),h=Math.floor(L[1]);let d=Math.max(Math.ceil(L[2])-i,1),O=Math.max(Math.ceil(L[3])-h,1),R=1,$=1;d>G&&(R=d/G,d=G),O>G&&($=O/G,O=G),this.current.startNewPathAndClipBox([0,0,d,O]);let K="groupAt"+this.groupLevel;g.smask&&(K+="_smask_"+this.smaskCounter++%2);const ce=this.cachedCanvases.getCanvas(K,d,O),te=ce.context;te.scale(1/R,1/$),te.translate(-i,-h),te.transform(...x),g.smask?this.smaskStack.push({canvas:ce.canvas,context:te,offsetX:i,offsetY:h,scaleX:R,scaleY:$,subtype:g.smask.subtype,backdrop:g.smask.backdrop,transferMap:g.smask.transferMap||null,startTransformInverse:null}):(l.setTransform(1,0,0,1,0,0),l.translate(i,h),l.scale(R,$),l.save()),e(l,te),this.ctx=te,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(l),this.groupLevel++}endGroup(g){if(!this.contentVisible)return;this.groupLevel--;const l=this.ctx,x=this.groupStack.pop();if(this.ctx=x,this.ctx.imageSmoothingEnabled=!1,g.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const L=(0,r.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...L);const E=m.Util.getAxialAlignedBoundingBox([0,0,l.canvas.width,l.canvas.height],L);this.ctx.drawImage(l.canvas,0,0),this.ctx.restore(),this.compose(E)}}beginAnnotation(g,l,x,L,E){if(_classPrivateMethodGet(this,z,oe).call(this),o(this.ctx,this.foregroundColor),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(l)&&4===l.length){const i=l[2]-l[0],h=l[3]-l[1];if(E&&this.annotationCanvasMap){(x=x.slice())[4]-=l[0],x[5]-=l[1],(l=l.slice())[0]=l[1]=0,l[2]=i,l[3]=h;const[d,O]=m.Util.singularValueDecompose2dScale((0,r.getCurrentTransform)(this.ctx)),{viewportScale:R}=this,$=Math.ceil(i*this.outputScaleX*R),K=Math.ceil(h*this.outputScaleY*R);this.annotationCanvas=this.canvasFactory.create($,K);const{canvas:ce,context:te}=this.annotationCanvas;this.annotationCanvasMap.set(g,ce),this.annotationCanvas.savedCtx=this.ctx,this.ctx=te,this.ctx.setTransform(d,0,0,-O,0,h*O),o(this.ctx,this.foregroundColor)}else o(this.ctx,this.foregroundColor),this.ctx.rect(l[0],l[1],i,h),this.ctx.clip(),this.endPath()}this.current=new P(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...x),this.transform(...L)}endAnnotation(){this.annotationCanvas&&(this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(g){if(!this.contentVisible)return;const l=g.count;(g=this.getObject(g.data,g)).count=l;const x=this.ctx,L=this.processingType3;if(L&&(void 0===L.compiled&&(L.compiled=function y(V){const{width:g,height:l}=V;if(g>C||l>C)return null;const L=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),E=g+1;let h,d,O,i=new Uint8Array(E*(l+1));const R=g+7&-8;let $=new Uint8Array(R*l),K=0;for(const ie of V.data){let fe=128;for(;fe>0;)$[K++]=ie&fe?0:255,fe>>=1}let ce=0;for(K=0,0!==$[K]&&(i[0]=1,++ce),d=1;d<g;d++)$[K]!==$[K+1]&&(i[d]=$[K]?2:1,++ce),K++;for(0!==$[K]&&(i[d]=2,++ce),h=1;h<l;h++){K=h*R,O=h*E,$[K-R]!==$[K]&&(i[O]=$[K]?1:8,++ce);let ie=($[K]?4:0)+($[K-R]?8:0);for(d=1;d<g;d++)ie=(ie>>2)+($[K+1]?4:0)+($[K-R+1]?8:0),L[ie]&&(i[O+d]=L[ie],++ce),K++;if($[K-R]!==$[K]&&(i[O+d]=$[K]?2:4,++ce),ce>1e3)return null}for(K=R*(l-1),O=h*E,0!==$[K]&&(i[O]=8,++ce),d=1;d<g;d++)$[K]!==$[K+1]&&(i[O+d]=$[K]?4:8,++ce),K++;if(0!==$[K]&&(i[O+d]=4,++ce),ce>1e3)return null;const te=new Int32Array([0,E,-1,0,-E,0,0,0,1]),de=new Path2D;for(h=0;ce&&h<=l;h++){let ie=h*E;const fe=ie+g;for(;ie<fe&&!i[ie];)ie++;if(ie===fe)continue;de.moveTo(ie%E,h);const Ae=ie;let _e=i[ie];do{const ae=te[_e];do{ie+=ae}while(!i[ie]);const ue=i[ie];5!==ue&&10!==ue?(_e=ue,i[ie]=0):(_e=ue&51*_e>>4,i[ie]&=_e>>2|_e<<2),de.lineTo(ie%E,ie/E|0),i[ie]||--ce}while(Ae!==ie);--h}return $=null,i=null,function(ie){ie.save(),ie.scale(1/g,-1/l),ie.translate(0,-l),ie.fill(de),ie.beginPath(),ie.restore()}}(g)),L.compiled))return void L.compiled(x);const E=this._createMaskCanvas(g),i=E.canvas;x.save(),x.setTransform(1,0,0,1,0,0),x.drawImage(i,E.offsetX,E.offsetY),x.restore(),this.compose()}paintImageMaskXObjectRepeat(g,l,x=0,L=0,E,i){if(!this.contentVisible)return;g=this.getObject(g.data,g);const h=this.ctx;h.save();const d=(0,r.getCurrentTransform)(h);h.transform(l,x,L,E,0,0);const O=this._createMaskCanvas(g);h.setTransform(1,0,0,1,0,0);for(let R=0,$=i.length;R<$;R+=2){const K=m.Util.transform(d,[l,x,L,E,i[R],i[R+1]]),[ce,te]=m.Util.applyTransform([0,0],K);h.drawImage(O.canvas,ce,te)}h.restore(),this.compose()}paintImageMaskXObjectGroup(g){if(!this.contentVisible)return;const l=this.ctx,x=this.current.fillColor,L=this.current.patternFill;for(const E of g){const{data:i,width:h,height:d,transform:O}=E,R=this.cachedCanvases.getCanvas("maskCanvas",h,d),$=R.context;$.save(),t($,this.getObject(i,E)),$.globalCompositeOperation="source-in",$.fillStyle=L?x.getPattern($,this,(0,r.getCurrentTransformInverse)(l),n.PathType.FILL):x,$.fillRect(0,0,h,d),$.restore(),l.save(),l.transform(...O),l.scale(1,-1),A(l,R.canvas,0,0,h,d,0,-1,1,1),l.restore()}this.compose()}paintImageXObject(g){if(!this.contentVisible)return;const l=this.getObject(g);l?this.paintInlineImageXObject(l):(0,m.warn)("Dependent image isn't ready yet")}paintImageXObjectRepeat(g,l,x,L){if(!this.contentVisible)return;const E=this.getObject(g);if(!E)return void(0,m.warn)("Dependent image isn't ready yet");const i=E.width,h=E.height,d=[];for(let O=0,R=L.length;O<R;O+=2)d.push({transform:[l,0,0,x,L[O],L[O+1]],x:0,y:0,w:i,h});this.paintInlineImageXObjectGroup(E,d)}paintInlineImageXObject(g){if(!this.contentVisible)return;const l=g.width,x=g.height,L=this.ctx;let E;if(this.save(),L.scale(1/l,-1/x),"function"==typeof HTMLElement&&g instanceof HTMLElement||!g.data)E=g;else{const O=this.cachedCanvases.getCanvas("inlineImage",l,x);u(O.context,g,this.current.transferMaps),E=O.canvas}const i=this._scaleImage(E,(0,r.getCurrentTransformInverse)(L));L.imageSmoothingEnabled=N((0,r.getCurrentTransform)(L),g.interpolate);const[h,d]=A(L,i.img,0,0,i.paintWidth,i.paintHeight,0,-x,l,x);if(this.imageLayer){const[O,R]=m.Util.applyTransform([0,-x],(0,r.getCurrentTransform)(this.ctx));this.imageLayer.appendImage({imgData:g,left:O,top:R,width:h,height:d})}this.compose(),this.restore()}paintInlineImageXObjectGroup(g,l){if(!this.contentVisible)return;const x=this.ctx,L=g.width,E=g.height,i=this.cachedCanvases.getCanvas("inlineImage",L,E);u(i.context,g,this.current.transferMaps);for(const d of l){if(x.save(),x.transform(...d.transform),x.scale(1,-1),A(x,i.canvas,d.x,d.y,d.w,d.h,0,-1,1,1),this.imageLayer){const[O,R]=m.Util.applyTransform([d.x,d.y],(0,r.getCurrentTransform)(this.ctx));this.imageLayer.appendImage({imgData:g,left:O,top:R,width:L,height:E})}x.restore()}this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(g){}markPointProps(g,l){}beginMarkedContent(g){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(g,l){this.markedContentStack.push("OC"===g?{visible:this.optionalContentConfig.isVisible(l)}:{visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(g){const l=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(g);const x=this.ctx;this.pendingClip&&(l||(this.pendingClip===j?x.clip("evenodd"):x.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),x.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const g=(0,r.getCurrentTransform)(this.ctx);if(0===g[1]&&0===g[2])this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(g[0]),Math.abs(g[3]));else{const l=Math.abs(g[0]*g[3]-g[2]*g[1]),x=Math.hypot(g[0],g[2]),L=Math.hypot(g[1],g[3]);this._cachedGetSinglePixelWidth=Math.max(x,L)/l}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(!this._cachedScaleForStroking){const{lineWidth:g}=this.current,l=(0,r.getCurrentTransform)(this.ctx);let x,L;if(0===l[1]&&0===l[2]){const E=Math.abs(l[0]),i=Math.abs(l[3]);if(0===g)x=1/E,L=1/i;else{const h=E*g,d=i*g;x=h<1?1/h:1,L=d<1?1/d:1}}else{const E=Math.abs(l[0]*l[3]-l[2]*l[1]),i=Math.hypot(l[0],l[1]),h=Math.hypot(l[2],l[3]);if(0===g)x=h/E,L=i/E;else{const d=g*E;x=h>d?h/d:1,L=i>d?i/d:1}}this._cachedScaleForStroking=[x,L]}return this._cachedScaleForStroking}rescaleAndStroke(g){const{ctx:l}=this,{lineWidth:x}=this.current,[L,E]=this.getScaleForStroking();if(l.lineWidth=x||1,1===L&&1===E)return void l.stroke();let i,h,d;g&&(i=(0,r.getCurrentTransform)(l),h=l.getLineDash().slice(),d=l.lineDashOffset),l.scale(L,E);const O=Math.max(L,E);l.setLineDash(l.getLineDash().map(R=>R/O)),l.lineDashOffset/=O,l.stroke(),g&&(l.setTransform(...i),l.setLineDash(h),l.lineDashOffset=d)}isContentVisible(){for(let g=this.markedContentStack.length-1;g>=0;g--)if(!this.markedContentStack[g].visible)return!1;return!0}}function oe(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}s.CanvasGraphics=ee;for(const V in m.OPS)void 0!==ee.prototype[V]&&(ee.prototype[m.OPS[V]]=ee.prototype[V])},(Z,s,k)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.TilingPattern=s.PathType=void 0,s.getShadingPattern=function w(A){switch(A[0]){case"RadialAxial":return new T(A);case"Mesh":return new U(A);case"Dummy":return new C}throw new Error(`Unknown IR type: ${A[0]}`)};var r=k(1),m=k(8),n=k(3);const D={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function Q(A,y){if(!y||n.isNodeJS)return;const P=y[2]-y[0],u=y[3]-y[1],t=new Path2D;t.rect(y[0],y[1],P,u),A.clip(t)}s.PathType=D;class F{constructor(){this.constructor===F&&(0,r.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,r.unreachable)("Abstract method `getPattern` called.")}}class T extends F{constructor(y){super(),this._type=y[1],this._bbox=y[2],this._colorStops=y[3],this._p0=y[4],this._p1=y[5],this._r0=y[6],this._r1=y[7],this.matrix=null}_createGradient(y){let P;"axial"===this._type?P=y.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):"radial"===this._type&&(P=y.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const u of this._colorStops)P.addColorStop(u[0],u[1]);return P}getPattern(y,P,u,t){let e;if(t===D.STROKE||t===D.FILL){const o=P.current.getClippedPathBoundingBox(t,(0,m.getCurrentTransform)(y))||[0,0,0,0],v=Math.ceil(o[2]-o[0])||1,S=Math.ceil(o[3]-o[1])||1,p=P.cachedCanvases.getCanvas("pattern",v,S,!0),c=p.context;c.clearRect(0,0,c.canvas.width,c.canvas.height),c.beginPath(),c.rect(0,0,c.canvas.width,c.canvas.height),c.translate(-o[0],-o[1]),u=r.Util.transform(u,[1,0,0,1,o[0],o[1]]),c.transform(...P.baseTransform),this.matrix&&c.transform(...this.matrix),Q(c,this._bbox),c.fillStyle=this._createGradient(c),c.fill(),e=y.createPattern(p.canvas,"no-repeat");const b=new DOMMatrix(u);try{e.setTransform(b)}catch(N){(0,r.warn)(`RadialAxialShadingPattern.getPattern: "${N?.message}".`)}}else Q(y,this._bbox),e=this._createGradient(y);return e}}function G(A,y,P,u,t,e,o,v){const S=y.coords,p=y.colors,c=A.data,b=4*A.width;let N;S[P+1]>S[u+1]&&(N=P,P=u,u=N,N=e,e=o,o=N),S[u+1]>S[t+1]&&(N=u,u=t,t=N,N=o,o=v,v=N),S[P+1]>S[u+1]&&(N=P,P=u,u=N,N=e,e=o,o=N);const I=(S[P]+y.offsetX)*y.scaleX,Y=(S[P+1]+y.offsetY)*y.scaleY,W=(S[u]+y.offsetX)*y.scaleX,j=(S[u+1]+y.offsetY)*y.scaleY,z=(S[t]+y.offsetX)*y.scaleX,ee=(S[t+1]+y.offsetY)*y.scaleY;if(Y>=ee)return;const oe=p[e],V=p[e+1],g=p[e+2],l=p[o],x=p[o+1],L=p[o+2],E=p[v],i=p[v+1],h=p[v+2],d=Math.round(Y),O=Math.round(ee);let R,$,K,ce,te,de,me,ie;for(let fe=d;fe<=O;fe++){if(fe<j){let we;we=fe<Y?0:(Y-fe)/(Y-j),R=I-(I-W)*we,$=oe-(oe-l)*we,K=V-(V-x)*we,ce=g-(g-L)*we}else{let we;we=fe>ee?1:j===ee?0:(j-fe)/(j-ee),R=W-(W-z)*we,$=l-(l-E)*we,K=x-(x-i)*we,ce=L-(L-h)*we}let Ae;Ae=fe<Y?0:fe>ee?1:(Y-fe)/(Y-ee),te=I-(I-z)*Ae,de=oe-(oe-E)*Ae,me=V-(V-i)*Ae,ie=g-(g-h)*Ae;const _e=Math.round(Math.min(R,te)),ae=Math.round(Math.max(R,te));let ue=b*fe+4*_e;for(let we=_e;we<=ae;we++)Ae=(R-we)/(R-te),Ae<0?Ae=0:Ae>1&&(Ae=1),c[ue++]=$-($-de)*Ae|0,c[ue++]=K-(K-me)*Ae|0,c[ue++]=ce-(ce-ie)*Ae|0,c[ue++]=255}}function q(A,y,P){const u=y.coords,t=y.colors;let e,o;switch(y.type){case"lattice":const v=y.verticesPerRow,S=Math.floor(u.length/v)-1,p=v-1;for(e=0;e<S;e++){let c=e*v;for(let b=0;b<p;b++,c++)G(A,P,u[c],u[c+1],u[c+v],t[c],t[c+1],t[c+v]),G(A,P,u[c+v+1],u[c+1],u[c+v],t[c+v+1],t[c+1],t[c+v])}break;case"triangles":for(e=0,o=u.length;e<o;e+=3)G(A,P,u[e],u[e+1],u[e+2],t[e],t[e+1],t[e+2]);break;default:throw new Error("illegal figure")}}class U extends F{constructor(y){super(),this._coords=y[2],this._colors=y[3],this._figures=y[4],this._bounds=y[5],this._bbox=y[7],this._background=y[8],this.matrix=null}_createMeshCanvas(y,P,u){const v=Math.floor(this._bounds[0]),S=Math.floor(this._bounds[1]),p=Math.ceil(this._bounds[2])-v,c=Math.ceil(this._bounds[3])-S,b=Math.min(Math.ceil(Math.abs(p*y[0]*1.1)),3e3),N=Math.min(Math.ceil(Math.abs(c*y[1]*1.1)),3e3),I=p/b,Y=c/N,W={coords:this._coords,colors:this._colors,offsetX:-v,offsetY:-S,scaleX:1/I,scaleY:1/Y},ee=u.getCanvas("mesh",b+4,N+4,!1),oe=ee.context,V=oe.createImageData(b,N);if(P){const l=V.data;for(let x=0,L=l.length;x<L;x+=4)l[x]=P[0],l[x+1]=P[1],l[x+2]=P[2],l[x+3]=255}for(const l of this._figures)q(V,l,W);return oe.putImageData(V,2,2),{canvas:ee.canvas,offsetX:v-2*I,offsetY:S-2*Y,scaleX:I,scaleY:Y}}getPattern(y,P,u,t){let e;if(Q(y,this._bbox),t===D.SHADING)e=r.Util.singularValueDecompose2dScale((0,m.getCurrentTransform)(y));else if(e=r.Util.singularValueDecompose2dScale(P.baseTransform),this.matrix){const v=r.Util.singularValueDecompose2dScale(this.matrix);e=[e[0]*v[0],e[1]*v[1]]}const o=this._createMeshCanvas(e,t===D.SHADING?null:this._background,P.cachedCanvases);return t!==D.SHADING&&(y.setTransform(...P.baseTransform),this.matrix&&y.transform(...this.matrix)),y.translate(o.offsetX,o.offsetY),y.scale(o.scaleX,o.scaleY),y.createPattern(o.canvas,"no-repeat")}}class C extends F{getPattern(){return"hotpink"}}class _{static get MAX_PATTERN_SIZE(){return(0,r.shadow)(this,"MAX_PATTERN_SIZE",3e3)}constructor(y,P,u,t,e){this.operatorList=y[2],this.matrix=y[3]||[1,0,0,1,0,0],this.bbox=y[4],this.xstep=y[5],this.ystep=y[6],this.paintType=y[7],this.tilingType=y[8],this.color=P,this.ctx=u,this.canvasGraphicsFactory=t,this.baseTransform=e}createPatternCanvas(y){const P=this.operatorList,u=this.bbox,t=this.xstep,e=this.ystep,o=this.paintType,S=this.color,p=this.canvasGraphicsFactory;(0,r.info)("TilingType: "+this.tilingType);const c=u[0],b=u[1],N=u[2],I=u[3],Y=r.Util.singularValueDecompose2dScale(this.matrix),W=r.Util.singularValueDecompose2dScale(this.baseTransform),j=[Y[0]*W[0],Y[1]*W[1]],z=this.getSizeAndScale(t,this.ctx.canvas.width,j[0]),ee=this.getSizeAndScale(e,this.ctx.canvas.height,j[1]),oe=y.cachedCanvases.getCanvas("pattern",z.size,ee.size,!0),V=oe.context,g=p.createCanvasGraphics(V);g.groupLevel=y.groupLevel,this.setFillAndStrokeStyleToContext(g,o,S);let l=c,x=b,L=N,E=I;return c<0&&(l=0,L+=Math.abs(c)),b<0&&(x=0,E+=Math.abs(b)),V.translate(-z.scale*l,-ee.scale*x),g.transform(z.scale,0,0,ee.scale,0,0),V.save(),this.clipBbox(g,l,x,L,E),g.baseTransform=(0,m.getCurrentTransform)(g.ctx),g.executeOperatorList(P),g.endDrawing(),{canvas:oe.canvas,scaleX:z.scale,scaleY:ee.scale,offsetX:l,offsetY:x}}getSizeAndScale(y,P,u){y=Math.abs(y);const t=Math.max(_.MAX_PATTERN_SIZE,P);let e=Math.ceil(y*u);return e>=t?e=t:u=e/y,{scale:u,size:e}}clipBbox(y,P,u,t,e){y.ctx.rect(P,u,t-P,e-u),y.current.updateRectMinMax((0,m.getCurrentTransform)(y.ctx),[P,u,t,e]),y.clip(),y.endPath()}setFillAndStrokeStyleToContext(y,P,u){const t=y.ctx,e=y.current;switch(P){case 1:const o=this.ctx;t.fillStyle=o.fillStyle,t.strokeStyle=o.strokeStyle,e.fillColor=o.fillStyle,e.strokeColor=o.strokeStyle;break;case 2:const v=r.Util.makeHexColor(u[0],u[1],u[2]);t.fillStyle=v,t.strokeStyle=v,e.fillColor=v,e.strokeColor=v;break;default:throw new r.FormatError(`Unsupported paint type: ${P}`)}}getPattern(y,P,u,t){let e=u;t!==D.SHADING&&(e=r.Util.transform(e,P.baseTransform),this.matrix&&(e=r.Util.transform(e,this.matrix)));const o=this.createPatternCanvas(P);let v=new DOMMatrix(e);v=v.translate(o.offsetX,o.offsetY),v=v.scale(1/o.scaleX,1/o.scaleY);const S=y.createPattern(o.canvas,"repeat");try{S.setTransform(v)}catch(p){(0,r.warn)(`TilingPattern.getPattern: "${p?.message}".`)}return S}}s.TilingPattern=_},(Z,s,k)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.applyMaskImageData=function m({src:n,srcPos:D=0,dest:Q,destPos:F=0,width:T,height:G,inverseDecode:q=!1}){const U=r.FeatureTest.isLittleEndian?4278190080:255,[C,w]=q?[0,U]:[U,0],a=T>>3,_=7&T,A=n.length;Q=new Uint32Array(Q.buffer);for(let y=0;y<G;y++){for(const u=D+a;D<u;D++){const t=D<A?n[D]:255;Q[F++]=128&t?w:C,Q[F++]=64&t?w:C,Q[F++]=32&t?w:C,Q[F++]=16&t?w:C,Q[F++]=8&t?w:C,Q[F++]=4&t?w:C,Q[F++]=2&t?w:C,Q[F++]=1&t?w:C}if(0===_)continue;const P=D<A?n[D++]:255;for(let u=0;u<_;u++)Q[F++]=P&1<<7-u?w:C}return{srcPos:D,destPos:F}};var r=k(1)},(Z,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.GlobalWorkerOptions=void 0;const k=Object.create(null);s.GlobalWorkerOptions=k,k.workerPort=void 0===k.workerPort?null:k.workerPort,k.workerSrc=void 0===k.workerSrc?"":k.workerSrc},(Z,s,k)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.MessageHandler=void 0;var r=k(1);function D(F){switch(F instanceof Error||"object"==typeof F&&null!==F||(0,r.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),F.name){case"AbortException":return new r.AbortException(F.message);case"MissingPDFException":return new r.MissingPDFException(F.message);case"PasswordException":return new r.PasswordException(F.message,F.code);case"UnexpectedResponseException":return new r.UnexpectedResponseException(F.message,F.status);case"UnknownErrorException":return new r.UnknownErrorException(F.message,F.details);default:return new r.UnknownErrorException(F.message,F.toString())}}s.MessageHandler=class Q{constructor(T,G,q){this.sourceName=T,this.targetName=G,this.comObj=q,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=U=>{const C=U.data;if(C.targetName!==this.sourceName)return;if(C.stream)return void this._processStreamMessage(C);if(C.callback){const a=C.callbackId,_=this.callbackCapabilities[a];if(!_)throw new Error(`Cannot resolve callback ${a}`);if(delete this.callbackCapabilities[a],1===C.callback)_.resolve(C.data);else{if(2!==C.callback)throw new Error("Unexpected callback case");_.reject(D(C.reason))}return}const w=this.actionHandler[C.action];if(!w)throw new Error(`Unknown action from worker: ${C.action}`);if(C.callbackId){const a=this.sourceName,_=C.sourceName;new Promise(function(A){A(w(C.data))}).then(function(A){q.postMessage({sourceName:a,targetName:_,callback:1,callbackId:C.callbackId,data:A})},function(A){q.postMessage({sourceName:a,targetName:_,callback:2,callbackId:C.callbackId,reason:D(A)})})}else C.streamId?this._createStreamSink(C):w(C.data)},q.addEventListener("message",this._onComObjOnMessage)}on(T,G){const q=this.actionHandler;if(q[T])throw new Error(`There is already an actionName called "${T}"`);q[T]=G}send(T,G,q){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:T,data:G},q)}sendWithPromise(T,G,q){const U=this.callbackId++,C=(0,r.createPromiseCapability)();this.callbackCapabilities[U]=C;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:T,callbackId:U,data:G},q)}catch(w){C.reject(w)}return C.promise}sendWithStream(T,G,q,U){const C=this.streamId++,w=this.sourceName,a=this.targetName,_=this.comObj;return new ReadableStream({start:A=>{const y=(0,r.createPromiseCapability)();return this.streamControllers[C]={controller:A,startCall:y,pullCall:null,cancelCall:null,isClosed:!1},_.postMessage({sourceName:w,targetName:a,action:T,streamId:C,data:G,desiredSize:A.desiredSize},U),y.promise},pull:A=>{const y=(0,r.createPromiseCapability)();return this.streamControllers[C].pullCall=y,_.postMessage({sourceName:w,targetName:a,stream:6,streamId:C,desiredSize:A.desiredSize}),y.promise},cancel:A=>{(0,r.assert)(A instanceof Error,"cancel must have a valid reason");const y=(0,r.createPromiseCapability)();return this.streamControllers[C].cancelCall=y,this.streamControllers[C].isClosed=!0,_.postMessage({sourceName:w,targetName:a,stream:1,streamId:C,reason:D(A)}),y.promise}},q)}_createStreamSink(T){const G=T.streamId,q=this.sourceName,U=T.sourceName,C=this.comObj,w=this,a=this.actionHandler[T.action],_={enqueue(A,y=1,P){if(this.isCancelled)return;const u=this.desiredSize;this.desiredSize-=y,u>0&&this.desiredSize<=0&&(this.sinkCapability=(0,r.createPromiseCapability)(),this.ready=this.sinkCapability.promise),C.postMessage({sourceName:q,targetName:U,stream:4,streamId:G,chunk:A},P)},close(){this.isCancelled||(this.isCancelled=!0,C.postMessage({sourceName:q,targetName:U,stream:3,streamId:G}),delete w.streamSinks[G])},error(A){(0,r.assert)(A instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,C.postMessage({sourceName:q,targetName:U,stream:5,streamId:G,reason:D(A)}))},sinkCapability:(0,r.createPromiseCapability)(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:T.desiredSize,ready:null};_.sinkCapability.resolve(),_.ready=_.sinkCapability.promise,this.streamSinks[G]=_,new Promise(function(A){A(a(T.data,_))}).then(function(){C.postMessage({sourceName:q,targetName:U,stream:8,streamId:G,success:!0})},function(A){C.postMessage({sourceName:q,targetName:U,stream:8,streamId:G,reason:D(A)})})}_processStreamMessage(T){const G=T.streamId,q=this.sourceName,U=T.sourceName,C=this.comObj,w=this.streamControllers[G],a=this.streamSinks[G];switch(T.stream){case 8:T.success?w.startCall.resolve():w.startCall.reject(D(T.reason));break;case 7:T.success?w.pullCall.resolve():w.pullCall.reject(D(T.reason));break;case 6:if(!a){C.postMessage({sourceName:q,targetName:U,stream:7,streamId:G,success:!0});break}a.desiredSize<=0&&T.desiredSize>0&&a.sinkCapability.resolve(),a.desiredSize=T.desiredSize,new Promise(function(_){_(a.onPull&&a.onPull())}).then(function(){C.postMessage({sourceName:q,targetName:U,stream:7,streamId:G,success:!0})},function(_){C.postMessage({sourceName:q,targetName:U,stream:7,streamId:G,reason:D(_)})});break;case 4:if((0,r.assert)(w,"enqueue should have stream controller"),w.isClosed)break;w.controller.enqueue(T.chunk);break;case 3:if((0,r.assert)(w,"close should have stream controller"),w.isClosed)break;w.isClosed=!0,w.controller.close(),this._deleteStreamController(w,G);break;case 5:(0,r.assert)(w,"error should have stream controller"),w.controller.error(D(T.reason)),this._deleteStreamController(w,G);break;case 2:T.success?w.cancelCall.resolve():w.cancelCall.reject(D(T.reason)),this._deleteStreamController(w,G);break;case 1:if(!a)break;new Promise(function(_){_(a.onCancel&&a.onCancel(D(T.reason)))}).then(function(){C.postMessage({sourceName:q,targetName:U,stream:2,streamId:G,success:!0})},function(_){C.postMessage({sourceName:q,targetName:U,stream:2,streamId:G,reason:D(_)})}),a.sinkCapability.reject(D(T.reason)),a.isCancelled=!0,delete this.streamSinks[G];break;default:throw new Error("Unexpected stream case")}}_deleteStreamController(T,G){var q=this;return _asyncToGenerator(function*(){yield Promise.allSettled([T.startCall&&T.startCall.promise,T.pullCall&&T.pullCall.promise,T.cancelCall&&T.cancelCall.promise]),delete q.streamControllers[G]})()}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}},(Z,s,k)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.Metadata=void 0;var r=k(1),m=new WeakMap,n=new WeakMap;s.Metadata=class D{constructor({parsedData:F,rawData:T}){_classPrivateFieldInitSpec(this,m,{writable:!0,value:void 0}),_classPrivateFieldInitSpec(this,n,{writable:!0,value:void 0}),_classPrivateFieldSet(this,m,F),_classPrivateFieldSet(this,n,T)}getRaw(){return _classPrivateFieldGet(this,n)}get(F){return _classPrivateFieldGet(this,m).get(F)??null}getAll(){return(0,r.objectFromMap)(_classPrivateFieldGet(this,m))}has(F){return _classPrivateFieldGet(this,m).has(F)}}},(Z,s,k)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.OptionalContentConfig=void 0;var r=k(1);const m=Symbol("INTERNAL");var n=new WeakMap;class D{constructor(a,_){_classPrivateFieldInitSpec(this,n,{writable:!0,value:!0}),this.name=a,this.intent=_}get visible(){return _classPrivateFieldGet(this,n)}_setVisible(a,_){a!==m&&(0,r.unreachable)("Internal method `_setVisible` called."),_classPrivateFieldSet(this,n,_)}}var Q=new WeakMap,F=new WeakMap,T=new WeakMap,G=new WeakMap,q=new WeakSet;function C(w){const a=w.length;if(a<2)return!0;const _=w[0];for(let A=1;A<a;A++){const y=w[A];let P;if(Array.isArray(y))P=_classPrivateMethodGet(this,q,C).call(this,y);else{if(!_classPrivateFieldGet(this,F).has(y))return(0,r.warn)(`Optional content group not found: ${y}`),!0;P=_classPrivateFieldGet(this,F).get(y).visible}switch(_){case"And":if(!P)return!1;break;case"Or":if(P)return!0;break;case"Not":return!P;default:return!0}}return"And"===_}s.OptionalContentConfig=class U{constructor(a){if(_classPrivateMethodInitSpec(this,q),_classPrivateFieldInitSpec(this,Q,{writable:!0,value:!0}),_classPrivateFieldInitSpec(this,F,{writable:!0,value:new Map}),_classPrivateFieldInitSpec(this,T,{writable:!0,value:null}),_classPrivateFieldInitSpec(this,G,{writable:!0,value:null}),this.name=null,this.creator=null,null!==a){this.name=a.name,this.creator=a.creator,_classPrivateFieldSet(this,G,a.order);for(const _ of a.groups)_classPrivateFieldGet(this,F).set(_.id,new D(_.name,_.intent));if("OFF"===a.baseState)for(const _ of _classPrivateFieldGet(this,F).values())_._setVisible(m,!1);for(const _ of a.on)_classPrivateFieldGet(this,F).get(_)._setVisible(m,!0);for(const _ of a.off)_classPrivateFieldGet(this,F).get(_)._setVisible(m,!1);_classPrivateFieldSet(this,T,new Map);for(const[_,A]of _classPrivateFieldGet(this,F))_classPrivateFieldGet(this,T).set(_,A.visible)}}isVisible(a){if(0===_classPrivateFieldGet(this,F).size)return!0;if(!a)return(0,r.warn)("Optional content group not defined."),!0;if("OCG"===a.type)return _classPrivateFieldGet(this,F).has(a.id)?_classPrivateFieldGet(this,F).get(a.id).visible:((0,r.warn)(`Optional content group not found: ${a.id}`),!0);if("OCMD"===a.type){if(a.expression)return _classPrivateMethodGet(this,q,C).call(this,a.expression);if(!a.policy||"AnyOn"===a.policy){for(const _ of a.ids){if(!_classPrivateFieldGet(this,F).has(_))return(0,r.warn)(`Optional content group not found: ${_}`),!0;if(_classPrivateFieldGet(this,F).get(_).visible)return!0}return!1}if("AllOn"===a.policy){for(const _ of a.ids){if(!_classPrivateFieldGet(this,F).has(_))return(0,r.warn)(`Optional content group not found: ${_}`),!0;if(!_classPrivateFieldGet(this,F).get(_).visible)return!1}return!0}if("AnyOff"===a.policy){for(const _ of a.ids){if(!_classPrivateFieldGet(this,F).has(_))return(0,r.warn)(`Optional content group not found: ${_}`),!0;if(!_classPrivateFieldGet(this,F).get(_).visible)return!0}return!1}if("AllOff"===a.policy){for(const _ of a.ids){if(!_classPrivateFieldGet(this,F).has(_))return(0,r.warn)(`Optional content group not found: ${_}`),!0;if(_classPrivateFieldGet(this,F).get(_).visible)return!1}return!0}return(0,r.warn)(`Unknown optional content policy ${a.policy}.`),!0}return(0,r.warn)(`Unknown group type ${a.type}.`),!0}setVisibility(a,_=!0){_classPrivateFieldGet(this,F).has(a)?(_classPrivateFieldGet(this,F).get(a)._setVisible(m,!!_),_classPrivateFieldSet(this,Q,null)):(0,r.warn)(`Optional content group not found: ${a}`)}get hasInitialVisibility(){if(null!==_classPrivateFieldGet(this,Q))return _classPrivateFieldGet(this,Q);for(const[a,_]of _classPrivateFieldGet(this,F)){const A=_classPrivateFieldGet(this,T).get(a);if(_.visible!==A)return _classPrivateFieldSet(this,Q,!1)}return _classPrivateFieldSet(this,Q,!0)}getOrder(){return _classPrivateFieldGet(this,F).size?_classPrivateFieldGet(this,G)?_classPrivateFieldGet(this,G).slice():[..._classPrivateFieldGet(this,F).keys()]:null}getGroups(){return _classPrivateFieldGet(this,F).size>0?(0,r.objectFromMap)(_classPrivateFieldGet(this,F)):null}getGroup(a){return _classPrivateFieldGet(this,F).get(a)||null}}},(Z,s,k)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.PDFDataTransportStream=void 0;var r=k(1),m=k(8);s.PDFDataTransportStream=class n{constructor(T,G){(0,r.assert)(G,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=T.progressiveDone||!1,this._contentDispositionFilename=T.contentDispositionFilename||null;const q=T.initialData;if(q?.length>0){const U=new Uint8Array(q).buffer;this._queuedChunks.push(U)}this._pdfDataRangeTransport=G,this._isStreamingSupported=!T.disableStream,this._isRangeSupported=!T.disableRange,this._contentLength=T.length,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((U,C)=>{this._onReceiveData({begin:U,chunk:C})}),this._pdfDataRangeTransport.addProgressListener((U,C)=>{this._onProgress({loaded:U,total:C})}),this._pdfDataRangeTransport.addProgressiveReadListener(U=>{this._onReceiveData({chunk:U})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData(T){const G=new Uint8Array(T.chunk).buffer;if(void 0===T.begin)this._fullRequestReader?this._fullRequestReader._enqueue(G):this._queuedChunks.push(G);else{const q=this._rangeReaders.some(function(U){return U._begin===T.begin&&(U._enqueue(G),!0)});(0,r.assert)(q,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(T){if(void 0===T.total){const G=this._rangeReaders[0];G?.onProgress&&G.onProgress({loaded:T.loaded})}else{const G=this._fullRequestReader;G?.onProgress&&G.onProgress({loaded:T.loaded,total:T.total})}}_onProgressiveDone(){this._fullRequestReader&&this._fullRequestReader.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(T){const G=this._rangeReaders.indexOf(T);G>=0&&this._rangeReaders.splice(G,1)}getFullReader(){(0,r.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const T=this._queuedChunks;return this._queuedChunks=null,new D(this,T,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(T,G){if(G<=this._progressiveDataLength)return null;const q=new Q(this,T,G);return this._pdfDataRangeTransport.requestDataRange(T,G),this._rangeReaders.push(q),q}cancelAllRequests(T){this._fullRequestReader&&this._fullRequestReader.cancel(T);for(const G of this._rangeReaders.slice(0))G.cancel(T);this._pdfDataRangeTransport.abort()}};class D{constructor(T,G,q=!1,U=null){this._stream=T,this._done=q||!1,this._filename=(0,m.isPdfFile)(U)?U:null,this._queuedChunks=G||[],this._loaded=0;for(const C of this._queuedChunks)this._loaded+=C.byteLength;this._requests=[],this._headersReady=Promise.resolve(),T._fullRequestReader=this,this.onProgress=null}_enqueue(T){this._done||(this._requests.length>0?this._requests.shift().resolve({value:T,done:!1}):this._queuedChunks.push(T),this._loaded+=T.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}read(){var T=this;return _asyncToGenerator(function*(){if(T._queuedChunks.length>0)return{value:T._queuedChunks.shift(),done:!1};if(T._done)return{value:void 0,done:!0};const G=(0,r.createPromiseCapability)();return T._requests.push(G),G.promise})()}cancel(T){this._done=!0;for(const G of this._requests)G.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class Q{constructor(T,G,q){this._stream=T,this._begin=G,this._end=q,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(T){if(!this._done){if(0===this._requests.length)this._queuedChunk=T;else{this._requests.shift().resolve({value:T,done:!1});for(const q of this._requests)q.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}read(){var T=this;return _asyncToGenerator(function*(){if(T._queuedChunk){const q=T._queuedChunk;return T._queuedChunk=null,{value:q,done:!1}}if(T._done)return{value:void 0,done:!0};const G=(0,r.createPromiseCapability)();return T._requests.push(G),G.promise})()}cancel(T){this._done=!0;for(const G of this._requests)G.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(Z,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.XfaText=void 0;class k{static textContent(m){const n=[],D={items:n,styles:Object.create(null)};return function Q(F){if(!F)return;let T=null;const G=F.name;if("#text"===G)T=F.value;else{if(!k.shouldBuildText(G))return;F?.attributes?.textContent?T=F.attributes.textContent:F.value&&(T=F.value)}if(null!==T&&n.push({str:T}),F.children)for(const q of F.children)Q(q)}(m),D}static shouldBuildText(m){return!("textarea"===m||"input"===m||"option"===m||"select"===m)}}s.XfaText=k},(Z,s,k)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.NodeStandardFontDataFactory=s.NodeCanvasFactory=s.NodeCMapReaderFactory=void 0;var r=k(9);const m=function(F){return new Promise((T,G)=>{__webpack_require__(172).readFile(F,(U,C)=>{!U&&C?T(new Uint8Array(C)):G(new Error(U))})})};s.NodeCanvasFactory=class n extends r.BaseCanvasFactory{_createCanvas(T,G){return __webpack_require__(3414).createCanvas(T,G)}},s.NodeCMapReaderFactory=class D extends r.BaseCMapReaderFactory{_fetchData(T,G){return m(T).then(q=>({cMapData:q,compressionType:G}))}},s.NodeStandardFontDataFactory=class Q extends r.BaseStandardFontDataFactory{_fetchData(T){return m(T)}}},(Z,s,k)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.AnnotationEditorLayer=void 0;var r=k(7),m=k(1),n=k(23),D=k(24);s.AnnotationEditorLayer=(()=>{var F=new WeakMap,T=new WeakMap,G=new WeakMap,q=new WeakMap,U=new WeakMap,C=new WeakMap,w=new WeakMap,a=new WeakMap,_=new WeakSet,A=new WeakSet,y=new WeakSet,P=new WeakSet;class u{constructor(p){_classPrivateMethodInitSpec(this,P),_classPrivateMethodInitSpec(this,y),_classPrivateMethodInitSpec(this,A),_classPrivateMethodInitSpec(this,_),_classPrivateFieldInitSpec(this,F,{writable:!0,value:void 0}),_classPrivateFieldInitSpec(this,T,{writable:!0,value:!1}),_classPrivateFieldInitSpec(this,G,{writable:!0,value:this.pointerup.bind(this)}),_classPrivateFieldInitSpec(this,q,{writable:!0,value:this.pointerdown.bind(this)}),_classPrivateFieldInitSpec(this,U,{writable:!0,value:new Map}),_classPrivateFieldInitSpec(this,C,{writable:!0,value:!1}),_classPrivateFieldInitSpec(this,w,{writable:!0,value:!1}),_classPrivateFieldInitSpec(this,a,{writable:!0,value:void 0}),u._initialized||(u._initialized=!0,n.FreeTextEditor.initialize(p.l10n),D.InkEditor.initialize(p.l10n),p.uiManager.registerEditorTypes([n.FreeTextEditor,D.InkEditor])),_classPrivateFieldSet(this,a,p.uiManager),this.annotationStorage=p.annotationStorage,this.pageIndex=p.pageIndex,this.div=p.div,_classPrivateFieldSet(this,F,p.accessibilityManager),_classPrivateFieldGet(this,a).addLayer(this)}updateToolbar(p){_classPrivateFieldGet(this,a).updateToolbar(p)}updateMode(p=_classPrivateFieldGet(this,a).getMode()){_classPrivateMethodGet(this,P,v).call(this),p===m.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),_classPrivateFieldGet(this,a).unselectAll()}addInkEditorIfNeeded(p){if(p||_classPrivateFieldGet(this,a).getMode()===m.AnnotationEditorType.INK){if(!p)for(const b of _classPrivateFieldGet(this,U).values())if(b.isEmpty())return void b.setInBackground();_classPrivateMethodGet(this,y,o).call(this,{offsetX:0,offsetY:0}).setInBackground()}}setEditingState(p){_classPrivateFieldGet(this,a).setEditingState(p)}addCommands(p){_classPrivateFieldGet(this,a).addCommands(p)}enable(){this.div.style.pointerEvents="auto";for(const p of _classPrivateFieldGet(this,U).values())p.enableEditing()}disable(){this.div.style.pointerEvents="none";for(const p of _classPrivateFieldGet(this,U).values())p.disableEditing()}setActiveEditor(p){_classPrivateFieldGet(this,a).getActive()!==p&&_classPrivateFieldGet(this,a).setActiveEditor(p)}enableClick(){this.div.addEventListener("pointerdown",_classPrivateFieldGet(this,q)),this.div.addEventListener("pointerup",_classPrivateFieldGet(this,G))}disableClick(){this.div.removeEventListener("pointerdown",_classPrivateFieldGet(this,q)),this.div.removeEventListener("pointerup",_classPrivateFieldGet(this,G))}attach(p){_classPrivateFieldGet(this,U).set(p.id,p)}detach(p){_classPrivateFieldGet(this,U).delete(p.id),_classPrivateFieldGet(this,F)?.removePointerInTextLayer(p.contentDiv)}remove(p){_classPrivateFieldGet(this,a).removeEditor(p),this.detach(p),this.annotationStorage.remove(p.id),p.div.style.display="none",setTimeout(()=>{p.div.style.display="",p.div.remove(),p.isAttachedToDOM=!1,document.activeElement===document.body&&_classPrivateFieldGet(this,a).focusMainContainer()},0),_classPrivateFieldGet(this,w)||this.addInkEditorIfNeeded(!1)}add(p){if(_classPrivateMethodGet(this,_,t).call(this,p),_classPrivateFieldGet(this,a).addEditor(p),this.attach(p),!p.isAttachedToDOM){const c=p.render();this.div.append(c),p.isAttachedToDOM=!0}this.moveEditorInDOM(p),p.onceAdded(),this.addToAnnotationStorage(p)}moveEditorInDOM(p){_classPrivateFieldGet(this,F)?.moveElementInDOM(this.div,p.div,p.contentDiv,!0)}addToAnnotationStorage(p){!p.isEmpty()&&!this.annotationStorage.has(p.id)&&this.annotationStorage.setValue(p.id,p)}addOrRebuild(p){p.needsToBeRebuilt()?p.rebuild():this.add(p)}addANewEditor(p){this.addCommands({cmd:()=>{this.addOrRebuild(p)},undo:()=>{p.remove()},mustExec:!0})}addUndoableEditor(p){this.addCommands({cmd:()=>{this.addOrRebuild(p)},undo:()=>{p.remove()},mustExec:!1})}getNextId(){return _classPrivateFieldGet(this,a).getId()}deserialize(p){switch(p.annotationType){case m.AnnotationEditorType.FREETEXT:return n.FreeTextEditor.deserialize(p,this);case m.AnnotationEditorType.INK:return D.InkEditor.deserialize(p,this)}return null}setSelected(p){_classPrivateFieldGet(this,a).setSelected(p)}toggleSelected(p){_classPrivateFieldGet(this,a).toggleSelected(p)}isSelected(p){return _classPrivateFieldGet(this,a).isSelected(p)}unselect(p){_classPrivateFieldGet(this,a).unselect(p)}pointerup(p){if(!(0!==p.button||p.ctrlKey&&r.KeyboardManager.platform.isMac)&&p.target===this.div&&_classPrivateFieldGet(this,C)){if(_classPrivateFieldSet(this,C,!1),!_classPrivateFieldGet(this,T))return void _classPrivateFieldSet(this,T,!0);_classPrivateMethodGet(this,y,o).call(this,p)}}pointerdown(p){if(0!==p.button||p.ctrlKey&&r.KeyboardManager.platform.isMac||p.target!==this.div)return;_classPrivateFieldSet(this,C,!0);const b=_classPrivateFieldGet(this,a).getActive();_classPrivateFieldSet(this,T,!b||b.isEmpty())}drop(p){const c=p.dataTransfer.getData("text/plain"),b=_classPrivateFieldGet(this,a).getEditor(c);if(!b)return;p.preventDefault(),p.dataTransfer.dropEffect="move",_classPrivateMethodGet(this,_,t).call(this,b);const N=this.div.getBoundingClientRect();b.translate(p.clientX-N.x-b.startX,p.clientY-N.y-b.startY),this.moveEditorInDOM(b),b.div.focus()}dragover(p){p.preventDefault()}destroy(){_classPrivateFieldGet(this,a).getActive()?.parent===this&&_classPrivateFieldGet(this,a).setActiveEditor(null);for(const p of _classPrivateFieldGet(this,U).values())_classPrivateFieldGet(this,F)?.removePointerInTextLayer(p.contentDiv),p.isAttachedToDOM=!1,p.div.remove(),p.parent=null;this.div=null,_classPrivateFieldGet(this,U).clear(),_classPrivateFieldGet(this,a).removeLayer(this)}render(p){this.viewport=p.viewport,(0,r.bindEvents)(this,this.div,["dragover","drop"]),this.setDimensions();for(const c of _classPrivateFieldGet(this,a).getEditors(this.pageIndex))this.add(c);this.updateMode()}update(p){this.viewport=p.viewport,this.setDimensions(),this.updateMode()}get scaleFactor(){return this.viewport.scale}get pageDimensions(){const[p,c,b,N]=this.viewport.viewBox;return[b-p,N-c]}get viewportBaseDimensions(){const{width:p,height:c,rotation:b}=this.viewport;return b%180==0?[p,c]:[c,p]}setDimensions(){const{width:p,height:c,rotation:b}=this.viewport,N=b%180!=0,I=Math.floor(p)+"px",Y=Math.floor(c)+"px";this.div.style.width=N?Y:I,this.div.style.height=N?I:Y,this.div.setAttribute("data-main-rotation",b)}}function t(S){S.parent!==this&&(this.attach(S),S.pageIndex=this.pageIndex,S.parent?.detach(S),S.parent=this,S.div&&S.isAttachedToDOM&&(S.div.remove(),this.div.append(S.div)))}function e(S){switch(_classPrivateFieldGet(this,a).getMode()){case m.AnnotationEditorType.FREETEXT:return new n.FreeTextEditor(S);case m.AnnotationEditorType.INK:return new D.InkEditor(S)}return null}function o(S){const p=this.getNextId(),c=_classPrivateMethodGet(this,A,e).call(this,{parent:this,id:p,x:S.offsetX,y:S.offsetY});return c&&this.add(c),c}function v(){_classPrivateFieldSet(this,w,!0);for(const S of _classPrivateFieldGet(this,U).values())S.isEmpty()&&S.remove();_classPrivateFieldSet(this,w,!1)}return _defineProperty(u,"_initialized",!1),u})()},(Z,s,k)=>{var r;Object.defineProperty(s,"__esModule",{value:!0}),s.FreeTextEditor=void 0;var m=k(1),n=k(7),D=k(6),Q=new WeakMap,F=new WeakMap,T=new WeakMap,G=new WeakMap,q=new WeakMap,U=new WeakMap,C=new WeakMap,w=new WeakSet,a=new WeakSet,_=new WeakSet,A=new WeakSet;class y extends D.AnnotationEditor{constructor(v){super({...v,name:"freeTextEditor"}),_classPrivateMethodInitSpec(this,A),_classPrivateMethodInitSpec(this,_),_classPrivateMethodInitSpec(this,a),_classPrivateMethodInitSpec(this,w),_classPrivateFieldInitSpec(this,Q,{writable:!0,value:this.editorDivBlur.bind(this)}),_classPrivateFieldInitSpec(this,F,{writable:!0,value:this.editorDivFocus.bind(this)}),_classPrivateFieldInitSpec(this,T,{writable:!0,value:this.editorDivKeydown.bind(this)}),_classPrivateFieldInitSpec(this,G,{writable:!0,value:void 0}),_classPrivateFieldInitSpec(this,q,{writable:!0,value:""}),_classPrivateFieldInitSpec(this,U,{writable:!0,value:!1}),_classPrivateFieldInitSpec(this,C,{writable:!0,value:void 0}),_classPrivateFieldSet(this,G,v.color||y._defaultColor||D.AnnotationEditor._defaultLineColor),_classPrivateFieldSet(this,C,v.fontSize||y._defaultFontSize)}static initialize(v){this._l10nPromise=new Map(["free_text_default_content","editor_free_text_aria_label"].map(p=>[p,v.get(p)]));const S=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(S.getPropertyValue("--freetext-padding"))}static updateDefaultParams(v,S){switch(v){case m.AnnotationEditorParamsType.FREETEXT_SIZE:y._defaultFontSize=S;break;case m.AnnotationEditorParamsType.FREETEXT_COLOR:y._defaultColor=S}}updateParams(v,S){switch(v){case m.AnnotationEditorParamsType.FREETEXT_SIZE:_classPrivateMethodGet(this,w,P).call(this,S);break;case m.AnnotationEditorParamsType.FREETEXT_COLOR:_classPrivateMethodGet(this,a,u).call(this,S)}}static get defaultPropertiesToUpdate(){return[[m.AnnotationEditorParamsType.FREETEXT_SIZE,y._defaultFontSize],[m.AnnotationEditorParamsType.FREETEXT_COLOR,y._defaultColor||D.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[m.AnnotationEditorParamsType.FREETEXT_SIZE,_classPrivateFieldGet(this,C)],[m.AnnotationEditorParamsType.FREETEXT_COLOR,_classPrivateFieldGet(this,G)]]}getInitialTranslation(){return[-y._internalPadding*this.parent.scaleFactor,-(y._internalPadding+_classPrivateFieldGet(this,C))*this.parent.scaleFactor]}rebuild(){super.rebuild(),null!==this.div&&(this.isAttachedToDOM||this.parent.add(this))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(m.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.enableEditing(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this.div.draggable=!1,this.editorDiv.addEventListener("keydown",_classPrivateFieldGet(this,T)),this.editorDiv.addEventListener("focus",_classPrivateFieldGet(this,F)),this.editorDiv.addEventListener("blur",_classPrivateFieldGet(this,Q)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.disableEditing(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.draggable=!0,this.editorDiv.removeEventListener("keydown",_classPrivateFieldGet(this,T)),this.editorDiv.removeEventListener("focus",_classPrivateFieldGet(this,F)),this.editorDiv.removeEventListener("blur",_classPrivateFieldGet(this,Q)),this.div.focus(),this.isEditing=!1)}focusin(v){super.focusin(v),v.target!==this.editorDiv&&this.editorDiv.focus()}onceAdded(){this.width||(this.enableEditMode(),this.editorDiv.focus())}isEmpty(){return!this.editorDiv||""===this.editorDiv.innerText.trim()}remove(){this.isEditing=!1,this.parent.setEditingState(!0),super.remove()}commit(){super.commit(),_classPrivateFieldGet(this,U)||(_classPrivateFieldSet(this,U,!0),this.parent.addUndoableEditor(this)),this.disableEditMode(),_classPrivateFieldSet(this,q,_classPrivateMethodGet(this,_,t).call(this).trimEnd()),_classPrivateMethodGet(this,A,e).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}dblclick(v){this.enableEditMode(),this.editorDiv.focus()}keydown(v){v.target===this.div&&"Enter"===v.key&&(this.enableEditMode(),this.editorDiv.focus())}editorDivKeydown(v){y._keyboardManager.exec(this,v)}editorDivFocus(v){this.isEditing=!0}editorDivBlur(v){this.isEditing=!1}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let v,S;this.width&&(v=this.x,S=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",`${this.id}-editor`),this.enableEditing(),y._l10nPromise.get("editor_free_text_aria_label").then(c=>this.editorDiv?.setAttribute("aria-label",c)),y._l10nPromise.get("free_text_default_content").then(c=>this.editorDiv?.setAttribute("default-content",c)),this.editorDiv.contentEditable=!0;const{style:p}=this.editorDiv;if(p.fontSize=`calc(${_classPrivateFieldGet(this,C)}px * var(--scale-factor))`,p.color=_classPrivateFieldGet(this,G),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,n.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[c,b]=this.parent.viewportBaseDimensions;this.setAt(v*c,S*b,this.width*c,this.height*b);for(const N of _classPrivateFieldGet(this,q).split("\n")){const I=document.createElement("div");I.append(N?document.createTextNode(N):document.createElement("br")),this.editorDiv.append(I)}this.div.draggable=!0,this.editorDiv.contentEditable=!1}else this.div.draggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(v,S){const p=super.deserialize(v,S);return _classPrivateFieldSet(p,C,v.fontSize),_classPrivateFieldSet(p,G,m.Util.makeHexColor(...v.color)),_classPrivateFieldSet(p,q,v.value),p}serialize(){if(this.isEmpty())return null;const v=y._internalPadding*this.parent.scaleFactor,S=this.getRect(v,v),p=D.AnnotationEditor._colorManager.convert(getComputedStyle(this.editorDiv).color);return{annotationType:m.AnnotationEditorType.FREETEXT,color:p,fontSize:_classPrivateFieldGet(this,C),value:_classPrivateFieldGet(this,q),pageIndex:this.parent.pageIndex,rect:S,rotation:this.rotation}}}function P(o){const v=p=>{this.editorDiv.style.fontSize=`calc(${p}px * var(--scale-factor))`,this.translate(0,-(p-_classPrivateFieldGet(this,C))*this.parent.scaleFactor),_classPrivateFieldSet(this,C,p),_classPrivateMethodGet(this,A,e).call(this)},S=_classPrivateFieldGet(this,C);this.parent.addCommands({cmd:()=>{v(o)},undo:()=>{v(S)},mustExec:!0,type:m.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}function u(o){const v=_classPrivateFieldGet(this,G);this.parent.addCommands({cmd:()=>{_classPrivateFieldSet(this,G,o),this.editorDiv.style.color=o},undo:()=>{_classPrivateFieldSet(this,G,v),this.editorDiv.style.color=v},mustExec:!0,type:m.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}function t(){const o=this.editorDiv.getElementsByTagName("div");if(0===o.length)return this.editorDiv.innerText;const v=[];for(let S=0,p=o.length;S<p;S++){const b=o[S].firstChild;v.push("#text"===b?.nodeName?b.data:"")}return v.join("\n")}function e(){const[o,v]=this.parent.viewportBaseDimensions,S=this.div.getBoundingClientRect();this.width=S.width/o,this.height=S.height/v}r=y,_defineProperty(y,"_freeTextDefaultContent",""),_defineProperty(y,"_l10nPromise",void 0),_defineProperty(y,"_internalPadding",0),_defineProperty(y,"_defaultColor",null),_defineProperty(y,"_defaultFontSize",10),_defineProperty(y,"_keyboardManager",new n.KeyboardManager([[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],r.prototype.commitOrRemove]])),_defineProperty(y,"_type","freetext"),s.FreeTextEditor=y},(Z,s,k)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.InkEditor=void 0,Object.defineProperty(s,"fitCurve",{enumerable:!0,get:function(){return n.fitCurve}});var r=k(1),m=k(6),n=k(25),D=k(7);const Q=16;s.InkEditor=(()=>{var T,G=new WeakMap,q=new WeakMap,U=new WeakMap,C=new WeakMap,w=new WeakMap,a=new WeakMap,_=new WeakMap,A=new WeakMap,y=new WeakMap,P=new WeakMap,u=new WeakMap,t=new WeakMap,e=new WeakMap,o=new WeakMap,v=new WeakSet,S=new WeakSet,p=new WeakSet,c=new WeakSet,b=new WeakSet,N=new WeakSet,I=new WeakSet,Y=new WeakSet,W=new WeakSet,j=new WeakSet,z=new WeakSet,ee=new WeakSet,oe=new WeakSet,V=new WeakSet,g=new WeakSet,l=new WeakSet,x=new WeakSet,L=new WeakSet,E=new WeakSet,i=new WeakSet,h=new WeakSet,d=new WeakSet;class O extends m.AnnotationEditor{constructor(se){super({...se,name:"inkEditor"}),_classPrivateMethodInitSpec(this,d),_classPrivateMethodInitSpec(this,h),_classPrivateMethodInitSpec(this,i),_classPrivateMethodInitSpec(this,E),_classPrivateMethodInitSpec(this,L),_classPrivateMethodInitSpec(this,x),_classPrivateMethodInitSpec(this,l),_classPrivateMethodInitSpec(this,g),_classPrivateMethodInitSpec(this,V),_classPrivateMethodInitSpec(this,oe),_classPrivateMethodInitSpec(this,ee),_classPrivateMethodInitSpec(this,z),_classPrivateMethodInitSpec(this,j),_classPrivateMethodInitSpec(this,W),_classPrivateMethodInitSpec(this,Y),_classPrivateMethodInitSpec(this,I),_classPrivateMethodInitSpec(this,N),_classPrivateMethodInitSpec(this,b),_classPrivateMethodInitSpec(this,c),_classPrivateMethodInitSpec(this,p),_classPrivateMethodInitSpec(this,S),_classPrivateMethodInitSpec(this,v),_classPrivateFieldInitSpec(this,G,{writable:!0,value:0}),_classPrivateFieldInitSpec(this,q,{writable:!0,value:0}),_classPrivateFieldInitSpec(this,U,{writable:!0,value:0}),_classPrivateFieldInitSpec(this,C,{writable:!0,value:this.canvasPointermove.bind(this)}),_classPrivateFieldInitSpec(this,w,{writable:!0,value:this.canvasPointerleave.bind(this)}),_classPrivateFieldInitSpec(this,a,{writable:!0,value:this.canvasPointerup.bind(this)}),_classPrivateFieldInitSpec(this,_,{writable:!0,value:this.canvasPointerdown.bind(this)}),_classPrivateFieldInitSpec(this,A,{writable:!0,value:!1}),_classPrivateFieldInitSpec(this,y,{writable:!0,value:!1}),_classPrivateFieldInitSpec(this,P,{writable:!0,value:null}),_classPrivateFieldInitSpec(this,u,{writable:!0,value:null}),_classPrivateFieldInitSpec(this,t,{writable:!0,value:0}),_classPrivateFieldInitSpec(this,e,{writable:!0,value:0}),_classPrivateFieldInitSpec(this,o,{writable:!0,value:null}),this.color=se.color||null,this.thickness=se.thickness||null,this.opacity=se.opacity||null,this.paths=[],this.bezierPath2D=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0}static initialize(se){this._l10nPromise=new Map(["editor_ink_canvas_aria_label","editor_ink_aria_label"].map(X=>[X,se.get(X)]))}static updateDefaultParams(se,X){switch(se){case r.AnnotationEditorParamsType.INK_THICKNESS:O._defaultThickness=X;break;case r.AnnotationEditorParamsType.INK_COLOR:O._defaultColor=X;break;case r.AnnotationEditorParamsType.INK_OPACITY:O._defaultOpacity=X/100}}updateParams(se,X){switch(se){case r.AnnotationEditorParamsType.INK_THICKNESS:_classPrivateMethodGet(this,v,R).call(this,X);break;case r.AnnotationEditorParamsType.INK_COLOR:_classPrivateMethodGet(this,S,$).call(this,X);break;case r.AnnotationEditorParamsType.INK_OPACITY:_classPrivateMethodGet(this,p,K).call(this,X)}}static get defaultPropertiesToUpdate(){return[[r.AnnotationEditorParamsType.INK_THICKNESS,O._defaultThickness],[r.AnnotationEditorParamsType.INK_COLOR,O._defaultColor||m.AnnotationEditor._defaultLineColor],[r.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*O._defaultOpacity)]]}get propertiesToUpdate(){return[[r.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||O._defaultThickness],[r.AnnotationEditorParamsType.INK_COLOR,this.color||O._defaultColor||m.AnnotationEditor._defaultLineColor],[r.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??O._defaultOpacity))]]}rebuild(){super.rebuild(),null!==this.div&&(this.canvas||(_classPrivateMethodGet(this,z,_e).call(this),_classPrivateMethodGet(this,ee,ae).call(this)),this.isAttachedToDOM||(this.parent.add(this),_classPrivateMethodGet(this,oe,ue).call(this)),_classPrivateMethodGet(this,h,B).call(this))}remove(){null!==this.canvas&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,_classPrivateFieldGet(this,u).disconnect(),_classPrivateFieldSet(this,u,null),super.remove())}enableEditMode(){_classPrivateFieldGet(this,A)||null===this.canvas||(super.enableEditMode(),this.div.draggable=!1,this.canvas.addEventListener("pointerdown",_classPrivateFieldGet(this,_)),this.canvas.addEventListener("pointerup",_classPrivateFieldGet(this,a)))}disableEditMode(){!this.isInEditMode()||null===this.canvas||(super.disableEditMode(),this.div.draggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",_classPrivateFieldGet(this,_)),this.canvas.removeEventListener("pointerup",_classPrivateFieldGet(this,a)))}onceAdded(){this.div.draggable=!this.isEmpty()}isEmpty(){return 0===this.paths.length||1===this.paths.length&&0===this.paths[0].length}commit(){_classPrivateFieldGet(this,A)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),_classPrivateFieldSet(this,A,!0),this.div.classList.add("disabled"),_classPrivateMethodGet(this,h,B).call(this,!0),this.parent.addInkEditorIfNeeded(!0),this.parent.moveEditorInDOM(this),this.div.focus())}focusin(se){super.focusin(se),this.enableEditMode()}canvasPointerdown(se){0!==se.button||!this.isInEditMode()||_classPrivateFieldGet(this,A)||(this.setInForeground(),"mouse"!==se.type&&this.div.focus(),se.stopPropagation(),this.canvas.addEventListener("pointerleave",_classPrivateFieldGet(this,w)),this.canvas.addEventListener("pointermove",_classPrivateFieldGet(this,C)),_classPrivateMethodGet(this,N,de).call(this,se.offsetX,se.offsetY))}canvasPointermove(se){se.stopPropagation(),_classPrivateMethodGet(this,I,me).call(this,se.offsetX,se.offsetY)}canvasPointerup(se){0===se.button&&this.isInEditMode()&&0!==this.currentPath.length&&(se.stopPropagation(),_classPrivateMethodGet(this,j,Ae).call(this,se),this.setInBackground())}canvasPointerleave(se){_classPrivateMethodGet(this,j,Ae).call(this,se),this.setInBackground()}render(){if(this.div)return this.div;let se,X;this.width&&(se=this.x,X=this.y),super.render(),O._l10nPromise.get("editor_ink_aria_label").then(le=>this.div?.setAttribute("aria-label",le));const[J,H,f,M]=_classPrivateMethodGet(this,c,ce).call(this);if(this.setAt(J,H,0,0),this.setDims(f,M),_classPrivateMethodGet(this,z,_e).call(this),this.width){const[le,ve]=this.parent.viewportBaseDimensions;this.setAt(se*le,X*ve,this.width*le,this.height*ve),_classPrivateFieldSet(this,y,!0),_classPrivateMethodGet(this,oe,ue).call(this),this.setDims(this.width*le,this.height*ve),_classPrivateMethodGet(this,W,fe).call(this),_classPrivateMethodGet(this,d,ne).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return _classPrivateMethodGet(this,ee,ae).call(this),this.div}setDimensions(se,X){const J=Math.round(se),H=Math.round(X);if(_classPrivateFieldGet(this,t)===J&&_classPrivateFieldGet(this,e)===H)return;_classPrivateFieldSet(this,t,J),_classPrivateFieldSet(this,e,H),this.canvas.style.visibility="hidden",_classPrivateFieldGet(this,G)&&Math.abs(_classPrivateFieldGet(this,G)-se/X)>.01&&(X=Math.ceil(se/_classPrivateFieldGet(this,G)),this.setDims(se,X));const[f,M]=this.parent.viewportBaseDimensions;this.width=se/f,this.height=X/M,_classPrivateFieldGet(this,A)&&_classPrivateMethodGet(this,V,we).call(this,se,X),_classPrivateMethodGet(this,oe,ue).call(this),_classPrivateMethodGet(this,W,fe).call(this),this.canvas.style.visibility="visible"}static deserialize(se,X){const J=super.deserialize(se,X);J.thickness=se.thickness,J.color=r.Util.makeHexColor(...se.color),J.opacity=se.opacity;const[H,f]=X.pageDimensions,M=J.width*H,le=J.height*f,ve=X.scaleFactor,he=se.thickness/2;_classPrivateFieldSet(J,G,M/le),_classPrivateFieldSet(J,A,!0),_classPrivateFieldSet(J,t,Math.round(M)),_classPrivateFieldSet(J,e,Math.round(le));for(const{bezier:be}of se.paths){const ye=[];J.paths.push(ye);let Ee=ve*(be[0]-he),Te=ve*(le-be[1]-he);for(let Le=2,Oe=be.length;Le<Oe;Le+=6){const Ge=ve*(be[Le+4]-he),Ne=ve*(le-be[Le+5]-he);ye.push([[Ee,Te],[ve*(be[Le]-he),ve*(le-be[Le+1]-he)],[ve*(be[Le+2]-he),ve*(le-be[Le+3]-he)],[Ge,Ne]]),Ee=Ge,Te=Ne}const Re=_classStaticPrivateMethodGet(this,O,Fe).call(this,ye);J.bezierPath2D.push(Re)}const pe=_classPrivateMethodGet(J,E,xe).call(J);return _classPrivateFieldSet(J,U,Math.max(Q,pe[2]-pe[0])),_classPrivateFieldSet(J,q,Math.max(Q,pe[3]-pe[1])),_classPrivateMethodGet(J,V,we).call(J,M,le),J}serialize(){if(this.isEmpty())return null;const se=this.getRect(0,0),X=this.rotation%180==0?se[3]-se[1]:se[2]-se[0],J=m.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:r.AnnotationEditorType.INK,color:J,thickness:this.thickness,opacity:this.opacity,paths:_classPrivateMethodGet(this,l,ge).call(this,this.scaleFactor/this.parent.scaleFactor,this.translationX,this.translationY,X),pageIndex:this.parent.pageIndex,rect:se,rotation:this.rotation}}}function R(re){const se=this.thickness;this.parent.addCommands({cmd:()=>{this.thickness=re,_classPrivateMethodGet(this,h,B).call(this)},undo:()=>{this.thickness=se,_classPrivateMethodGet(this,h,B).call(this)},mustExec:!0,type:r.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})}function $(re){const se=this.color;this.parent.addCommands({cmd:()=>{this.color=re,_classPrivateMethodGet(this,W,fe).call(this)},undo:()=>{this.color=se,_classPrivateMethodGet(this,W,fe).call(this)},mustExec:!0,type:r.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})}function K(re){re/=100;const se=this.opacity;this.parent.addCommands({cmd:()=>{this.opacity=re,_classPrivateMethodGet(this,W,fe).call(this)},undo:()=>{this.opacity=se,_classPrivateMethodGet(this,W,fe).call(this)},mustExec:!0,type:r.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})}function ce(){const{width:re,height:se,rotation:X}=this.parent.viewport;switch(X){case 90:return[0,re,re,se];case 180:return[re,se,re,se];case 270:return[se,0,re,se];default:return[0,0,re,se]}}function te(){this.ctx.lineWidth=this.thickness*this.parent.scaleFactor/this.scaleFactor,this.ctx.lineCap="round",this.ctx.lineJoin="round",this.ctx.miterLimit=10,this.ctx.strokeStyle=`${this.color}${(0,D.opacityToHex)(this.opacity)}`}function de(re,se){this.isEditing=!0,_classPrivateFieldGet(this,y)||(_classPrivateFieldSet(this,y,!0),_classPrivateMethodGet(this,oe,ue).call(this),this.thickness||=T._defaultThickness,this.color||=T._defaultColor||m.AnnotationEditor._defaultLineColor,this.opacity??=T._defaultOpacity),this.currentPath.push([re,se]),_classPrivateFieldSet(this,P,null),_classPrivateMethodGet(this,b,te).call(this),this.ctx.beginPath(),this.ctx.moveTo(re,se),_classPrivateFieldSet(this,o,()=>{_classPrivateFieldGet(this,o)&&(_classPrivateFieldGet(this,P)&&(this.isEmpty()?(this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)):_classPrivateMethodGet(this,W,fe).call(this),this.ctx.lineTo(..._classPrivateFieldGet(this,P)),_classPrivateFieldSet(this,P,null),this.ctx.stroke()),window.requestAnimationFrame(_classPrivateFieldGet(this,o)))}),window.requestAnimationFrame(_classPrivateFieldGet(this,o))}function me(re,se){const[X,J]=this.currentPath.at(-1);re===X&&se===J||(this.currentPath.push([re,se]),_classPrivateFieldSet(this,P,[re,se]))}function ie(re,se){this.ctx.closePath(),_classPrivateFieldSet(this,o,null),re=Math.min(Math.max(re,0),this.canvas.width),se=Math.min(Math.max(se,0),this.canvas.height);const[X,J]=this.currentPath.at(-1);let H;if((re!==X||se!==J)&&this.currentPath.push([re,se]),1!==this.currentPath.length)H=(0,n.fitCurve)(this.currentPath,30,null);else{const ve=[re,se];H=[[ve,ve.slice(),ve.slice(),ve]]}const f=_classStaticPrivateMethodGet(T,T,Fe).call(T,H);this.currentPath.length=0,this.parent.addCommands({cmd:()=>{this.paths.push(H),this.bezierPath2D.push(f),this.rebuild()},undo:()=>{this.paths.pop(),this.bezierPath2D.pop(),0===this.paths.length?this.remove():(this.canvas||(_classPrivateMethodGet(this,z,_e).call(this),_classPrivateMethodGet(this,ee,ae).call(this)),_classPrivateMethodGet(this,h,B).call(this))},mustExec:!0})}function fe(){if(this.isEmpty())return void _classPrivateMethodGet(this,g,ke).call(this);_classPrivateMethodGet(this,b,te).call(this);const{canvas:re,ctx:se}=this;se.setTransform(1,0,0,1,0,0),se.clearRect(0,0,re.width,re.height),_classPrivateMethodGet(this,g,ke).call(this);for(const X of this.bezierPath2D)se.stroke(X)}function Ae(re){_classPrivateMethodGet(this,Y,ie).call(this,re.offsetX,re.offsetY),this.canvas.removeEventListener("pointerleave",_classPrivateFieldGet(this,w)),this.canvas.removeEventListener("pointermove",_classPrivateFieldGet(this,C)),this.parent.addToAnnotationStorage(this)}function _e(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",T._l10nPromise.get("editor_ink_canvas_aria_label").then(re=>this.canvas?.setAttribute("aria-label",re)),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")}function ae(){_classPrivateFieldSet(this,u,new ResizeObserver(re=>{const se=re[0].contentRect;se.width&&se.height&&this.setDimensions(se.width,se.height)})),_classPrivateFieldGet(this,u).observe(this.div)}function ue(){if(!_classPrivateFieldGet(this,y))return;const[re,se]=this.parent.viewportBaseDimensions;this.canvas.width=Math.ceil(this.width*re),this.canvas.height=Math.ceil(this.height*se),_classPrivateMethodGet(this,g,ke).call(this)}function we(re,se){const X=_classPrivateMethodGet(this,i,Se).call(this),J=(re-X)/_classPrivateFieldGet(this,U),H=(se-X)/_classPrivateFieldGet(this,q);this.scaleFactor=Math.min(J,H)}function ke(){const re=_classPrivateMethodGet(this,i,Se).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+re,this.translationY*this.scaleFactor+re)}function Fe(re){const se=new Path2D;for(let X=0,J=re.length;X<J;X++){const[H,f,M,le]=re[X];0===X&&se.moveTo(...H),se.bezierCurveTo(f[0],f[1],M[0],M[1],le[0],le[1])}return se}function ge(re,se,X,J){const f=[],M=this.thickness/2;let le,ve;for(const he of this.paths){le=[],ve=[];for(let pe=0,be=he.length;pe<be;pe++){const[ye,Ee,Te,Re]=he[pe],Le=re*(ye[0]+se)+M,Oe=J-re*(ye[1]+X)-M,Ce=re*(Ee[0]+se)+M,Ie=J-re*(Ee[1]+X)-M,Be=re*(Te[0]+se)+M,Ue=J-re*(Te[1]+X)-M,Ge=re*(Re[0]+se)+M,Ne=J-re*(Re[1]+X)-M;0===pe&&(le.push(Le,Oe),ve.push(Le,Oe)),le.push(Ce,Ie,Be,Ue,Ge,Ne),_classPrivateMethodGet(this,x,Pe).call(this,Le,Oe,Ce,Ie,Be,Ue,Ge,Ne,4,ve)}f.push({bezier:le,points:ve})}return f}function Pe(re,se,X,J,H,f,M,le,ve,he){if(_classPrivateMethodGet(this,L,Me).call(this,re,se,X,J,H,f,M,le))he.push(M,le);else{for(let pe=1;pe<ve-1;pe++){const be=pe/ve,ye=1-be;let Ee=be*re+ye*X,Te=be*se+ye*J,Re=be*X+ye*H,Le=be*J+ye*f;Ee=be*Ee+ye*Re,Te=be*Te+ye*Le,Re=be*Re+ye*(be*H+ye*M),Le=be*Le+ye*(be*f+ye*le),Ee=be*Ee+ye*Re,Te=be*Te+ye*Le,he.push(Ee,Te)}he.push(M,le)}}function Me(re,se,X,J,H,f,M,le){const pe=(3*J-2*se-le)**2,ye=(3*f-se-2*le)**2;return Math.max((3*X-2*re-M)**2,(3*H-re-2*M)**2)+Math.max(pe,ye)<=10}function xe(){let re=1/0,se=-1/0,X=1/0,J=-1/0;for(const H of this.paths)for(const[f,M,le,ve]of H){const he=r.Util.bezierBoundingBox(...f,...M,...le,...ve);re=Math.min(re,he[0]),X=Math.min(X,he[1]),se=Math.max(se,he[2]),J=Math.max(J,he[3])}return[re,X,se,J]}function Se(){return _classPrivateFieldGet(this,A)?Math.ceil(this.thickness*this.parent.scaleFactor):0}function B(re=!1){if(this.isEmpty())return;if(!_classPrivateFieldGet(this,A))return void _classPrivateMethodGet(this,W,fe).call(this);const se=_classPrivateMethodGet(this,E,xe).call(this),X=_classPrivateMethodGet(this,i,Se).call(this);_classPrivateFieldSet(this,U,Math.max(Q,se[2]-se[0])),_classPrivateFieldSet(this,q,Math.max(Q,se[3]-se[1]));const J=Math.ceil(X+_classPrivateFieldGet(this,U)*this.scaleFactor),H=Math.ceil(X+_classPrivateFieldGet(this,q)*this.scaleFactor),[f,M]=this.parent.viewportBaseDimensions;this.width=J/f,this.height=H/M,_classPrivateFieldSet(this,G,J/H),_classPrivateMethodGet(this,d,ne).call(this);const le=this.translationX,ve=this.translationY;this.translationX=-se[0],this.translationY=-se[1],_classPrivateMethodGet(this,oe,ue).call(this),_classPrivateMethodGet(this,W,fe).call(this),_classPrivateFieldSet(this,t,J),_classPrivateFieldSet(this,e,H),this.setDims(J,H);const he=re?X/this.scaleFactor/2:0;this.translate(le-this.translationX-he,ve-this.translationY-he)}function ne(){const{style:re}=this.div;_classPrivateFieldGet(this,G)>=1?(re.minHeight="16px",re.minWidth=`${Math.round(_classPrivateFieldGet(this,G)*Q)}px`):(re.minWidth="16px",re.minHeight=`${Math.round(Q/_classPrivateFieldGet(this,G))}px`)}return T=O,_defineProperty(O,"_defaultColor",null),_defineProperty(O,"_defaultOpacity",1),_defineProperty(O,"_defaultThickness",1),_defineProperty(O,"_l10nPromise",void 0),_defineProperty(O,"_type","ink"),O})()},(Z,s,k)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.fitCurve=void 0;const r=k(26);s.fitCurve=r},Z=>{function k(w,a,_,A,y){var u,t,e,o,v,S,p,c,b,N,I,Y,W;if(2===w.length)return Y=U.vectorLen(U.subtract(w[0],w[1]))/3,[u=[w[0],U.addArrays(w[0],U.mulItems(a,Y)),U.addArrays(w[1],U.mulItems(_,Y)),w[1]]];if(t=function Q(w){var _,A,y,a=[];return w.forEach((P,u)=>{_=u?A+U.vectorLen(U.subtract(P,y)):0,a.push(_),A=_,y=P}),a=a.map(P=>P/A)}(w),[u,o,S]=r(w,t,t,a,_,y),0===o||o<A)return[u];if(o<A*A)for(e=t,v=o,p=S,W=0;W<20;W++){if(e=n(u,w,e),[u,o,S]=r(w,t,e,a,_,y),o<A)return[u];if(S===p){let j=o/v;if(j>.9999&&j<1.0001)break}v=o,p=S}return I=[],(c=U.subtract(w[S-1],w[S+1])).every(j=>0===j)&&(c=U.subtract(w[S-1],w[S]),[c[0],c[1]]=[-c[1],c[0]]),b=U.normalize(c),N=U.mulItems(b,-1),(I=I.concat(k(w.slice(0,S+1),a,b,A,y))).concat(k(w.slice(S),N,_,A,y))}function r(w,a,_,A,y,P){var u,t,e;return u=function m(w,a,_,A){var y,P,u,t,e,o,p,c,b,N,I,Y,W,j,z,ee=w[0],oe=w[w.length-1];for(y=[ee,null,null,oe],P=U.zeros_Xx2x2(a.length),I=0,Y=a.length;I<Y;I++)(u=P[I])[0]=U.mulItems(_,3*(j=a[I])*((z=1-j)*z)),u[1]=U.mulItems(A,3*z*(j*j));for(t=[[0,0],[0,0]],e=[0,0],I=0,Y=w.length;I<Y;I++)j=a[I],t[0][0]+=U.dot((u=P[I])[0],u[0]),t[0][1]+=U.dot(u[0],u[1]),t[1][0]+=U.dot(u[0],u[1]),t[1][1]+=U.dot(u[1],u[1]),W=U.subtract(w[I],C.q([ee,ee,oe,oe],j)),e[0]+=U.dot(u[0],W),e[1]+=U.dot(u[1],W);return p=0==(o=t[0][0]*t[1][1]-t[1][0]*t[0][1])?0:(e[0]*t[1][1]-e[1]*t[0][1])/o,c=0===o?0:(t[0][0]*e[1]-t[1][0]*e[0])/o,p<(b=1e-6*(N=U.vectorLen(U.subtract(ee,oe))))||c<b?(y[1]=U.addArrays(ee,U.mulItems(_,N/3)),y[2]=U.addArrays(oe,U.mulItems(A,N/3))):(y[1]=U.addArrays(ee,U.mulItems(_,p)),y[2]=U.addArrays(oe,U.mulItems(A,c))),y}(w,_,A,y),[t,e]=function F(w,a,_){var A,y,P,u,t,e,o,v;y=0,P=Math.floor(w.length/2);const S=T(a,10);for(t=0,e=w.length;t<e;t++)o=w[t],v=G(0,_[t],S,10),(A=(u=U.subtract(C.q(a,v),o))[0]*u[0]+u[1]*u[1])>y&&(y=A,P=t);return[y,P]}(w,u,a),P&&P({bez:u,points:w,params:a,maxErr:t,maxPoint:e}),[u,t,e]}function n(w,a,_){return _.map((A,y)=>function D(w,a,_){var A=U.subtract(C.q(w,_),a),y=C.qprime(w,_),P=U.mulMatrix(A,y),u=U.sum(U.squareItems(y))+2*U.mulMatrix(A,C.qprimeprime(w,_));return 0===u?_:_-P/u}(w,a[y],A))}var T=function(w,a){for(var _,A=[0],y=w[0],P=0,u=1;u<=a;u++)_=C.q(w,u/a),P+=U.vectorLen(U.subtract(_,y)),A.push(P),y=_;return A.map(t=>t/P)};function G(w,a,_,A){if(a<0)return 0;if(a>1)return 1;for(var P,t,e,o=1;o<=A;o++)if(a<=_[o]){e=(a-(P=_[o-1]))/(_[o]-P)*(o/A-(t=(o-1)/A))+t;break}return e}function q(w,a){return U.normalize(U.subtract(w,a))}class U{static zeros_Xx2x2(a){for(var _=[];a--;)_.push([0,0]);return _}static mulItems(a,_){return a.map(A=>A*_)}static mulMatrix(a,_){return a.reduce((A,y,P)=>A+y*_[P],0)}static subtract(a,_){return a.map((A,y)=>A-_[y])}static addArrays(a,_){return a.map((A,y)=>A+_[y])}static addItems(a,_){return a.map(A=>A+_)}static sum(a){return a.reduce((_,A)=>_+A)}static dot(a,_){return U.mulMatrix(a,_)}static vectorLen(a){return Math.hypot(...a)}static divItems(a,_){return a.map(A=>A/_)}static squareItems(a){return a.map(_=>_*_)}static normalize(a){return this.divItems(a,this.vectorLen(a))}}class C{static q(a,_){var A=1-_,y=U.mulItems(a[0],A*A*A),P=U.mulItems(a[1],3*A*A*_),u=U.mulItems(a[2],3*A*_*_),t=U.mulItems(a[3],_*_*_);return U.addArrays(U.addArrays(y,P),U.addArrays(u,t))}static qprime(a,_){var A=1-_,y=U.mulItems(U.subtract(a[1],a[0]),3*A*A),P=U.mulItems(U.subtract(a[2],a[1]),6*A*_),u=U.mulItems(U.subtract(a[3],a[2]),3*_*_);return U.addArrays(U.addArrays(y,P),u)}static qprimeprime(a,_){return U.addArrays(U.mulItems(U.addArrays(U.subtract(a[2],U.mulItems(a[1],2)),a[0]),6*(1-_)),U.mulItems(U.addArrays(U.subtract(a[3],U.mulItems(a[2],2)),a[1]),6*_))}}Z.exports=function s(w,a,_){if(!Array.isArray(w))throw new TypeError("First argument should be an array");if(w.forEach(u=>{if(!Array.isArray(u)||u.some(t=>"number"!=typeof t)||u.length!==w[0].length)throw Error("Each point should be an array of numbers. Each point should have the same amount of numbers.")}),(w=w.filter((u,t)=>0===t||!u.every((e,o)=>e===w[t-1][o]))).length<2)return[];const A=w.length,y=q(w[1],w[0]),P=q(w[A-2],w[A-1]);return k(w,y,P,a,_)},Z.exports.fitCubic=k,Z.exports.createTangent=q},(Z,s,k)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.AnnotationLayer=void 0;var r=k(1),m=k(8),n=k(5),D=k(28),Q=k(29);const F=1e3,G=new WeakSet;function q(E){return{width:E[2]-E[0],height:E[3]-E[1]}}class U{static create(i){switch(i.data.annotationType){case r.AnnotationType.LINK:return new w(i);case r.AnnotationType.TEXT:return new a(i);case r.AnnotationType.WIDGET:switch(i.data.fieldType){case"Tx":return new A(i);case"Btn":return i.data.radioButton?new P(i):i.data.checkBox?new y(i):new u(i);case"Ch":return new t(i)}return new _(i);case r.AnnotationType.POPUP:return new e(i);case r.AnnotationType.FREETEXT:return new v(i);case r.AnnotationType.LINE:return new S(i);case r.AnnotationType.SQUARE:return new p(i);case r.AnnotationType.CIRCLE:return new c(i);case r.AnnotationType.POLYLINE:return new b(i);case r.AnnotationType.CARET:return new I(i);case r.AnnotationType.INK:return new Y(i);case r.AnnotationType.POLYGON:return new N(i);case r.AnnotationType.HIGHLIGHT:return new W(i);case r.AnnotationType.UNDERLINE:return new j(i);case r.AnnotationType.SQUIGGLY:return new z(i);case r.AnnotationType.STRIKEOUT:return new ee(i);case r.AnnotationType.STAMP:return new oe(i);case r.AnnotationType.FILEATTACHMENT:return new V(i);default:return new C(i)}}}class C{constructor(i,{isRenderable:h=!1,ignoreBorder:d=!1,createQuadrilaterals:O=!1}={}){this.isRenderable=h,this.data=i.data,this.layer=i.layer,this.page=i.page,this.viewport=i.viewport,this.linkService=i.linkService,this.downloadManager=i.downloadManager,this.imageResourcesPath=i.imageResourcesPath,this.renderForms=i.renderForms,this.svgFactory=i.svgFactory,this.annotationStorage=i.annotationStorage,this.enableScripting=i.enableScripting,this.hasJSActions=i.hasJSActions,this._fieldObjects=i.fieldObjects,this._mouseState=i.mouseState,h&&(this.container=this._createContainer(d)),O&&(this.quadrilaterals=this._createQuadrilaterals(d))}_createContainer(i=!1){const h=this.data,d=this.page,O=this.viewport,R=document.createElement("section"),{width:$,height:K}=q(h.rect),[ce,te,de,me]=O.viewBox,ie=de-ce,fe=me-te;R.setAttribute("data-annotation-id",h.id);const Ae=r.Util.normalizeRect([h.rect[0],d.view[3]-h.rect[1]+d.view[1],h.rect[2],d.view[3]-h.rect[3]+d.view[1]]);if(!i&&h.borderStyle.width>0){R.style.borderWidth=`${h.borderStyle.width}px`;const ae=h.borderStyle.horizontalCornerRadius,ue=h.borderStyle.verticalCornerRadius;switch(ae>0||ue>0?R.style.borderRadius=`calc(${ae}px * var(--scale-factor)) / calc(${ue}px * var(--scale-factor))`:this instanceof P&&(R.style.borderRadius=`calc(${$}px * var(--scale-factor)) / calc(${K}px * var(--scale-factor))`),h.borderStyle.style){case r.AnnotationBorderStyleType.SOLID:R.style.borderStyle="solid";break;case r.AnnotationBorderStyleType.DASHED:R.style.borderStyle="dashed";break;case r.AnnotationBorderStyleType.BEVELED:(0,r.warn)("Unimplemented border style: beveled");break;case r.AnnotationBorderStyleType.INSET:(0,r.warn)("Unimplemented border style: inset");break;case r.AnnotationBorderStyleType.UNDERLINE:R.style.borderBottomStyle="solid"}const we=h.borderColor||null;we?R.style.borderColor=r.Util.makeHexColor(0|we[0],0|we[1],0|we[2]):R.style.borderWidth=0}R.style.left=100*(Ae[0]-ce)/ie+"%",R.style.top=100*(Ae[1]-te)/fe+"%";const{rotation:_e}=h;return h.hasOwnCanvas||0===_e?(R.style.width=100*$/ie+"%",R.style.height=100*K/fe+"%"):this.setRotation(_e,R),R}setRotation(i,h=this.container){const[d,O,R,$]=this.viewport.viewBox,K=R-d,ce=$-O,{width:te,height:de}=q(this.data.rect);let me,ie;i%180==0?(me=100*te/K,ie=100*de/ce):(me=100*de/K,ie=100*te/ce),h.style.width=`${me}%`,h.style.height=`${ie}%`,h.setAttribute("data-main-rotation",(360-i)%360)}get _commonActions(){const i=(h,d,O)=>{const R=O.detail[h];O.target.style[d]=D.ColorConverters[`${R[0]}_HTML`](R.slice(1))};return(0,r.shadow)(this,"_commonActions",{display:h=>{const d=h.detail.display%2==1;this.container.style.visibility=d?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:d,print:0===h.detail.display||3===h.detail.display})},print:h=>{this.annotationStorage.setValue(this.data.id,{print:h.detail.print})},hidden:h=>{this.container.style.visibility=h.detail.hidden?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:h.detail.hidden})},focus:h=>{setTimeout(()=>h.target.focus({preventScroll:!1}),0)},userName:h=>{h.target.title=h.detail.userName},readonly:h=>{h.detail.readonly?h.target.setAttribute("readonly",""):h.target.removeAttribute("readonly")},required:h=>{this._setRequired(h.target,h.detail.required)},bgColor:h=>{i("bgColor","backgroundColor",h)},fillColor:h=>{i("fillColor","backgroundColor",h)},fgColor:h=>{i("fgColor","color",h)},textColor:h=>{i("textColor","color",h)},borderColor:h=>{i("borderColor","borderColor",h)},strokeColor:h=>{i("strokeColor","borderColor",h)},rotation:h=>{const d=h.detail.rotation;this.setRotation(d),this.annotationStorage.setValue(this.data.id,{rotation:d})}})}_dispatchEventFromSandbox(i,h){const d=this._commonActions;for(const O of Object.keys(h.detail)){const R=i[O]||d[O];R&&R(h)}}_setDefaultPropertiesFromJS(i){if(!this.enableScripting)return;const h=this.annotationStorage.getRawValue(this.data.id);if(!h)return;const d=this._commonActions;for(const[O,R]of Object.entries(h)){const $=d[O];$&&($({detail:{[O]:R},target:i}),delete h[O])}}_createQuadrilaterals(i=!1){if(!this.data.quadPoints)return null;const h=[],d=this.data.rect;for(const O of this.data.quadPoints)this.data.rect=[O[2].x,O[2].y,O[1].x,O[1].y],h.push(this._createContainer(i));return this.data.rect=d,h}_createPopup(i,h){let d=this.container;this.quadrilaterals&&(i=i||this.quadrilaterals,d=this.quadrilaterals[0]),i||((i=document.createElement("div")).className="popupTriggerArea",d.append(i));const R=new o({container:d,trigger:i,color:h.color,titleObj:h.titleObj,modificationDate:h.modificationDate,contentsObj:h.contentsObj,richText:h.richText,hideWrapper:!0}).render();R.style.left="100%",d.append(R)}_renderQuadrilaterals(i){for(const h of this.quadrilaterals)h.className=i;return this.quadrilaterals}render(){(0,r.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(i,h=null){const d=[];if(this._fieldObjects){const O=this._fieldObjects[i];if(O)for(const{page:R,id:$,exportValues:K}of O){if(-1===R||$===h)continue;const ce="string"==typeof K?K:null,te=document.querySelector(`[data-element-id="${$}"]`);!te||G.has(te)?d.push({id:$,exportValue:ce,domElement:te}):(0,r.warn)(`_getElementsByName - element not allowed: ${$}`)}return d}for(const O of document.getElementsByName(i)){const{id:R,exportValue:$}=O;R!==h&&G.has(O)&&d.push({id:R,exportValue:$,domElement:O})}return d}static get platform(){const i=typeof navigator<"u"?navigator.platform:"";return(0,r.shadow)(this,"platform",{isWin:i.includes("Win"),isMac:i.includes("Mac")})}}class w extends C{constructor(i,h=null){super(i,{isRenderable:!0,ignoreBorder:!!h?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=i.data.isTooltipOnly}render(){const{data:i,linkService:h}=this,d=document.createElement("a");d.setAttribute("data-element-id",i.id);let O=!1;return i.url?(h.addLinkAttributes(d,i.url,i.newWindow),O=!0):i.action?(this._bindNamedAction(d,i.action),O=!0):i.dest?(this._bindLink(d,i.dest),O=!0):(i.actions&&(i.actions.Action||i.actions["Mouse Up"]||i.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(d,i),O=!0),i.resetForm?(this._bindResetFormAction(d,i.resetForm),O=!0):this.isTooltipOnly&&!O&&(this._bindLink(d,""),O=!0)),this.quadrilaterals?this._renderQuadrilaterals("linkAnnotation").map((R,$)=>{const K=0===$?d:d.cloneNode();return R.append(K),R}):(this.container.className="linkAnnotation",O&&this.container.append(d),this.container)}_bindLink(i,h){i.href=this.linkService.getDestinationHash(h),i.onclick=()=>(h&&this.linkService.goToDestination(h),!1),(h||""===h)&&(i.className="internalLink")}_bindNamedAction(i,h){i.href=this.linkService.getAnchorUrl(""),i.onclick=()=>(this.linkService.executeNamedAction(h),!1),i.className="internalLink"}_bindJSAction(i,h){i.href=this.linkService.getAnchorUrl("");const d=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const O of Object.keys(h.actions)){const R=d.get(O);R&&(i[R]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:h.id,name:O}}),!1))}i.onclick||(i.onclick=()=>!1),i.className="internalLink"}_bindResetFormAction(i,h){const d=i.onclick;if(d||(i.href=this.linkService.getAnchorUrl("")),i.className="internalLink",!this._fieldObjects)return(0,r.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),void(d||(i.onclick=()=>!1));i.onclick=()=>{d&&d();const{fields:O,refs:R,include:$}=h,K=[];if(0!==O.length||0!==R.length){const de=new Set(R);for(const me of O){const ie=this._fieldObjects[me]||[];for(const{id:fe}of ie)de.add(fe)}for(const me of Object.values(this._fieldObjects))for(const ie of me)de.has(ie.id)===$&&K.push(ie)}else for(const de of Object.values(this._fieldObjects))K.push(...de);const ce=this.annotationStorage,te=[];for(const de of K){const{id:me}=de;switch(te.push(me),de.type){case"text":case"combobox":case"listbox":ce.setValue(me,{value:de.defaultValue||""});break;case"checkbox":case"radiobutton":ce.setValue(me,{value:de.defaultValue===de.exportValues});break;default:continue}const ie=document.querySelector(`[data-element-id="${me}"]`);ie&&(G.has(ie)?ie.dispatchEvent(new Event("resetform")):(0,r.warn)(`_bindResetFormAction - element not allowed: ${me}`))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:te,name:"ResetForm"}}),!1}}}class a extends C{constructor(i){super(i,{isRenderable:!!(i.data.hasPopup||i.data.titleObj?.str||i.data.contentsObj?.str||i.data.richText?.str)})}render(){this.container.className="textAnnotation";const i=document.createElement("img");return i.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",i.alt="[{{type}} Annotation]",i.dataset.l10nId="text_annotation_type",i.dataset.l10nArgs=JSON.stringify({type:this.data.name}),this.data.hasPopup||this._createPopup(i,this.data),this.container.append(i),this.container}}class _ extends C{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}_getKeyModifier(i){const{isWin:h,isMac:d}=C.platform;return h&&i.ctrlKey||d&&i.metaKey}_setEventListener(i,h,d,O){h.includes("mouse")?i.addEventListener(h,R=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:d,value:O(R),shift:R.shiftKey,modifier:this._getKeyModifier(R)}})}):i.addEventListener(h,R=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:d,value:O(R)}})})}_setEventListeners(i,h,d){for(const[O,R]of h)("Action"===R||this.data.actions?.[R])&&this._setEventListener(i,O,R,d)}_setBackgroundColor(i){const h=this.data.backgroundColor||null;i.style.backgroundColor=null===h?"transparent":r.Util.makeHexColor(h[0],h[1],h[2])}_setTextStyle(i){const{fontColor:d}=this.data.defaultAppearanceData,O=this.data.defaultAppearanceData.fontSize||9,R=i.style;let $;if(this.data.multiLine){const K=Math.abs(this.data.rect[3]-this.data.rect[1]),ce=Math.round(K/(r.LINE_FACTOR*O))||1;$=Math.min(O,Math.round(K/ce/r.LINE_FACTOR))}else{const K=Math.abs(this.data.rect[3]-this.data.rect[1]);$=Math.min(O,Math.round(K/r.LINE_FACTOR))}R.fontSize=`calc(${$}px * var(--scale-factor))`,R.color=r.Util.makeHexColor(d[0],d[1],d[2]),null!==this.data.textAlignment&&(R.textAlign=["left","center","right"][this.data.textAlignment])}_setRequired(i,h){h?i.setAttribute("required",!0):i.removeAttribute("required"),i.setAttribute("aria-required",h)}}class A extends _{constructor(i){super(i,{isRenderable:i.renderForms||!i.data.hasAppearance&&!!i.data.fieldValue})}setPropertyOnSiblings(i,h,d,O){const R=this.annotationStorage;for(const $ of this._getElementsByName(i.name,i.id))$.domElement&&($.domElement[h]=d),R.setValue($.id,{[O]:d})}render(){const i=this.annotationStorage,h=this.data.id;this.container.className="textWidgetAnnotation";let d=null;if(this.renderForms){const O=i.getValue(h,{value:this.data.fieldValue});let R=O.formattedValue||O.value||"";const $=i.getValue(h,{charLimit:this.data.maxLen}).charLimit;$&&R.length>$&&(R=R.slice(0,$));const K={userValue:R,formattedValue:null,valueOnFocus:""};this.data.multiLine?(d=document.createElement("textarea"),d.textContent=R,this.data.doNotScroll&&(d.style.overflowY="hidden")):(d=document.createElement("input"),d.type="text",d.setAttribute("value",R),this.data.doNotScroll&&(d.style.overflowX="hidden")),G.add(d),d.setAttribute("data-element-id",h),d.disabled=this.data.readOnly,d.name=this.data.fieldName,d.tabIndex=F,this._setRequired(d,this.data.required),$&&(d.maxLength=$),d.addEventListener("input",te=>{i.setValue(h,{value:te.target.value}),this.setPropertyOnSiblings(d,"value",te.target.value,"value")}),d.addEventListener("resetform",te=>{d.value=K.userValue=this.data.defaultFieldValue??"",K.formattedValue=null});let ce=te=>{const{formattedValue:de}=K;null!=de&&(te.target.value=de),te.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){d.addEventListener("focus",de=>{K.userValue&&(de.target.value=K.userValue),K.valueOnFocus=de.target.value}),d.addEventListener("updatefromsandbox",de=>{this._dispatchEventFromSandbox({value(ie){K.userValue=ie.detail.value??"",i.setValue(h,{value:K.userValue.toString()}),ie.target.value=K.userValue},formattedValue(ie){const{formattedValue:fe}=ie.detail;K.formattedValue=fe,null!=fe&&ie.target!==document.activeElement&&(ie.target.value=fe),i.setValue(h,{formattedValue:fe})},selRange(ie){ie.target.setSelectionRange(...ie.detail.selRange)},charLimit:ie=>{const{charLimit:fe}=ie.detail,{target:Ae}=ie;if(0===fe)return void Ae.removeAttribute("maxLength");Ae.setAttribute("maxLength",fe);let _e=K.userValue;!_e||_e.length<=fe||(_e=_e.slice(0,fe),Ae.value=K.userValue=_e,i.setValue(h,{value:_e}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:h,name:"Keystroke",value:_e,willCommit:!0,commitKey:1,selStart:Ae.selectionStart,selEnd:Ae.selectionEnd}}))}},de)}),d.addEventListener("keydown",de=>{let me=-1;if("Escape"===de.key?me=0:"Enter"===de.key?me=2:"Tab"===de.key&&(me=3),-1===me)return;const{value:ie}=de.target;K.valueOnFocus!==ie&&(K.userValue=ie,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:h,name:"Keystroke",value:ie,willCommit:!0,commitKey:me,selStart:de.target.selectionStart,selEnd:de.target.selectionEnd}}))});const te=ce;ce=null,d.addEventListener("blur",de=>{const{value:me}=de.target;K.userValue=me,this._mouseState.isDown&&K.valueOnFocus!==me&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:h,name:"Keystroke",value:me,willCommit:!0,commitKey:1,selStart:de.target.selectionStart,selEnd:de.target.selectionEnd}}),te(de)}),this.data.actions?.Keystroke&&d.addEventListener("beforeinput",de=>{const{data:me,target:ie}=de,{value:fe,selectionStart:Ae,selectionEnd:_e}=ie;let ae=Ae,ue=_e;switch(de.inputType){case"deleteWordBackward":{const we=fe.substring(0,Ae).match(/\w*[^\w]*$/);we&&(ae-=we[0].length);break}case"deleteWordForward":{const we=fe.substring(Ae).match(/^[^\w]*\w*/);we&&(ue+=we[0].length);break}case"deleteContentBackward":Ae===_e&&(ae-=1);break;case"deleteContentForward":Ae===_e&&(ue+=1)}de.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:h,name:"Keystroke",value:fe,change:me||"",willCommit:!1,selStart:ae,selEnd:ue}})}),this._setEventListeners(d,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],de=>de.target.value)}if(ce&&d.addEventListener("blur",ce),this.data.comb){const de=(this.data.rect[2]-this.data.rect[0])/$;d.classList.add("comb"),d.style.letterSpacing=`calc(${de}px * var(--scale-factor) - 1ch)`}}else d=document.createElement("div"),d.textContent=this.data.fieldValue,d.style.verticalAlign="middle",d.style.display="table-cell";return this._setTextStyle(d),this._setBackgroundColor(d),this._setDefaultPropertiesFromJS(d),this.container.append(d),this.container}}class y extends _{constructor(i){super(i,{isRenderable:i.renderForms})}render(){const i=this.annotationStorage,h=this.data,d=h.id;let O=i.getValue(d,{value:h.exportValue===h.fieldValue}).value;"string"==typeof O&&(O="Off"!==O,i.setValue(d,{value:O})),this.container.className="buttonWidgetAnnotation checkBox";const R=document.createElement("input");return G.add(R),R.setAttribute("data-element-id",d),R.disabled=h.readOnly,this._setRequired(R,this.data.required),R.type="checkbox",R.name=h.fieldName,O&&R.setAttribute("checked",!0),R.setAttribute("exportValue",h.exportValue),R.tabIndex=F,R.addEventListener("change",$=>{const{name:K,checked:ce}=$.target;for(const te of this._getElementsByName(K,d)){const de=ce&&te.exportValue===h.exportValue;te.domElement&&(te.domElement.checked=de),i.setValue(te.id,{value:de})}i.setValue(d,{value:ce})}),R.addEventListener("resetform",$=>{$.target.checked=(h.defaultFieldValue||"Off")===h.exportValue}),this.enableScripting&&this.hasJSActions&&(R.addEventListener("updatefromsandbox",$=>{this._dispatchEventFromSandbox({value(ce){ce.target.checked="Off"!==ce.detail.value,i.setValue(d,{value:ce.target.checked})}},$)}),this._setEventListeners(R,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],$=>$.target.checked)),this._setBackgroundColor(R),this._setDefaultPropertiesFromJS(R),this.container.append(R),this.container}}class P extends _{constructor(i){super(i,{isRenderable:i.renderForms})}render(){this.container.className="buttonWidgetAnnotation radioButton";const i=this.annotationStorage,h=this.data,d=h.id;let O=i.getValue(d,{value:h.fieldValue===h.buttonValue}).value;"string"==typeof O&&(O=O!==h.buttonValue,i.setValue(d,{value:O}));const R=document.createElement("input");if(G.add(R),R.setAttribute("data-element-id",d),R.disabled=h.readOnly,this._setRequired(R,this.data.required),R.type="radio",R.name=h.fieldName,O&&R.setAttribute("checked",!0),R.tabIndex=F,R.addEventListener("change",$=>{const{name:K,checked:ce}=$.target;for(const te of this._getElementsByName(K,d))i.setValue(te.id,{value:!1});i.setValue(d,{value:ce})}),R.addEventListener("resetform",$=>{const K=h.defaultFieldValue;$.target.checked=null!=K&&K===h.buttonValue}),this.enableScripting&&this.hasJSActions){const $=h.buttonValue;R.addEventListener("updatefromsandbox",K=>{this._dispatchEventFromSandbox({value:te=>{const de=$===te.detail.value;for(const me of this._getElementsByName(te.target.name)){const ie=de&&me.id===d;me.domElement&&(me.domElement.checked=ie),i.setValue(me.id,{value:ie})}}},K)}),this._setEventListeners(R,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],K=>K.target.checked)}return this._setBackgroundColor(R),this._setDefaultPropertiesFromJS(R),this.container.append(R),this.container}}class u extends w{constructor(i){super(i,{ignoreBorder:i.data.hasAppearance})}render(){const i=super.render();i.className="buttonWidgetAnnotation pushButton",this.data.alternativeText&&(i.title=this.data.alternativeText);const h=i.lastChild;return this.enableScripting&&this.hasJSActions&&h&&(this._setDefaultPropertiesFromJS(h),h.addEventListener("updatefromsandbox",d=>{this._dispatchEventFromSandbox({},d)})),i}}class t extends _{constructor(i){super(i,{isRenderable:i.renderForms})}render(){this.container.className="choiceWidgetAnnotation";const i=this.annotationStorage,h=this.data.id,d=i.getValue(h,{value:this.data.fieldValue}),O=document.createElement("select");G.add(O),O.setAttribute("data-element-id",h),O.disabled=this.data.readOnly,this._setRequired(O,this.data.required),O.name=this.data.fieldName,O.tabIndex=F;let R=this.data.combo&&this.data.options.length>0;this.data.combo||(O.size=this.data.options.length,this.data.multiSelect&&(O.multiple=!0)),O.addEventListener("resetform",te=>{const de=this.data.defaultFieldValue;for(const me of O.options)me.selected=me.value===de});for(const te of this.data.options){const de=document.createElement("option");de.textContent=te.displayValue,de.value=te.exportValue,d.value.includes(te.exportValue)&&(de.setAttribute("selected",!0),R=!1),O.append(de)}let $=null;if(R){const te=document.createElement("option");te.value=" ",te.setAttribute("hidden",!0),te.setAttribute("selected",!0),O.prepend(te),$=()=>{te.remove(),O.removeEventListener("input",$),$=null},O.addEventListener("input",$)}const K=(te,de)=>{const me=de?"value":"textContent",ie=te.target.options;return te.target.multiple?Array.prototype.filter.call(ie,fe=>fe.selected).map(fe=>fe[me]):-1===ie.selectedIndex?null:ie[ie.selectedIndex][me]},ce=te=>Array.prototype.map.call(te.target.options,me=>({displayValue:me.textContent,exportValue:me.value}));return this.enableScripting&&this.hasJSActions?(O.addEventListener("updatefromsandbox",te=>{this._dispatchEventFromSandbox({value(me){$?.();const ie=me.detail.value,fe=new Set(Array.isArray(ie)?ie:[ie]);for(const Ae of O.options)Ae.selected=fe.has(Ae.value);i.setValue(h,{value:K(me,!0)})},multipleSelection(me){O.multiple=!0},remove(me){const ie=O.options,fe=me.detail.remove;ie[fe].selected=!1,O.remove(fe),ie.length>0&&-1===Array.prototype.findIndex.call(ie,_e=>_e.selected)&&(ie[0].selected=!0),i.setValue(h,{value:K(me,!0),items:ce(me)})},clear(me){for(;0!==O.length;)O.remove(0);i.setValue(h,{value:null,items:[]})},insert(me){const{index:ie,displayValue:fe,exportValue:Ae}=me.detail.insert,_e=O.children[ie],ae=document.createElement("option");ae.textContent=fe,ae.value=Ae,_e?_e.before(ae):O.append(ae),i.setValue(h,{value:K(me,!0),items:ce(me)})},items(me){const{items:ie}=me.detail;for(;0!==O.length;)O.remove(0);for(const fe of ie){const{displayValue:Ae,exportValue:_e}=fe,ae=document.createElement("option");ae.textContent=Ae,ae.value=_e,O.append(ae)}O.options.length>0&&(O.options[0].selected=!0),i.setValue(h,{value:K(me,!0),items:ce(me)})},indices(me){const ie=new Set(me.detail.indices);for(const fe of me.target.options)fe.selected=ie.has(fe.index);i.setValue(h,{value:K(me,!0)})},editable(me){me.target.disabled=!me.detail.editable}},te)}),O.addEventListener("input",te=>{const de=K(te,!0),me=K(te,!1);i.setValue(h,{value:de}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:h,name:"Keystroke",value:me,changeEx:de,willCommit:!0,commitKey:1,keyDown:!1}})}),this._setEventListeners(O,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"]],te=>te.target.checked)):O.addEventListener("input",function(te){i.setValue(h,{value:K(te,!0)})}),this.data.combo&&this._setTextStyle(O),this._setBackgroundColor(O),this._setDefaultPropertiesFromJS(O),this.container.append(O),this.container}}class e extends C{constructor(i){super(i,{isRenderable:!!(i.data.titleObj?.str||i.data.contentsObj?.str||i.data.richText?.str)})}render(){if(this.container.className="popupAnnotation",["Line","Square","Circle","PolyLine","Polygon","Ink"].includes(this.data.parentType))return this.container;const d=this.layer.querySelectorAll(`[data-annotation-id="${this.data.parentId}"]`);if(0===d.length)return this.container;const O=new o({container:this.container,trigger:Array.from(d),color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText}),R=this.page,$=r.Util.normalizeRect([this.data.parentRect[0],R.view[3]-this.data.parentRect[1]+R.view[1],this.data.parentRect[2],R.view[3]-this.data.parentRect[3]+R.view[1]]),K=$[0]+this.data.parentRect[2]-this.data.parentRect[0],ce=$[1],[te,de,me,ie]=this.viewport.viewBox,Ae=ie-de;return this.container.style.left=100*(K-te)/(me-te)+"%",this.container.style.top=100*(ce-de)/Ae+"%",this.container.append(O.render()),this.container}}class o{constructor(i){this.container=i.container,this.trigger=i.trigger,this.color=i.color,this.titleObj=i.titleObj,this.modificationDate=i.modificationDate,this.contentsObj=i.contentsObj,this.richText=i.richText,this.hideWrapper=i.hideWrapper||!1,this.pinned=!1}render(){const h=document.createElement("div");h.className="popupWrapper",this.hideElement=this.hideWrapper?h:this.container,this.hideElement.hidden=!0;const d=document.createElement("div");d.className="popup";const O=this.color;O&&(d.style.backgroundColor=r.Util.makeHexColor(0|.7*(255-O[0])+O[0],0|.7*(255-O[1])+O[1],0|.7*(255-O[2])+O[2]));const R=document.createElement("h1");R.dir=this.titleObj.dir,R.textContent=this.titleObj.str,d.append(R);const $=m.PDFDateString.toDateObject(this.modificationDate);if($){const K=document.createElement("span");K.className="popupDate",K.textContent="{{date}}, {{time}}",K.dataset.l10nId="annotation_date_string",K.dataset.l10nArgs=JSON.stringify({date:$.toLocaleDateString(),time:$.toLocaleTimeString()}),d.append(K)}if(!this.richText?.str||this.contentsObj?.str&&this.contentsObj.str!==this.richText.str){const K=this._formatContents(this.contentsObj);d.append(K)}else Q.XfaLayer.render({xfaHtml:this.richText.html,intent:"richText",div:d}),d.lastChild.className="richText popupContent";Array.isArray(this.trigger)||(this.trigger=[this.trigger]);for(const K of this.trigger)K.addEventListener("click",this._toggle.bind(this)),K.addEventListener("mouseover",this._show.bind(this,!1)),K.addEventListener("mouseout",this._hide.bind(this,!1));return d.addEventListener("click",this._hide.bind(this,!0)),h.append(d),h}_formatContents({str:i,dir:h}){const d=document.createElement("p");d.className="popupContent",d.dir=h;const O=i.split(/(?:\r\n?|\n)/);for(let R=0,$=O.length;R<$;++R)d.append(document.createTextNode(O[R])),R<$-1&&d.append(document.createElement("br"));return d}_toggle(){this.pinned?this._hide(!0):this._show(!0)}_show(i=!1){i&&(this.pinned=!0),this.hideElement.hidden&&(this.hideElement.hidden=!1,this.container.style.zIndex=parseInt(this.container.style.zIndex)+1e3)}_hide(i=!0){i&&(this.pinned=!1),!this.hideElement.hidden&&!this.pinned&&(this.hideElement.hidden=!0,this.container.style.zIndex=parseInt(this.container.style.zIndex)-1e3)}}class v extends C{constructor(i){super(i,{isRenderable:!!(i.data.hasPopup||i.data.titleObj?.str||i.data.contentsObj?.str||i.data.richText?.str),ignoreBorder:!0}),this.textContent=i.data.textContent}render(){if(this.container.className="freeTextAnnotation",this.textContent){const i=document.createElement("div");i.className="annotationTextContent",i.setAttribute("role","comment");for(const h of this.textContent){const d=document.createElement("span");d.textContent=h,i.append(d)}this.container.append(i)}return this.data.hasPopup||this._createPopup(null,this.data),this.container}}class S extends C{constructor(i){super(i,{isRenderable:!!(i.data.hasPopup||i.data.titleObj?.str||i.data.contentsObj?.str||i.data.richText?.str),ignoreBorder:!0})}render(){this.container.className="lineAnnotation";const i=this.data,{width:h,height:d}=q(i.rect),O=this.svgFactory.create(h,d,!0),R=this.svgFactory.createElement("svg:line");return R.setAttribute("x1",i.rect[2]-i.lineCoordinates[0]),R.setAttribute("y1",i.rect[3]-i.lineCoordinates[1]),R.setAttribute("x2",i.rect[2]-i.lineCoordinates[2]),R.setAttribute("y2",i.rect[3]-i.lineCoordinates[3]),R.setAttribute("stroke-width",i.borderStyle.width||1),R.setAttribute("stroke","transparent"),R.setAttribute("fill","transparent"),O.append(R),this.container.append(O),this._createPopup(R,i),this.container}}class p extends C{constructor(i){super(i,{isRenderable:!!(i.data.hasPopup||i.data.titleObj?.str||i.data.contentsObj?.str||i.data.richText?.str),ignoreBorder:!0})}render(){this.container.className="squareAnnotation";const i=this.data,{width:h,height:d}=q(i.rect),O=this.svgFactory.create(h,d,!0),R=i.borderStyle.width,$=this.svgFactory.createElement("svg:rect");return $.setAttribute("x",R/2),$.setAttribute("y",R/2),$.setAttribute("width",h-R),$.setAttribute("height",d-R),$.setAttribute("stroke-width",R||1),$.setAttribute("stroke","transparent"),$.setAttribute("fill","transparent"),O.append($),this.container.append(O),this._createPopup($,i),this.container}}class c extends C{constructor(i){super(i,{isRenderable:!!(i.data.hasPopup||i.data.titleObj?.str||i.data.contentsObj?.str||i.data.richText?.str),ignoreBorder:!0})}render(){this.container.className="circleAnnotation";const i=this.data,{width:h,height:d}=q(i.rect),O=this.svgFactory.create(h,d,!0),R=i.borderStyle.width,$=this.svgFactory.createElement("svg:ellipse");return $.setAttribute("cx",h/2),$.setAttribute("cy",d/2),$.setAttribute("rx",h/2-R/2),$.setAttribute("ry",d/2-R/2),$.setAttribute("stroke-width",R||1),$.setAttribute("stroke","transparent"),$.setAttribute("fill","transparent"),O.append($),this.container.append(O),this._createPopup($,i),this.container}}class b extends C{constructor(i){super(i,{isRenderable:!!(i.data.hasPopup||i.data.titleObj?.str||i.data.contentsObj?.str||i.data.richText?.str),ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const i=this.data,{width:h,height:d}=q(i.rect),O=this.svgFactory.create(h,d,!0);let R=[];for(const K of i.vertices)R.push(K.x-i.rect[0]+","+(i.rect[3]-K.y));R=R.join(" ");const $=this.svgFactory.createElement(this.svgElementName);return $.setAttribute("points",R),$.setAttribute("stroke-width",i.borderStyle.width||1),$.setAttribute("stroke","transparent"),$.setAttribute("fill","transparent"),O.append($),this.container.append(O),this._createPopup($,i),this.container}}class N extends b{constructor(i){super(i),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class I extends C{constructor(i){super(i,{isRenderable:!!(i.data.hasPopup||i.data.titleObj?.str||i.data.contentsObj?.str||i.data.richText?.str),ignoreBorder:!0})}render(){return this.container.className="caretAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class Y extends C{constructor(i){super(i,{isRenderable:!!(i.data.hasPopup||i.data.titleObj?.str||i.data.contentsObj?.str||i.data.richText?.str),ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const i=this.data,{width:h,height:d}=q(i.rect),O=this.svgFactory.create(h,d,!0);for(const R of i.inkLists){let $=[];for(const ce of R)$.push(`${ce.x-i.rect[0]},${i.rect[3]-ce.y}`);$=$.join(" ");const K=this.svgFactory.createElement(this.svgElementName);K.setAttribute("points",$),K.setAttribute("stroke-width",i.borderStyle.width||1),K.setAttribute("stroke","transparent"),K.setAttribute("fill","transparent"),this._createPopup(K,i),O.append(K)}return this.container.append(O),this.container}}class W extends C{constructor(i){super(i,{isRenderable:!!(i.data.hasPopup||i.data.titleObj?.str||i.data.contentsObj?.str||i.data.richText?.str),ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("highlightAnnotation"):(this.container.className="highlightAnnotation",this.container)}}class j extends C{constructor(i){super(i,{isRenderable:!!(i.data.hasPopup||i.data.titleObj?.str||i.data.contentsObj?.str||i.data.richText?.str),ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("underlineAnnotation"):(this.container.className="underlineAnnotation",this.container)}}class z extends C{constructor(i){super(i,{isRenderable:!!(i.data.hasPopup||i.data.titleObj?.str||i.data.contentsObj?.str||i.data.richText?.str),ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("squigglyAnnotation"):(this.container.className="squigglyAnnotation",this.container)}}class ee extends C{constructor(i){super(i,{isRenderable:!!(i.data.hasPopup||i.data.titleObj?.str||i.data.contentsObj?.str||i.data.richText?.str),ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("strikeoutAnnotation"):(this.container.className="strikeoutAnnotation",this.container)}}class oe extends C{constructor(i){super(i,{isRenderable:!!(i.data.hasPopup||i.data.titleObj?.str||i.data.contentsObj?.str||i.data.richText?.str),ignoreBorder:!0})}render(){return this.container.className="stampAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class V extends C{constructor(i){super(i,{isRenderable:!0});const{filename:h,content:d}=this.data.file;this.filename=(0,m.getFilenameFromUrl)(h),this.content=d,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,filename:h,content:d})}render(){this.container.className="fileAttachmentAnnotation";const i=document.createElement("div");return i.className="popupTriggerArea",i.addEventListener("dblclick",this._download.bind(this)),!this.data.hasPopup&&(this.data.titleObj?.str||this.data.contentsObj?.str||this.data.richText)&&this._createPopup(i,this.data),this.container.append(i),this.container}_download(){this.downloadManager?.openOrDownloadData(this.container,this.content,this.filename)}}class g{static render(i){const{annotations:h,div:d,viewport:O,accessibilityManager:R}=i;_classStaticPrivateMethodGet(this,g,x).call(this,d,O);let $=0;for(const K of h){if(K.annotationType!==r.AnnotationType.POPUP){const{width:te,height:de}=q(K.rect);if(te<=0||de<=0)continue}const ce=U.create({data:K,layer:d,page:i.page,viewport:O,linkService:i.linkService,downloadManager:i.downloadManager,imageResourcesPath:i.imageResourcesPath||"",renderForms:!1!==i.renderForms,svgFactory:new m.DOMSVGFactory,annotationStorage:i.annotationStorage||new n.AnnotationStorage,enableScripting:i.enableScripting,hasJSActions:i.hasJSActions,fieldObjects:i.fieldObjects,mouseState:i.mouseState||{isDown:!1}});if(ce.isRenderable){const te=ce.render();if(K.hidden&&(te.style.visibility="hidden"),Array.isArray(te))for(const de of te)de.style.zIndex=$++,_classStaticPrivateMethodGet(g,g,l).call(g,de,K.id,d,R);else te.style.zIndex=$++,ce instanceof e?d.prepend(te):_classStaticPrivateMethodGet(g,g,l).call(g,te,K.id,d,R)}}_classStaticPrivateMethodGet(this,g,L).call(this,d,i.annotationCanvasMap)}static update(i){const{annotationCanvasMap:h,div:d,viewport:O}=i;_classStaticPrivateMethodGet(this,g,x).call(this,d,O),_classStaticPrivateMethodGet(this,g,L).call(this,d,h),d.hidden=!1}}function l(E,i,h,d){const O=E.firstChild||E;O.id=`${m.AnnotationPrefix}${i}`,h.append(E),d?.moveElementInDOM(h,E,O,!1)}function x(E,{width:i,height:h,rotation:d}){const{style:O}=E,R=d%180!=0,$=Math.floor(i)+"px",K=Math.floor(h)+"px";O.width=R?K:$,O.height=R?$:K,E.setAttribute("data-main-rotation",d)}function L(E,i){if(i){for(const[h,d]of i){const O=E.querySelector(`[data-annotation-id="${h}"]`);if(!O)continue;const{firstChild:R}=O;R?"CANVAS"===R.nodeName?R.replaceWith(d):R.before(d):O.append(d)}i.clear()}}s.AnnotationLayer=g},(Z,s)=>{function k(m){return Math.floor(255*Math.max(0,Math.min(1,m))).toString(16).padStart(2,"0")}Object.defineProperty(s,"__esModule",{value:!0}),s.ColorConverters=void 0,s.ColorConverters=class r{static CMYK_G([n,D,Q,F]){return["G",1-Math.min(1,.3*n+.59*Q+.11*D+F)]}static G_CMYK([n]){return["CMYK",0,0,0,1-n]}static G_RGB([n]){return["RGB",n,n,n]}static G_HTML([n]){const D=k(n);return`#${D}${D}${D}`}static RGB_G([n,D,Q]){return["G",.3*n+.59*D+.11*Q]}static RGB_HTML([n,D,Q]){return`#${k(n)}${k(D)}${k(Q)}`}static T_HTML(){return"#00000000"}static CMYK_RGB([n,D,Q,F]){return["RGB",1-Math.min(1,n+F),1-Math.min(1,Q+F),1-Math.min(1,D+F)]}static CMYK_HTML(n){const D=this.CMYK_RGB(n).slice(1);return this.RGB_HTML(D)}static RGB_CMYK([n,D,Q]){const F=1-n,T=1-D,G=1-Q;return["CMYK",F,T,G,Math.min(F,T,G)]}}},(Z,s,k)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.XfaLayer=void 0;var r=k(20);s.XfaLayer=class m{static setupStorage(D,Q,F,T,G){const q=T.getValue(Q,{value:null});switch(F.name){case"textarea":if(null!==q.value&&(D.textContent=q.value),"print"===G)break;D.addEventListener("input",U=>{T.setValue(Q,{value:U.target.value})});break;case"input":if("radio"===F.attributes.type||"checkbox"===F.attributes.type){if(q.value===F.attributes.xfaOn?D.setAttribute("checked",!0):q.value===F.attributes.xfaOff&&D.removeAttribute("checked"),"print"===G)break;D.addEventListener("change",U=>{T.setValue(Q,{value:U.target.getAttribute(U.target.checked?"xfaOn":"xfaOff")})})}else{if(null!==q.value&&D.setAttribute("value",q.value),"print"===G)break;D.addEventListener("input",U=>{T.setValue(Q,{value:U.target.value})})}break;case"select":if(null!==q.value)for(const U of F.children)U.attributes.value===q.value&&(U.attributes.selected=!0);D.addEventListener("input",U=>{const C=U.target.options;T.setValue(Q,{value:-1===C.selectedIndex?"":C[C.selectedIndex].value})})}}static setAttributes({html:D,element:Q,storage:F=null,intent:T,linkService:G}){const{attributes:q}=Q,U=D instanceof HTMLAnchorElement;"radio"===q.type&&(q.name=`${q.name}-${T}`);for(const[C,w]of Object.entries(q))if(null!=w)switch(C){case"class":w.length&&D.setAttribute(C,w.join(" "));break;case"dataId":break;case"id":D.setAttribute("data-element-id",w);break;case"style":Object.assign(D.style,w);break;case"textContent":D.textContent=w;break;default:(!U||"href"!==C&&"newWindow"!==C)&&D.setAttribute(C,w)}U&&G.addLinkAttributes(D,q.href,q.newWindow),F&&q.dataId&&this.setupStorage(D,q.dataId,Q,F)}static render(D){const Q=D.annotationStorage,F=D.linkService,T=D.xfaHtml,G=D.intent||"display",q=document.createElement(T.name);T.attributes&&this.setAttributes({html:q,element:T,intent:G,linkService:F});const U=[[T,-1,q]],C=D.div;if(C.append(q),D.viewport){const a=`matrix(${D.viewport.transform.join(",")})`;C.style.transform=a}"richText"!==G&&C.setAttribute("class","xfaLayer xfaFont");const w=[];for(;U.length>0;){const[a,_,A]=U.at(-1);if(_+1===a.children.length){U.pop();continue}const y=a.children[++U.at(-1)[1]];if(null===y)continue;const{name:P}=y;if("#text"===P){const t=document.createTextNode(y.value);w.push(t),A.append(t);continue}let u;if(u=y?.attributes?.xmlns?document.createElementNS(y.attributes.xmlns,P):document.createElement(P),A.append(u),y.attributes&&this.setAttributes({html:u,element:y,storage:Q,intent:G,linkService:F}),y.children&&y.children.length>0)U.push([y,-1,u]);else if(y.value){const t=document.createTextNode(y.value);r.XfaText.shouldBuildText(P)&&w.push(t),u.append(t)}}for(const a of C.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))a.setAttribute("readOnly",!0);return{textDivs:w}}static update(D){const Q=`matrix(${D.viewport.transform.join(",")})`;D.div.style.transform=Q,D.div.hidden=!1}}},(Z,s,k)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.TextLayerRenderTask=void 0,s.renderTextLayer=function y(P){const u=new A({textContent:P.textContent,textContentStream:P.textContentStream,container:P.container,viewport:P.viewport,textDivs:P.textDivs,textContentItemsStr:P.textContentItemsStr,enhanceTextSelection:P.enhanceTextSelection});return u._render(P.timeout),u};var r=k(1),m=k(8);const D=30,F=new Map,T=/^\s+$/g;function q(P,u,t,e){const o=document.createElement("span"),v=P._enhanceTextSelection?{angle:0,canvasWidth:0,hasText:""!==u.str,hasEOL:u.hasEOL,originalTransform:null,paddingBottom:0,paddingLeft:0,paddingRight:0,paddingTop:0,scale:1,fontSize:0}:{angle:0,canvasWidth:0,hasText:""!==u.str,hasEOL:u.hasEOL,fontSize:0};P._textDivs.push(o);const S=r.Util.transform(P._viewport.transform,u.transform);let p=Math.atan2(S[1],S[0]);const c=t[u.fontName];c.vertical&&(p+=Math.PI/2);const b=Math.hypot(S[2],S[3]),N=b*function G(P,u){const t=F.get(P);if(t)return t;u.save(),u.font=`30px ${P}`;const e=u.measureText("");let o=e.fontBoundingBoxAscent,v=Math.abs(e.fontBoundingBoxDescent);if(o){u.restore();const p=o/(o+v);return F.set(P,p),p}u.strokeStyle="red",u.clearRect(0,0,D,D),u.strokeText("g",0,0);let S=u.getImageData(0,0,D,D).data;v=0;for(let p=S.length-1-3;p>=0;p-=4)if(S[p]>0){v=Math.ceil(p/4/D);break}u.clearRect(0,0,D,D),u.strokeText("A",0,D),S=u.getImageData(0,0,D,D).data,o=0;for(let p=0,c=S.length;p<c;p+=4)if(S[p]>0){o=D-Math.floor(p/4/D);break}if(u.restore(),o){const p=o/(o+v);return F.set(P,p),p}return F.set(P,.8),.8}(c.fontFamily,e);let I,Y;0===p?(I=S[4],Y=S[5]-N):(I=S[4]+N*Math.sin(p),Y=S[5]-N*Math.cos(p)),o.style.left=`${I}px`,o.style.top=`${Y}px`,o.style.fontSize=`${b}px`,o.style.fontFamily=c.fontFamily,v.fontSize=b,o.setAttribute("role","presentation"),o.textContent=u.str,o.dir=u.dir,P._fontInspectorEnabled&&(o.dataset.fontName=u.fontName),0!==p&&(v.angle=p*(180/Math.PI));let W=!1;if(u.str.length>1||P._enhanceTextSelection&&T.test(u.str))W=!0;else if(" "!==u.str&&u.transform[0]!==u.transform[3]){const j=Math.abs(u.transform[0]),z=Math.abs(u.transform[3]);j!==z&&Math.max(j,z)/Math.min(j,z)>1.5&&(W=!0)}if(W&&(v.canvasWidth=c.vertical?u.height*P._viewport.scale:u.width*P._viewport.scale),P._textDivProperties.set(o,v),P._textContentStream&&P._layoutText(o),P._enhanceTextSelection&&v.hasText){let j=1,z=0;0!==p&&(j=Math.cos(p),z=Math.sin(p));const ee=(c.vertical?u.height:u.width)*P._viewport.scale,oe=b;let V,g;0!==p?(V=[j,z,-z,j,I,Y],g=r.Util.getAxialAlignedBoundingBox([0,0,ee,oe],V)):g=[I,Y,I+ee,Y+oe],P._bounds.push({left:g[0],top:g[1],right:g[2],bottom:g[3],div:o,size:[ee,oe],m:V})}}function U(P){if(P._canceled)return;const u=P._textDivs,t=P._capability,e=u.length;if(e>1e5)return P._renderingDone=!0,void t.resolve();if(!P._textContentStream)for(let o=0;o<e;o++)P._layoutText(u[o]);P._renderingDone=!0,t.resolve()}function C(P,u,t){let e=0;for(let o=0;o<t;o++){const v=P[u++];v>0&&(e=e?Math.min(v,e):v)}return e}function _(P,u){u.sort(function(o,v){return o.x1-v.x1||o.index-v.index});const e=[{start:-1/0,end:1/0,boundary:{x1:-1/0,y1:-1/0,x2:0,y2:1/0,index:-1,x1New:0,x2New:0}}];for(const o of u){let v=0;for(;v<e.length&&e[v].end<=o.y1;)v++;let S=e.length-1;for(;S>=0&&e[S].start>=o.y2;)S--;let p,c,b,N,I=-1/0;for(b=v;b<=S;b++){let j;p=e[b],c=p.boundary,j=c.x2>o.x1?c.index>o.index?c.x1New:o.x1:void 0===c.x2New?(c.x2+o.x1)/2:c.x2New,j>I&&(I=j)}for(o.x1New=I,b=v;b<=S;b++)p=e[b],c=p.boundary,void 0===c.x2New?c.x2>o.x1?c.index>o.index&&(c.x2New=c.x2):c.x2New=I:c.x2New>I&&(c.x2New=Math.max(I,c.x2));const Y=[];let W=null;for(b=v;b<=S;b++){p=e[b],c=p.boundary;const j=c.x2>o.x2?c:o;W===j?Y.at(-1).end=p.end:(Y.push({start:p.start,end:p.end,boundary:j}),W=j)}for(e[v].start<o.y1&&(Y[0].start=o.y1,Y.unshift({start:e[v].start,end:o.y1,boundary:e[v].boundary})),o.y2<e[S].end&&(Y.at(-1).end=o.y2,Y.push({start:o.y2,end:e[S].end,boundary:e[S].boundary})),b=v;b<=S;b++){if(p=e[b],c=p.boundary,void 0!==c.x2New)continue;let j=!1;for(N=v-1;!j&&N>=0&&e[N].start>=c.y1;N--)j=e[N].boundary===c;for(N=S+1;!j&&N<e.length&&e[N].end<=c.y2;N++)j=e[N].boundary===c;for(N=0;!j&&N<Y.length;N++)j=Y[N].boundary===c;j||(c.x2New=I)}Array.prototype.splice.apply(e,[v,S-v+1,...Y])}for(const o of e){const v=o.boundary;void 0===v.x2New&&(v.x2New=Math.max(P,v.x2))}}class A{constructor({textContent:u,textContentStream:t,container:e,viewport:o,textDivs:v,textContentItemsStr:S,enhanceTextSelection:p}){p&&(0,m.deprecated)("The `enhanceTextSelection` functionality will be removed in the future."),this._textContent=u,this._textContentStream=t,this._container=e,this._document=e.ownerDocument,this._viewport=o,this._textDivs=v||[],this._textContentItemsStr=S||[],this._enhanceTextSelection=!!p,this._fontInspectorEnabled=!!globalThis.FontInspector?.enabled,this._reader=null,this._layoutTextLastFontSize=null,this._layoutTextLastFontFamily=null,this._layoutTextCtx=null,this._textDivProperties=new WeakMap,this._renderingDone=!1,this._canceled=!1,this._capability=(0,r.createPromiseCapability)(),this._renderTimer=null,this._bounds=[],this._devicePixelRatio=globalThis.devicePixelRatio||1,this._capability.promise.finally(()=>{this._enhanceTextSelection||(this._textDivProperties=null),this._layoutTextCtx&&(this._layoutTextCtx.canvas.width=0,this._layoutTextCtx.canvas.height=0,this._layoutTextCtx=null)}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new r.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),null!==this._renderTimer&&(clearTimeout(this._renderTimer),this._renderTimer=null),this._capability.reject(new Error("TextLayer task cancelled."))}_processItems(u,t){for(let e=0,o=u.length;e<o;e++)if(void 0!==u[e].str)this._textContentItemsStr.push(u[e].str),q(this,u[e],t,this._layoutTextCtx);else if("beginMarkedContentProps"===u[e].type||"beginMarkedContent"===u[e].type){const v=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),null!==u[e].id&&this._container.setAttribute("id",`${u[e].id}`),v.append(this._container)}else"endMarkedContent"===u[e].type&&(this._container=this._container.parentNode)}_layoutText(u){const t=this._textDivProperties.get(u);let e="";if(0!==t.canvasWidth&&t.hasText){const{fontFamily:o}=u.style,{fontSize:v}=t;(v!==this._layoutTextLastFontSize||o!==this._layoutTextLastFontFamily)&&(this._layoutTextCtx.font=`${v*this._devicePixelRatio}px ${o}`,this._layoutTextLastFontSize=v,this._layoutTextLastFontFamily=o);const{width:S}=this._layoutTextCtx.measureText(u.textContent);if(S>0){const p=this._devicePixelRatio*t.canvasWidth/S;this._enhanceTextSelection&&(t.scale=p),e=`scaleX(${p})`}}if(0!==t.angle&&(e=`rotate(${t.angle}deg) ${e}`),e.length>0&&(this._enhanceTextSelection&&(t.originalTransform=e),u.style.transform=e),t.hasText&&this._container.append(u),t.hasEOL){const o=document.createElement("br");o.setAttribute("role","presentation"),this._container.append(o)}}_render(u=0){const t=(0,r.createPromiseCapability)();let e=Object.create(null);const o=this._document.createElement("canvas");if(o.height=o.width=D,this._layoutTextCtx=o.getContext("2d",{alpha:!1}),this._textContent)this._processItems(this._textContent.items,this._textContent.styles),t.resolve();else{if(!this._textContentStream)throw new Error('Neither "textContent" nor "textContentStream" parameters specified.');{const v=()=>{this._reader.read().then(({value:S,done:p})=>{p?t.resolve():(Object.assign(e,S.styles),this._processItems(S.items,e),v())},t.reject)};this._reader=this._textContentStream.getReader(),v()}}t.promise.then(()=>{e=null,u?this._renderTimer=setTimeout(()=>{U(this),this._renderTimer=null},u):U(this)},this._capability.reject)}expandTextDivs(u=!1){if(!this._enhanceTextSelection||!this._renderingDone)return;null!==this._bounds&&(function w(P){const u=P._bounds,t=P._viewport,e=function a(P,u,t){const e=t.map(function(v,S){return{x1:v.left,y1:v.top,x2:v.right,y2:v.bottom,index:S,x1New:void 0,x2New:void 0}});_(P,e);const o=new Array(t.length);for(const v of e)o[v.index]={left:v.x1New,top:0,right:v.x2New,bottom:0};t.map(function(v,S){const p=o[S],c=e[S];c.x1=v.top,c.y1=P-p.right,c.x2=v.bottom,c.y2=P-p.left,c.index=S,c.x1New=void 0,c.x2New=void 0}),_(u,e);for(const v of e){const S=v.index;o[S].top=v.x1New,o[S].bottom=v.x2New}return o}(t.width,t.height,u);for(let o=0;o<e.length;o++){const v=u[o].div,S=P._textDivProperties.get(v);if(0===S.angle){S.paddingLeft=u[o].left-e[o].left,S.paddingTop=u[o].top-e[o].top,S.paddingRight=e[o].right-u[o].right,S.paddingBottom=e[o].bottom-u[o].bottom,P._textDivProperties.set(v,S);continue}const p=e[o],c=u[o],b=c.m,N=b[0],I=b[1],Y=[[0,0],[0,c.size[1]],[c.size[0],0],c.size],W=new Float64Array(64);for(let z=0,ee=Y.length;z<ee;z++){const oe=r.Util.applyTransform(Y[z],b);W[z+0]=N&&(p.left-oe[0])/N,W[z+4]=I&&(p.top-oe[1])/I,W[z+8]=N&&(p.right-oe[0])/N,W[z+12]=I&&(p.bottom-oe[1])/I,W[z+16]=I&&(p.left-oe[0])/-I,W[z+20]=N&&(p.top-oe[1])/N,W[z+24]=I&&(p.right-oe[0])/-I,W[z+28]=N&&(p.bottom-oe[1])/N,W[z+32]=N&&(p.left-oe[0])/-N,W[z+36]=I&&(p.top-oe[1])/-I,W[z+40]=N&&(p.right-oe[0])/-N,W[z+44]=I&&(p.bottom-oe[1])/-I,W[z+48]=I&&(p.left-oe[0])/I,W[z+52]=N&&(p.top-oe[1])/-N,W[z+56]=I&&(p.right-oe[0])/I,W[z+60]=N&&(p.bottom-oe[1])/-N}const j=1+Math.min(Math.abs(N),Math.abs(I));S.paddingLeft=C(W,32,16)/j,S.paddingTop=C(W,48,16)/j,S.paddingRight=C(W,0,16)/j,S.paddingBottom=C(W,16,16)/j,P._textDivProperties.set(v,S)}}(this),this._bounds=null);const t=[],e=[];for(let o=0,v=this._textDivs.length;o<v;o++){const S=this._textDivs[o],p=this._textDivProperties.get(S);p.hasText&&(u?(t.length=0,e.length=0,p.originalTransform&&t.push(p.originalTransform),p.paddingTop>0?(e.push(`${p.paddingTop}px`),t.push(`translateY(${-p.paddingTop}px)`)):e.push(0),e.push(p.paddingRight>0?p.paddingRight/p.scale+"px":0),e.push(p.paddingBottom>0?`${p.paddingBottom}px`:0),p.paddingLeft>0?(e.push(p.paddingLeft/p.scale+"px"),t.push(`translateX(${-p.paddingLeft/p.scale}px)`)):e.push(0),S.style.padding=e.join(" "),t.length&&(S.style.transform=t.join(" "))):(S.style.padding=null,S.style.transform=p.originalTransform))}}}s.TextLayerRenderTask=A},(Z,s,k)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.SVGGraphics=void 0;var r=k(8),m=k(1),n=k(3);let D=class{constructor(){(0,m.unreachable)("Not implemented: SVGGraphics")}};s.SVGGraphics=D;{let a=function(t){let e=[];const o=[];for(const v of t)"save"!==v.fn?"restore"===v.fn?e=o.pop():e.push(v):(e.push({fnId:92,fn:"group",items:[]}),o.push(e),e=e.at(-1).items);return e},_=function(t){if(Number.isInteger(t))return t.toString();const e=t.toFixed(10);let o=e.length-1;if("0"!==e[o])return e;do{o--}while("0"===e[o]);return e.substring(0,"."===e[o]?o:o+1)},A=function(t){if(0===t[4]&&0===t[5]){if(0===t[1]&&0===t[2])return 1===t[0]&&1===t[3]?"":`scale(${_(t[0])} ${_(t[3])})`;if(t[0]===t[3]&&t[1]===-t[2]){const e=180*Math.acos(t[0])/Math.PI;return`rotate(${_(e)})`}}else if(1===t[0]&&0===t[1]&&0===t[2]&&1===t[3])return`translate(${_(t[4])} ${_(t[5])})`;return`matrix(${_(t[0])} ${_(t[1])} ${_(t[2])} ${_(t[3])} ${_(t[4])} ${_(t[5])})`};const Q={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},F="http://www.w3.org/XML/1998/namespace",T="http://www.w3.org/1999/xlink",G=["butt","round","square"],q=["miter","round","bevel"],U=function(t,e="",o=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!o)return URL.createObjectURL(new Blob([t],{type:e}));const v="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let S=`data:${e};base64,`;for(let p=0,c=t.length;p<c;p+=3){const b=255&t[p],N=255&t[p+1],I=255&t[p+2];S+=v[b>>2]+v[(3&b)<<4|N>>4]+v[p+1<c?(15&N)<<2|I>>6:64]+v[p+2<c?63&I:64]}return S},C=function(){const t=new Uint8Array([137,80,78,71,13,10,26,10]),o=new Int32Array(256);for(let I=0;I<256;I++){let Y=I;for(let W=0;W<8;W++)Y=1&Y?3988292384^Y>>1&2147483647:Y>>1&2147483647;o[I]=Y}function S(I,Y,W,j){let z=j;const ee=Y.length;W[z]=ee>>24&255,W[z+1]=ee>>16&255,W[z+2]=ee>>8&255,W[z+3]=255&ee,z+=4,W[z]=255&I.charCodeAt(0),W[z+1]=255&I.charCodeAt(1),W[z+2]=255&I.charCodeAt(2),W[z+3]=255&I.charCodeAt(3),z+=4,W.set(Y,z),z+=Y.length;const oe=function v(I,Y,W){let j=-1;for(let z=Y;z<W;z++)j=j>>>8^o[255&(j^I[z])];return-1^j}(W,j+4,z);W[z]=oe>>24&255,W[z+1]=oe>>16&255,W[z+2]=oe>>8&255,W[z+3]=255&oe}function b(I){let Y=I.length;const W=65535,j=Math.ceil(Y/W),z=new Uint8Array(2+Y+5*j+4);let ee=0;z[ee++]=120,z[ee++]=156;let oe=0;for(;Y>W;)z[ee++]=0,z[ee++]=255,z[ee++]=255,z[ee++]=0,z[ee++]=0,z.set(I.subarray(oe,oe+W),ee),ee+=W,oe+=W,Y-=W;z[ee++]=1,z[ee++]=255&Y,z[ee++]=Y>>8&255,z[ee++]=255&~Y,z[ee++]=(65535&~Y)>>8&255,z.set(I.subarray(oe),ee),ee+=I.length-oe;const V=function p(I,Y,W){let j=1,z=0;for(let ee=Y;ee<W;++ee)j=(j+(255&I[ee]))%65521,z=(z+j)%65521;return z<<16|j}(I,0,I.length);return z[ee++]=V>>24&255,z[ee++]=V>>16&255,z[ee++]=V>>8&255,z[ee++]=255&V,z}return function(Y,W,j){return function N(I,Y,W,j){const z=I.width,ee=I.height;let oe,V,g;const l=I.data;switch(Y){case m.ImageKind.GRAYSCALE_1BPP:V=0,oe=1,g=z+7>>3;break;case m.ImageKind.RGB_24BPP:V=2,oe=8,g=3*z;break;case m.ImageKind.RGBA_32BPP:V=6,oe=8,g=4*z;break;default:throw new Error("invalid format")}const x=new Uint8Array((1+g)*ee);let L=0,E=0;for(let $=0;$<ee;++$)x[L++]=0,x.set(l.subarray(E,E+g),L),E+=g,L+=g;if(Y===m.ImageKind.GRAYSCALE_1BPP&&j){L=0;for(let $=0;$<ee;$++){L++;for(let K=0;K<g;K++)x[L++]^=255}}const i=new Uint8Array([z>>24&255,z>>16&255,z>>8&255,255&z,ee>>24&255,ee>>16&255,ee>>8&255,255&ee,oe,V,0,0,0]),h=function c(I){if(!n.isNodeJS)return b(I);try{let Y;Y=parseInt(process.versions.node)>=8?I:Buffer.from(I);const W=__webpack_require__(2258).deflateSync(Y,{level:9});return W instanceof Uint8Array?W:new Uint8Array(W)}catch(Y){(0,m.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+Y)}return b(I)}(x),O=new Uint8Array(t.length+36+i.length+h.length);let R=0;return O.set(t,R),R+=t.length,S("IHDR",i,O,R),R+=12+i.length,S("IDATA",h,O,R),R+=12+h.length,S("IEND",new Uint8Array(0),O,R),U(O,"image/png",W)}(Y,void 0===Y.kind?m.ImageKind.GRAYSCALE_1BPP:Y.kind,W,j)}}();class w{constructor(){this.fontSizeScale=1,this.fontWeight=Q.fontWeight,this.fontSize=0,this.textMatrix=m.IDENTITY_MATRIX,this.fontMatrix=m.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=m.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=Q.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(e,o){this.x=e,this.y=o}}let y=0,P=0,u=0;s.SVGGraphics=D=class{constructor(t,e,o=!1){(0,r.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new r.DOMSVGFactory,this.current=new w,this.transformMatrix=m.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=t,this.objs=e,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!o,this._operatorIdMapping=[];for(const v in m.OPS)this._operatorIdMapping[m.OPS[v]]=v}save(){this.transformStack.push(this.transformMatrix);const t=this.current;this.extraStack.push(t),this.current=t.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(t){this.save(),this.executeOpTree(t),this.restore()}loadDependencies(t){const e=t.fnArray,o=t.argsArray;for(let v=0,S=e.length;v<S;v++)if(e[v]===m.OPS.dependency)for(const p of o[v]){const c=p.startsWith("g_")?this.commonObjs:this.objs,b=new Promise(N=>{c.get(p,N)});this.current.dependencies.push(b)}return Promise.all(this.current.dependencies)}transform(t,e,o,v,S,p){this.transformMatrix=m.Util.transform(this.transformMatrix,[t,e,o,v,S,p]),this.tgrp=null}getSVG(t,e){this.viewport=e;const o=this._initialize(e);return this.loadDependencies(t).then(()=>(this.transformMatrix=m.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(t)),o))}convertOpList(t){const e=this._operatorIdMapping,o=t.argsArray,v=t.fnArray,S=[];for(let p=0,c=v.length;p<c;p++){const b=v[p];S.push({fnId:b,fn:e[b],args:o[p]})}return a(S)}executeOpTree(t){for(const e of t){const o=e.fn,S=e.args;switch(0|e.fnId){case m.OPS.beginText:this.beginText();break;case m.OPS.dependency:break;case m.OPS.setLeading:this.setLeading(S);break;case m.OPS.setLeadingMoveText:this.setLeadingMoveText(S[0],S[1]);break;case m.OPS.setFont:this.setFont(S);break;case m.OPS.showText:case m.OPS.showSpacedText:this.showText(S[0]);break;case m.OPS.endText:this.endText();break;case m.OPS.moveText:this.moveText(S[0],S[1]);break;case m.OPS.setCharSpacing:this.setCharSpacing(S[0]);break;case m.OPS.setWordSpacing:this.setWordSpacing(S[0]);break;case m.OPS.setHScale:this.setHScale(S[0]);break;case m.OPS.setTextMatrix:this.setTextMatrix(S[0],S[1],S[2],S[3],S[4],S[5]);break;case m.OPS.setTextRise:this.setTextRise(S[0]);break;case m.OPS.setTextRenderingMode:this.setTextRenderingMode(S[0]);break;case m.OPS.setLineWidth:this.setLineWidth(S[0]);break;case m.OPS.setLineJoin:this.setLineJoin(S[0]);break;case m.OPS.setLineCap:this.setLineCap(S[0]);break;case m.OPS.setMiterLimit:this.setMiterLimit(S[0]);break;case m.OPS.setFillRGBColor:this.setFillRGBColor(S[0],S[1],S[2]);break;case m.OPS.setStrokeRGBColor:this.setStrokeRGBColor(S[0],S[1],S[2]);break;case m.OPS.setStrokeColorN:this.setStrokeColorN(S);break;case m.OPS.setFillColorN:this.setFillColorN(S);break;case m.OPS.shadingFill:this.shadingFill(S[0]);break;case m.OPS.setDash:this.setDash(S[0],S[1]);break;case m.OPS.setRenderingIntent:this.setRenderingIntent(S[0]);break;case m.OPS.setFlatness:this.setFlatness(S[0]);break;case m.OPS.setGState:this.setGState(S[0]);break;case m.OPS.fill:this.fill();break;case m.OPS.eoFill:this.eoFill();break;case m.OPS.stroke:this.stroke();break;case m.OPS.fillStroke:this.fillStroke();break;case m.OPS.eoFillStroke:this.eoFillStroke();break;case m.OPS.clip:this.clip("nonzero");break;case m.OPS.eoClip:this.clip("evenodd");break;case m.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case m.OPS.paintImageXObject:this.paintImageXObject(S[0]);break;case m.OPS.paintInlineImageXObject:this.paintInlineImageXObject(S[0]);break;case m.OPS.paintImageMaskXObject:this.paintImageMaskXObject(S[0]);break;case m.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(S[0],S[1]);break;case m.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case m.OPS.closePath:this.closePath();break;case m.OPS.closeStroke:this.closeStroke();break;case m.OPS.closeFillStroke:this.closeFillStroke();break;case m.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case m.OPS.nextLine:this.nextLine();break;case m.OPS.transform:this.transform(S[0],S[1],S[2],S[3],S[4],S[5]);break;case m.OPS.constructPath:this.constructPath(S[0],S[1]);break;case m.OPS.endPath:this.endPath();break;case 92:this.group(e.items);break;default:(0,m.warn)(`Unimplemented operator ${o}`)}}}setWordSpacing(t){this.current.wordSpacing=t}setCharSpacing(t){this.current.charSpacing=t}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(t,e,o,v,S,p){const c=this.current;c.textMatrix=c.lineMatrix=[t,e,o,v,S,p],c.textMatrixScale=Math.hypot(t,e),c.x=c.lineX=0,c.y=c.lineY=0,c.xcoords=[],c.ycoords=[],c.tspan=this.svgFactory.createElement("svg:tspan"),c.tspan.setAttributeNS(null,"font-family",c.fontFamily),c.tspan.setAttributeNS(null,"font-size",`${_(c.fontSize)}px`),c.tspan.setAttributeNS(null,"y",_(-c.y)),c.txtElement=this.svgFactory.createElement("svg:text"),c.txtElement.append(c.tspan)}beginText(){const t=this.current;t.x=t.lineX=0,t.y=t.lineY=0,t.textMatrix=m.IDENTITY_MATRIX,t.lineMatrix=m.IDENTITY_MATRIX,t.textMatrixScale=1,t.tspan=this.svgFactory.createElement("svg:tspan"),t.txtElement=this.svgFactory.createElement("svg:text"),t.txtgrp=this.svgFactory.createElement("svg:g"),t.xcoords=[],t.ycoords=[]}moveText(t,e){const o=this.current;o.x=o.lineX+=t,o.y=o.lineY+=e,o.xcoords=[],o.ycoords=[],o.tspan=this.svgFactory.createElement("svg:tspan"),o.tspan.setAttributeNS(null,"font-family",o.fontFamily),o.tspan.setAttributeNS(null,"font-size",`${_(o.fontSize)}px`),o.tspan.setAttributeNS(null,"y",_(-o.y))}showText(t){const e=this.current,o=e.font,v=e.fontSize;if(0===v)return;const S=e.fontSizeScale,p=e.charSpacing,c=e.wordSpacing,b=e.fontDirection,N=e.textHScale*b,I=o.vertical,Y=I?1:-1,W=o.defaultVMetrics,j=v*e.fontMatrix[0];let z=0;for(const V of t){if(null===V){z+=b*c;continue}if("number"==typeof V){z+=Y*V*v/1e3;continue}const g=(V.isSpace?c:0)+p,l=V.fontChar;let x,L,i,E=V.width;if(I){let h;const d=V.vmetric||W;h=V.vmetric?d[1]:.5*E,h=-h*j,E=d?-d[0]:E,x=h/S,L=(z+d[2]*j)/S}else x=z/S,L=0;(V.isInFont||o.missingFile)&&(e.xcoords.push(e.x+x),I&&e.ycoords.push(-e.y+L),e.tspan.textContent+=l),i=I?E*j-g*b:E*j+g*b,z+=i}e.tspan.setAttributeNS(null,"x",e.xcoords.map(_).join(" ")),e.tspan.setAttributeNS(null,"y",I?e.ycoords.map(_).join(" "):_(-e.y)),I?e.y-=z:e.x+=z*N,e.tspan.setAttributeNS(null,"font-family",e.fontFamily),e.tspan.setAttributeNS(null,"font-size",`${_(e.fontSize)}px`),e.fontStyle!==Q.fontStyle&&e.tspan.setAttributeNS(null,"font-style",e.fontStyle),e.fontWeight!==Q.fontWeight&&e.tspan.setAttributeNS(null,"font-weight",e.fontWeight);const ee=e.textRenderingMode&m.TextRenderingMode.FILL_STROKE_MASK;ee===m.TextRenderingMode.FILL||ee===m.TextRenderingMode.FILL_STROKE?(e.fillColor!==Q.fillColor&&e.tspan.setAttributeNS(null,"fill",e.fillColor),e.fillAlpha<1&&e.tspan.setAttributeNS(null,"fill-opacity",e.fillAlpha)):e.tspan.setAttributeNS(null,"fill",e.textRenderingMode===m.TextRenderingMode.ADD_TO_PATH?"transparent":"none"),(ee===m.TextRenderingMode.STROKE||ee===m.TextRenderingMode.FILL_STROKE)&&this._setStrokeAttributes(e.tspan,1/(e.textMatrixScale||1));let oe=e.textMatrix;0!==e.textRise&&(oe=oe.slice(),oe[5]+=e.textRise),e.txtElement.setAttributeNS(null,"transform",`${A(oe)} scale(${_(N)}, -1)`),e.txtElement.setAttributeNS(F,"xml:space","preserve"),e.txtElement.append(e.tspan),e.txtgrp.append(e.txtElement),this._ensureTransformGroup().append(e.txtElement)}setLeadingMoveText(t,e){this.setLeading(-e),this.moveText(t,e)}addFontStyle(t){if(!t.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const e=U(t.data,t.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${t.loadedName}"; src: url(${e}); }\n`}setFont(t){const e=this.current,o=this.commonObjs.get(t[0]);let v=t[1];e.font=o,this.embedFonts&&!o.missingFile&&!this.embeddedFonts[o.loadedName]&&(this.addFontStyle(o),this.embeddedFonts[o.loadedName]=o),e.fontMatrix=o.fontMatrix||m.FONT_IDENTITY_MATRIX;let S="normal";o.black?S="900":o.bold&&(S="bold");const p=o.italic?"italic":"normal";v<0?(v=-v,e.fontDirection=-1):e.fontDirection=1,e.fontSize=v,e.fontFamily=o.loadedName,e.fontWeight=S,e.fontStyle=p,e.tspan=this.svgFactory.createElement("svg:tspan"),e.tspan.setAttributeNS(null,"y",_(-e.y)),e.xcoords=[],e.ycoords=[]}endText(){const t=this.current;t.textRenderingMode&m.TextRenderingMode.ADD_TO_PATH_FLAG&&t.txtElement?.hasChildNodes()&&(t.element=t.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(t){t>0&&(this.current.lineWidth=t)}setLineCap(t){this.current.lineCap=G[t]}setLineJoin(t){this.current.lineJoin=q[t]}setMiterLimit(t){this.current.miterLimit=t}setStrokeAlpha(t){this.current.strokeAlpha=t}setStrokeRGBColor(t,e,o){this.current.strokeColor=m.Util.makeHexColor(t,e,o)}setFillAlpha(t){this.current.fillAlpha=t}setFillRGBColor(t,e,o){this.current.fillColor=m.Util.makeHexColor(t,e,o),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(t){this.current.strokeColor=this._makeColorN_Pattern(t)}setFillColorN(t){this.current.fillColor=this._makeColorN_Pattern(t)}shadingFill(t){const e=this.viewport.width,o=this.viewport.height,v=m.Util.inverseTransform(this.transformMatrix),S=m.Util.applyTransform([0,0],v),p=m.Util.applyTransform([0,o],v),c=m.Util.applyTransform([e,0],v),b=m.Util.applyTransform([e,o],v),N=Math.min(S[0],p[0],c[0],b[0]),I=Math.min(S[1],p[1],c[1],b[1]),Y=Math.max(S[0],p[0],c[0],b[0]),W=Math.max(S[1],p[1],c[1],b[1]),j=this.svgFactory.createElement("svg:rect");j.setAttributeNS(null,"x",N),j.setAttributeNS(null,"y",I),j.setAttributeNS(null,"width",Y-N),j.setAttributeNS(null,"height",W-I),j.setAttributeNS(null,"fill",this._makeShadingPattern(t)),this.current.fillAlpha<1&&j.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(j)}_makeColorN_Pattern(t){return"TilingPattern"===t[0]?this._makeTilingPattern(t):this._makeShadingPattern(t)}_makeTilingPattern(t){const e=t[1],o=t[2],v=t[3]||m.IDENTITY_MATRIX,[S,p,c,b]=t[4],N=t[5],I=t[6],Y=t[7],W="shading"+u++,[j,z,ee,oe]=m.Util.normalizeRect([...m.Util.applyTransform([S,p],v),...m.Util.applyTransform([c,b],v)]),[V,g]=m.Util.singularValueDecompose2dScale(v),l=N*V,x=I*g,L=this.svgFactory.createElement("svg:pattern");L.setAttributeNS(null,"id",W),L.setAttributeNS(null,"patternUnits","userSpaceOnUse"),L.setAttributeNS(null,"width",l),L.setAttributeNS(null,"height",x),L.setAttributeNS(null,"x",`${j}`),L.setAttributeNS(null,"y",`${z}`);const E=this.svg,i=this.transformMatrix,h=this.current.fillColor,d=this.current.strokeColor,O=this.svgFactory.create(ee-j,oe-z);if(this.svg=O,this.transformMatrix=v,2===Y){const R=m.Util.makeHexColor(...e);this.current.fillColor=R,this.current.strokeColor=R}return this.executeOpTree(this.convertOpList(o)),this.svg=E,this.transformMatrix=i,this.current.fillColor=h,this.current.strokeColor=d,L.append(O.childNodes[0]),this.defs.append(L),`url(#${W})`}_makeShadingPattern(t){switch("string"==typeof t&&(t=this.objs.get(t)),t[0]){case"RadialAxial":const e="shading"+u++,o=t[3];let v;switch(t[1]){case"axial":const S=t[4],p=t[5];v=this.svgFactory.createElement("svg:linearGradient"),v.setAttributeNS(null,"id",e),v.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),v.setAttributeNS(null,"x1",S[0]),v.setAttributeNS(null,"y1",S[1]),v.setAttributeNS(null,"x2",p[0]),v.setAttributeNS(null,"y2",p[1]);break;case"radial":const c=t[4],b=t[5],N=t[6],I=t[7];v=this.svgFactory.createElement("svg:radialGradient"),v.setAttributeNS(null,"id",e),v.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),v.setAttributeNS(null,"cx",b[0]),v.setAttributeNS(null,"cy",b[1]),v.setAttributeNS(null,"r",I),v.setAttributeNS(null,"fx",c[0]),v.setAttributeNS(null,"fy",c[1]),v.setAttributeNS(null,"fr",N);break;default:throw new Error(`Unknown RadialAxial type: ${t[1]}`)}for(const S of o){const p=this.svgFactory.createElement("svg:stop");p.setAttributeNS(null,"offset",S[0]),p.setAttributeNS(null,"stop-color",S[1]),v.append(p)}return this.defs.append(v),`url(#${e})`;case"Mesh":return(0,m.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${t[0]}`)}}setDash(t,e){this.current.dashArray=t,this.current.dashPhase=e}constructPath(t,e){const o=this.current;let v=o.x,S=o.y,p=[],c=0;for(const b of t)switch(0|b){case m.OPS.rectangle:v=e[c++],S=e[c++];const Y=v+e[c++],W=S+e[c++];p.push("M",_(v),_(S),"L",_(Y),_(S),"L",_(Y),_(W),"L",_(v),_(W),"Z");break;case m.OPS.moveTo:v=e[c++],S=e[c++],p.push("M",_(v),_(S));break;case m.OPS.lineTo:v=e[c++],S=e[c++],p.push("L",_(v),_(S));break;case m.OPS.curveTo:v=e[c+4],S=e[c+5],p.push("C",_(e[c]),_(e[c+1]),_(e[c+2]),_(e[c+3]),_(v),_(S)),c+=6;break;case m.OPS.curveTo2:p.push("C",_(v),_(S),_(e[c]),_(e[c+1]),_(e[c+2]),_(e[c+3])),v=e[c+2],S=e[c+3],c+=4;break;case m.OPS.curveTo3:v=e[c+2],S=e[c+3],p.push("C",_(e[c]),_(e[c+1]),_(v),_(S),_(v),_(S)),c+=4;break;case m.OPS.closePath:p.push("Z")}p=p.join(" "),o.path&&t.length>0&&t[0]!==m.OPS.rectangle&&t[0]!==m.OPS.moveTo?p=o.path.getAttributeNS(null,"d")+p:(o.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(o.path)),o.path.setAttributeNS(null,"d",p),o.path.setAttributeNS(null,"fill","none"),o.element=o.path,o.setCurrentPoint(v,S)}endPath(){const t=this.current;if(t.path=null,!this.pendingClip)return;if(!t.element)return void(this.pendingClip=null);const e="clippath"+y++,o=this.svgFactory.createElement("svg:clipPath");o.setAttributeNS(null,"id",e),o.setAttributeNS(null,"transform",A(this.transformMatrix));const v=t.element.cloneNode(!0);if(v.setAttributeNS(null,"clip-rule","evenodd"===this.pendingClip?"evenodd":"nonzero"),this.pendingClip=null,o.append(v),this.defs.append(o),t.activeClipUrl){t.clipGroup=null;for(const S of this.extraStack)S.clipGroup=null;o.setAttributeNS(null,"clip-path",t.activeClipUrl)}t.activeClipUrl=`url(#${e})`,this.tgrp=null}clip(t){this.pendingClip=t}closePath(){const t=this.current;if(t.path){const e=`${t.path.getAttributeNS(null,"d")}Z`;t.path.setAttributeNS(null,"d",e)}}setLeading(t){this.current.leading=-t}setTextRise(t){this.current.textRise=t}setTextRenderingMode(t){this.current.textRenderingMode=t}setHScale(t){this.current.textHScale=t/100}setRenderingIntent(t){}setFlatness(t){}setGState(t){for(const[e,o]of t)switch(e){case"LW":this.setLineWidth(o);break;case"LC":this.setLineCap(o);break;case"LJ":this.setLineJoin(o);break;case"ML":this.setMiterLimit(o);break;case"D":this.setDash(o[0],o[1]);break;case"RI":this.setRenderingIntent(o);break;case"FL":this.setFlatness(o);break;case"Font":this.setFont(o);break;case"CA":this.setStrokeAlpha(o);break;case"ca":this.setFillAlpha(o);break;default:(0,m.warn)(`Unimplemented graphic state operator ${e}`)}}fill(){const t=this.current;t.element&&(t.element.setAttributeNS(null,"fill",t.fillColor),t.element.setAttributeNS(null,"fill-opacity",t.fillAlpha),this.endPath())}stroke(){const t=this.current;t.element&&(this._setStrokeAttributes(t.element),t.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(t,e=1){const o=this.current;let v=o.dashArray;1!==e&&v.length>0&&(v=v.map(function(S){return e*S})),t.setAttributeNS(null,"stroke",o.strokeColor),t.setAttributeNS(null,"stroke-opacity",o.strokeAlpha),t.setAttributeNS(null,"stroke-miterlimit",_(o.miterLimit)),t.setAttributeNS(null,"stroke-linecap",o.lineCap),t.setAttributeNS(null,"stroke-linejoin",o.lineJoin),t.setAttributeNS(null,"stroke-width",_(e*o.lineWidth)+"px"),t.setAttributeNS(null,"stroke-dasharray",v.map(_).join(" ")),t.setAttributeNS(null,"stroke-dashoffset",_(e*o.dashPhase)+"px")}eoFill(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const t=this.svgFactory.createElement("svg:rect");t.setAttributeNS(null,"x","0"),t.setAttributeNS(null,"y","0"),t.setAttributeNS(null,"width","1px"),t.setAttributeNS(null,"height","1px"),t.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(t)}paintImageXObject(t){const e=t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t);e?this.paintInlineImageXObject(e):(0,m.warn)(`Dependent image with object ID ${t} is not ready yet`)}paintInlineImageXObject(t,e){const o=t.width,v=t.height,S=C(t,this.forceDataSchema,!!e),p=this.svgFactory.createElement("svg:rect");p.setAttributeNS(null,"x","0"),p.setAttributeNS(null,"y","0"),p.setAttributeNS(null,"width",_(o)),p.setAttributeNS(null,"height",_(v)),this.current.element=p,this.clip("nonzero");const c=this.svgFactory.createElement("svg:image");c.setAttributeNS(T,"xlink:href",S),c.setAttributeNS(null,"x","0"),c.setAttributeNS(null,"y",_(-v)),c.setAttributeNS(null,"width",_(o)+"px"),c.setAttributeNS(null,"height",_(v)+"px"),c.setAttributeNS(null,"transform",`scale(${_(1/o)} ${_(-1/v)})`),e?e.append(c):this._ensureTransformGroup().append(c)}paintImageMaskXObject(t){const e=this.current,o=t.width,v=t.height,S=e.fillColor;e.maskId="mask"+P++;const p=this.svgFactory.createElement("svg:mask");p.setAttributeNS(null,"id",e.maskId);const c=this.svgFactory.createElement("svg:rect");c.setAttributeNS(null,"x","0"),c.setAttributeNS(null,"y","0"),c.setAttributeNS(null,"width",_(o)),c.setAttributeNS(null,"height",_(v)),c.setAttributeNS(null,"fill",S),c.setAttributeNS(null,"mask",`url(#${e.maskId})`),this.defs.append(p),this._ensureTransformGroup().append(c),this.paintInlineImageXObject(t,p)}paintFormXObjectBegin(t,e){if(Array.isArray(t)&&6===t.length&&this.transform(t[0],t[1],t[2],t[3],t[4],t[5]),e){const o=e[2]-e[0],v=e[3]-e[1],S=this.svgFactory.createElement("svg:rect");S.setAttributeNS(null,"x",e[0]),S.setAttributeNS(null,"y",e[1]),S.setAttributeNS(null,"width",_(o)),S.setAttributeNS(null,"height",_(v)),this.current.element=S,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(t){const e=this.svgFactory.create(t.width,t.height),o=this.svgFactory.createElement("svg:defs");e.append(o),this.defs=o;const v=this.svgFactory.createElement("svg:g");return v.setAttributeNS(null,"transform",A(t.transform)),e.append(v),this.svg=v,e}_ensureClipGroup(){if(!this.current.clipGroup){const t=this.svgFactory.createElement("svg:g");t.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(t),this.current.clipGroup=t}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",A(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}}},(Z,s,k)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.PDFNodeStream=void 0;var r=k(1),m=k(33);const n=__webpack_require__(172),D=__webpack_require__(2001),Q=__webpack_require__(3779),F=__webpack_require__(6558),T=/^file:\/\/\/[a-zA-Z]:\//;s.PDFNodeStream=class q{constructor(u){this.source=u,this.url=function G(P){const u=F.parse(P);return"file:"===u.protocol||u.host?u:/^[a-z]:[/\\]/i.test(P)?F.parse(`file:///${P}`):(u.host||(u.protocol="file:"),u)}(u.url),this.isHttp="http:"===this.url.protocol||"https:"===this.url.protocol,this.isFsUrl="file:"===this.url.protocol,this.httpHeaders=this.isHttp&&u.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return(0,r.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new A(this):new a(this),this._fullRequestReader}getRangeReader(u,t){if(t<=this._progressiveDataLength)return null;const e=this.isFsUrl?new y(this,u,t):new _(this,u,t);return this._rangeRequestReaders.push(e),e}cancelAllRequests(u){this._fullRequestReader&&this._fullRequestReader.cancel(u);for(const t of this._rangeRequestReaders.slice(0))t.cancel(u)}};class U{constructor(u){this._url=u.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=u.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=(0,r.createPromiseCapability)(),this._headersCapability=(0,r.createPromiseCapability)()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}read(){var u=this;return _asyncToGenerator(function*(){if(yield u._readCapability.promise,u._done)return{value:void 0,done:!0};if(u._storedError)throw u._storedError;const t=u._readableStream.read();return null===t?(u._readCapability=(0,r.createPromiseCapability)(),u.read()):(u._loaded+=t.length,u.onProgress&&u.onProgress({loaded:u._loaded,total:u._contentLength}),{value:new Uint8Array(t).buffer,done:!1})})()}cancel(u){this._readableStream?this._readableStream.destroy(u):this._error(u)}_error(u){this._storedError=u,this._readCapability.resolve()}_setReadableStream(u){this._readableStream=u,u.on("readable",()=>{this._readCapability.resolve()}),u.on("end",()=>{u.destroy(),this._done=!0,this._readCapability.resolve()}),u.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new r.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class C{constructor(u){this._url=u.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=(0,r.createPromiseCapability)(),this._isStreamingSupported=!u.source.disableStream}get isStreamingSupported(){return this._isStreamingSupported}read(){var u=this;return _asyncToGenerator(function*(){if(yield u._readCapability.promise,u._done)return{value:void 0,done:!0};if(u._storedError)throw u._storedError;const t=u._readableStream.read();return null===t?(u._readCapability=(0,r.createPromiseCapability)(),u.read()):(u._loaded+=t.length,u.onProgress&&u.onProgress({loaded:u._loaded}),{value:new Uint8Array(t).buffer,done:!1})})()}cancel(u){this._readableStream?this._readableStream.destroy(u):this._error(u)}_error(u){this._storedError=u,this._readCapability.resolve()}_setReadableStream(u){this._readableStream=u,u.on("readable",()=>{this._readCapability.resolve()}),u.on("end",()=>{u.destroy(),this._done=!0,this._readCapability.resolve()}),u.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function w(P,u){return{protocol:P.protocol,auth:P.auth,host:P.hostname,port:P.port,path:P.path,method:"GET",headers:u}}class a extends U{constructor(u){super(u);const t=e=>{if(404===e.statusCode){const p=new r.MissingPDFException(`Missing PDF "${this._url}".`);return this._storedError=p,void this._headersCapability.reject(p)}this._headersCapability.resolve(),this._setReadableStream(e);const o=p=>this._readableStream.headers[p.toLowerCase()],{allowRangeRequests:v,suggestedLength:S}=(0,m.validateRangeRequestCapabilities)({getResponseHeader:o,isHttp:u.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=v,this._contentLength=S||this._contentLength,this._filename=(0,m.extractFilenameFromHeader)(o)};this._request=null,this._request="http:"===this._url.protocol?D.request(w(this._url,u.httpHeaders),t):Q.request(w(this._url,u.httpHeaders),t),this._request.on("error",e=>{this._storedError=e,this._headersCapability.reject(e)}),this._request.end()}}class _ extends C{constructor(u,t,e){super(u),this._httpHeaders={};for(const v in u.httpHeaders){const S=u.httpHeaders[v];typeof S>"u"||(this._httpHeaders[v]=S)}this._httpHeaders.Range=`bytes=${t}-${e-1}`;const o=v=>{if(404!==v.statusCode)this._setReadableStream(v);else{const S=new r.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=S}};this._request=null,this._request="http:"===this._url.protocol?D.request(w(this._url,this._httpHeaders),o):Q.request(w(this._url,this._httpHeaders),o),this._request.on("error",v=>{this._storedError=v}),this._request.end()}}class A extends U{constructor(u){super(u);let t=decodeURIComponent(this._url.path);T.test(this._url.href)&&(t=t.replace(/^\//,"")),n.lstat(t,(e,o)=>{if(e)return"ENOENT"===e.code&&(e=new r.MissingPDFException(`Missing PDF "${t}".`)),this._storedError=e,void this._headersCapability.reject(e);this._contentLength=o.size,this._setReadableStream(n.createReadStream(t)),this._headersCapability.resolve()})}}class y extends C{constructor(u,t,e){super(u);let o=decodeURIComponent(this._url.path);T.test(this._url.href)&&(o=o.replace(/^\//,"")),this._setReadableStream(n.createReadStream(o,{start:t,end:e-1}))}}},(Z,s,k)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.createResponseStatusError=function F(G,q){return 404===G||0===G&&q.startsWith("file:")?new r.MissingPDFException('Missing PDF "'+q+'".'):new r.UnexpectedResponseException(`Unexpected server response (${G}) while retrieving PDF "${q}".`,G)},s.extractFilenameFromHeader=function Q(G){const q=G("Content-Disposition");if(q){let U=(0,m.getFilenameFromContentDispositionHeader)(q);if(U.includes("%"))try{U=decodeURIComponent(U)}catch{}if((0,n.isPdfFile)(U))return U}return null},s.validateRangeRequestCapabilities=function D({getResponseHeader:G,isHttp:q,rangeChunkSize:U,disableRange:C}){const w={allowRangeRequests:!1,suggestedLength:void 0},a=parseInt(G("Content-Length"),10);return!Number.isInteger(a)||(w.suggestedLength=a,a<=2*U)||C||!q||"bytes"!==G("Accept-Ranges")||"identity"!==(G("Content-Encoding")||"identity")||(w.allowRangeRequests=!0),w},s.validateResponseStatus=function T(G){return 200===G||206===G};var r=k(1),m=k(34),n=k(8)},(Z,s,k)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.getFilenameFromContentDispositionHeader=function m(n){let D=!0,Q=F("filename\\*","i").exec(n);if(Q){Q=Q[1];let a=U(Q);return a=unescape(a),a=C(a),a=w(a),G(a)}if(Q=function q(a){const _=[];let A;const y=F("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;null!==(A=y.exec(a));){let[,u,t,e]=A;if(u=parseInt(u,10),u in _){if(0===u)break}else _[u]=[t,e]}const P=[];for(let u=0;u<_.length&&u in _;++u){let[t,e]=_[u];e=U(e),t&&(e=unescape(e),0===u&&(e=C(e))),P.push(e)}return P.join("")}(n),Q)return G(w(Q));if(Q=F("filename","i").exec(n),Q){Q=Q[1];let a=U(Q);return a=w(a),G(a)}function F(a,_){return new RegExp("(?:^|;)\\s*"+a+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',_)}function T(a,_){if(a){if(!/^[\x00-\xFF]+$/.test(_))return _;try{const A=new TextDecoder(a,{fatal:!0}),y=(0,r.stringToBytes)(_);_=A.decode(y),D=!1}catch{}}return _}function G(a){return D&&/[\x80-\xff]/.test(a)&&(a=T("utf-8",a),D&&(a=T("iso-8859-1",a))),a}function U(a){if(a.startsWith('"')){const _=a.slice(1).split('\\"');for(let A=0;A<_.length;++A){const y=_[A].indexOf('"');-1!==y&&(_[A]=_[A].slice(0,y),_.length=A+1),_[A]=_[A].replace(/\\(.)/g,"$1")}a=_.join('"')}return a}function C(a){const _=a.indexOf("'");return-1===_?a:T(a.slice(0,_),a.slice(_+1).replace(/^[^']*'/,""))}function w(a){return!a.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(a)?a:a.replace(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(_,A,y,P){if("q"===y||"Q"===y)return T(A,P=(P=P.replace(/_/g," ")).replace(/=([0-9a-fA-F]{2})/g,function(u,t){return String.fromCharCode(parseInt(t,16))}));try{P=atob(P)}catch{}return T(A,P)})}return""};var r=k(1)},(Z,s,k)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.PDFNetworkStream=void 0;var r=k(1),m=k(33);class F{constructor(C,w={}){this.url=C,this.isHttp=/^https?:/i.test(C),this.httpHeaders=this.isHttp&&w.httpHeaders||Object.create(null),this.withCredentials=w.withCredentials||!1,this.getXhr=w.getXhr||function(){return new XMLHttpRequest},this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(C,w,a){const _={begin:C,end:w};for(const A in a)_[A]=a[A];return this.request(_)}requestFull(C){return this.request(C)}request(C){const w=this.getXhr(),a=this.currXhrId++,_=this.pendingRequests[a]={xhr:w};w.open("GET",this.url),w.withCredentials=this.withCredentials;for(const A in this.httpHeaders){const y=this.httpHeaders[A];typeof y>"u"||w.setRequestHeader(A,y)}return this.isHttp&&"begin"in C&&"end"in C?(w.setRequestHeader("Range",`bytes=${C.begin}-${C.end-1}`),_.expectedStatus=206):_.expectedStatus=200,w.responseType="arraybuffer",C.onError&&(w.onerror=function(A){C.onError(w.status)}),w.onreadystatechange=this.onStateChange.bind(this,a),w.onprogress=this.onProgress.bind(this,a),_.onHeadersReceived=C.onHeadersReceived,_.onDone=C.onDone,_.onError=C.onError,_.onProgress=C.onProgress,w.send(null),a}onProgress(C,w){const a=this.pendingRequests[C];a&&a.onProgress?.(w)}onStateChange(C,w){const a=this.pendingRequests[C];if(!a)return;const _=a.xhr;if(_.readyState>=2&&a.onHeadersReceived&&(a.onHeadersReceived(),delete a.onHeadersReceived),4!==_.readyState||!(C in this.pendingRequests))return;if(delete this.pendingRequests[C],0===_.status&&this.isHttp)return void a.onError?.(_.status);const A=_.status||200;if((200!==A||206!==a.expectedStatus)&&A!==a.expectedStatus)return void a.onError?.(_.status);const P=function Q(U){const C=U.response;return"string"!=typeof C?C:(0,r.stringToBytes)(C).buffer}(_);if(206===A){const u=_.getResponseHeader("Content-Range"),t=/bytes (\d+)-(\d+)\/(\d+)/.exec(u);a.onDone({begin:parseInt(t[1],10),chunk:P})}else P?a.onDone({begin:0,chunk:P}):a.onError?.(_.status)}getRequestXhr(C){return this.pendingRequests[C].xhr}isPendingRequest(C){return C in this.pendingRequests}abortRequest(C){const w=this.pendingRequests[C].xhr;delete this.pendingRequests[C],w.abort()}}s.PDFNetworkStream=class T{constructor(C){this._source=C,this._manager=new F(C.url,{httpHeaders:C.httpHeaders,withCredentials:C.withCredentials}),this._rangeChunkSize=C.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(C){const w=this._rangeRequestReaders.indexOf(C);w>=0&&this._rangeRequestReaders.splice(w,1)}getFullReader(){return(0,r.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new G(this._manager,this._source),this._fullRequestReader}getRangeReader(C,w){const a=new q(this._manager,C,w);return a.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(a),a}cancelAllRequests(C){this._fullRequestReader?.cancel(C);for(const w of this._rangeRequestReaders.slice(0))w.cancel(C)}};class G{constructor(C,w){this._manager=C;const a={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=w.url,this._fullRequestId=C.requestFull(a),this._headersReceivedCapability=(0,r.createPromiseCapability)(),this._disableRange=w.disableRange||!1,this._contentLength=w.length,this._rangeChunkSize=w.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const C=this._fullRequestId,w=this._manager.getRequestXhr(C),a=y=>w.getResponseHeader(y),{allowRangeRequests:_,suggestedLength:A}=(0,m.validateRangeRequestCapabilities)({getResponseHeader:a,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});_&&(this._isRangeSupported=!0),this._contentLength=A||this._contentLength,this._filename=(0,m.extractFilenameFromHeader)(a),this._isRangeSupported&&this._manager.abortRequest(C),this._headersReceivedCapability.resolve()}_onDone(C){if(C&&(this._requests.length>0?this._requests.shift().resolve({value:C.chunk,done:!1}):this._cachedChunks.push(C.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const w of this._requests)w.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(C){this._storedError=(0,m.createResponseStatusError)(C,this._url),this._headersReceivedCapability.reject(this._storedError);for(const w of this._requests)w.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(C){this.onProgress?.({loaded:C.loaded,total:C.lengthComputable?C.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}read(){var C=this;return _asyncToGenerator(function*(){if(C._storedError)throw C._storedError;if(C._cachedChunks.length>0)return{value:C._cachedChunks.shift(),done:!1};if(C._done)return{value:void 0,done:!0};const w=(0,r.createPromiseCapability)();return C._requests.push(w),w.promise})()}cancel(C){this._done=!0,this._headersReceivedCapability.reject(C);for(const w of this._requests)w.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class q{constructor(C,w,a){this._manager=C;const _={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=C.url,this._requestId=C.requestRange(w,a,_),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){this.onClosed?.(this)}_onDone(C){const w=C.chunk;this._requests.length>0?this._requests.shift().resolve({value:w,done:!1}):this._queuedChunk=w,this._done=!0;for(const a of this._requests)a.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(C){this._storedError=(0,m.createResponseStatusError)(C,this._url);for(const w of this._requests)w.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(C){this.isStreamingSupported||this.onProgress?.({loaded:C.loaded})}get isStreamingSupported(){return!1}read(){var C=this;return _asyncToGenerator(function*(){if(C._storedError)throw C._storedError;if(null!==C._queuedChunk){const a=C._queuedChunk;return C._queuedChunk=null,{value:a,done:!1}}if(C._done)return{value:void 0,done:!0};const w=(0,r.createPromiseCapability)();return C._requests.push(w),w.promise})()}cancel(C){this._done=!0;for(const w of this._requests)w.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(Z,s,k)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.PDFFetchStream=void 0;var r=k(1),m=k(33);function n(G,q,U){return{method:"GET",headers:G,signal:U.signal,mode:"cors",credentials:q?"include":"same-origin",redirect:"follow"}}function D(G){const q=new Headers;for(const U in G){const C=G[U];typeof C>"u"||q.append(U,C)}return q}s.PDFFetchStream=class Q{constructor(q){this.source=q,this.isHttp=/^https?:/i.test(q.url),this.httpHeaders=this.isHttp&&q.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return(0,r.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new F(this),this._fullRequestReader}getRangeReader(q,U){if(U<=this._progressiveDataLength)return null;const C=new T(this,q,U);return this._rangeRequestReaders.push(C),C}cancelAllRequests(q){this._fullRequestReader&&this._fullRequestReader.cancel(q);for(const U of this._rangeRequestReaders.slice(0))U.cancel(q)}};class F{constructor(q){this._stream=q,this._reader=null,this._loaded=0,this._filename=null;const U=q.source;this._withCredentials=U.withCredentials||!1,this._contentLength=U.length,this._headersCapability=(0,r.createPromiseCapability)(),this._disableRange=U.disableRange||!1,this._rangeChunkSize=U.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!U.disableStream,this._isRangeSupported=!U.disableRange,this._headers=D(this._stream.httpHeaders);const C=U.url;fetch(C,n(this._headers,this._withCredentials,this._abortController)).then(w=>{if(!(0,m.validateResponseStatus)(w.status))throw(0,m.createResponseStatusError)(w.status,C);this._reader=w.body.getReader(),this._headersCapability.resolve();const a=y=>w.headers.get(y),{allowRangeRequests:_,suggestedLength:A}=(0,m.validateRangeRequestCapabilities)({getResponseHeader:a,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=_,this._contentLength=A||this._contentLength,this._filename=(0,m.extractFilenameFromHeader)(a),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new r.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}read(){var q=this;return _asyncToGenerator(function*(){yield q._headersCapability.promise;const{value:U,done:C}=yield q._reader.read();return C?{value:U,done:C}:(q._loaded+=U.byteLength,q.onProgress&&q.onProgress({loaded:q._loaded,total:q._contentLength}),{value:new Uint8Array(U).buffer,done:!1})})()}cancel(q){this._reader&&this._reader.cancel(q),this._abortController.abort()}}class T{constructor(q,U,C){this._stream=q,this._reader=null,this._loaded=0;const w=q.source;this._withCredentials=w.withCredentials||!1,this._readCapability=(0,r.createPromiseCapability)(),this._isStreamingSupported=!w.disableStream,this._abortController=new AbortController,this._headers=D(this._stream.httpHeaders),this._headers.append("Range",`bytes=${U}-${C-1}`);const a=w.url;fetch(a,n(this._headers,this._withCredentials,this._abortController)).then(_=>{if(!(0,m.validateResponseStatus)(_.status))throw(0,m.createResponseStatusError)(_.status,a);this._readCapability.resolve(),this._reader=_.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}read(){var q=this;return _asyncToGenerator(function*(){yield q._readCapability.promise;const{value:U,done:C}=yield q._reader.read();return C?{value:U,done:C}:(q._loaded+=U.byteLength,q.onProgress&&q.onProgress({loaded:q._loaded}),{value:new Uint8Array(U).buffer,done:!1})})()}cancel(q){this._reader&&this._reader.cancel(q),this._abortController.abort()}}}],__webpack_module_cache__={};function __w_pdfjs_require__(Z){var s=__webpack_module_cache__[Z];if(void 0!==s)return s.exports;var k=__webpack_module_cache__[Z]={exports:{}};return __webpack_modules__[Z](k,k.exports,__w_pdfjs_require__),k.exports}var __nested_webpack_exports__={};return(()=>{var Z=__nested_webpack_exports__;Object.defineProperty(Z,"__esModule",{value:!0}),Object.defineProperty(Z,"AnnotationEditorLayer",{enumerable:!0,get:function(){return m.AnnotationEditorLayer}}),Object.defineProperty(Z,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return s.AnnotationEditorParamsType}}),Object.defineProperty(Z,"AnnotationEditorType",{enumerable:!0,get:function(){return s.AnnotationEditorType}}),Object.defineProperty(Z,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return n.AnnotationEditorUIManager}}),Object.defineProperty(Z,"AnnotationLayer",{enumerable:!0,get:function(){return D.AnnotationLayer}}),Object.defineProperty(Z,"AnnotationMode",{enumerable:!0,get:function(){return s.AnnotationMode}}),Object.defineProperty(Z,"CMapCompressionType",{enumerable:!0,get:function(){return s.CMapCompressionType}}),Object.defineProperty(Z,"GlobalWorkerOptions",{enumerable:!0,get:function(){return Q.GlobalWorkerOptions}}),Object.defineProperty(Z,"InvalidPDFException",{enumerable:!0,get:function(){return s.InvalidPDFException}}),Object.defineProperty(Z,"LoopbackPort",{enumerable:!0,get:function(){return k.LoopbackPort}}),Object.defineProperty(Z,"MissingPDFException",{enumerable:!0,get:function(){return s.MissingPDFException}}),Object.defineProperty(Z,"OPS",{enumerable:!0,get:function(){return s.OPS}}),Object.defineProperty(Z,"PDFDataRangeTransport",{enumerable:!0,get:function(){return k.PDFDataRangeTransport}}),Object.defineProperty(Z,"PDFDateString",{enumerable:!0,get:function(){return r.PDFDateString}}),Object.defineProperty(Z,"PDFWorker",{enumerable:!0,get:function(){return k.PDFWorker}}),Object.defineProperty(Z,"PasswordResponses",{enumerable:!0,get:function(){return s.PasswordResponses}}),Object.defineProperty(Z,"PermissionFlag",{enumerable:!0,get:function(){return s.PermissionFlag}}),Object.defineProperty(Z,"PixelsPerInch",{enumerable:!0,get:function(){return r.PixelsPerInch}}),Object.defineProperty(Z,"RenderingCancelledException",{enumerable:!0,get:function(){return r.RenderingCancelledException}}),Object.defineProperty(Z,"SVGGraphics",{enumerable:!0,get:function(){return G.SVGGraphics}}),Object.defineProperty(Z,"UNSUPPORTED_FEATURES",{enumerable:!0,get:function(){return s.UNSUPPORTED_FEATURES}}),Object.defineProperty(Z,"UnexpectedResponseException",{enumerable:!0,get:function(){return s.UnexpectedResponseException}}),Object.defineProperty(Z,"Util",{enumerable:!0,get:function(){return s.Util}}),Object.defineProperty(Z,"VerbosityLevel",{enumerable:!0,get:function(){return s.VerbosityLevel}}),Object.defineProperty(Z,"XfaLayer",{enumerable:!0,get:function(){return q.XfaLayer}}),Object.defineProperty(Z,"build",{enumerable:!0,get:function(){return k.build}}),Object.defineProperty(Z,"createPromiseCapability",{enumerable:!0,get:function(){return s.createPromiseCapability}}),Object.defineProperty(Z,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return s.createValidAbsoluteUrl}}),Object.defineProperty(Z,"getDocument",{enumerable:!0,get:function(){return k.getDocument}}),Object.defineProperty(Z,"getFilenameFromUrl",{enumerable:!0,get:function(){return r.getFilenameFromUrl}}),Object.defineProperty(Z,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return r.getPdfFilenameFromUrl}}),Object.defineProperty(Z,"getXfaPageViewport",{enumerable:!0,get:function(){return r.getXfaPageViewport}}),Object.defineProperty(Z,"isPdfFile",{enumerable:!0,get:function(){return r.isPdfFile}}),Object.defineProperty(Z,"loadScript",{enumerable:!0,get:function(){return r.loadScript}}),Object.defineProperty(Z,"renderTextLayer",{enumerable:!0,get:function(){return T.renderTextLayer}}),Object.defineProperty(Z,"shadow",{enumerable:!0,get:function(){return s.shadow}}),Object.defineProperty(Z,"version",{enumerable:!0,get:function(){return k.version}});var s=__w_pdfjs_require__(1),k=__w_pdfjs_require__(4),r=__w_pdfjs_require__(8),m=__w_pdfjs_require__(22),n=__w_pdfjs_require__(7),D=__w_pdfjs_require__(27),Q=__w_pdfjs_require__(15),F=__w_pdfjs_require__(3),T=__w_pdfjs_require__(30),G=__w_pdfjs_require__(31),q=__w_pdfjs_require__(29);if(F.isNodeJS){const{PDFNodeStream:w}=__w_pdfjs_require__(32);(0,k.setPDFNetworkStreamFactory)(a=>new w(a))}else{const{PDFNetworkStream:w}=__w_pdfjs_require__(35),{PDFFetchStream:a}=__w_pdfjs_require__(36);(0,k.setPDFNetworkStreamFactory)(_=>(0,r.isValidFetchUrl)(_.url)?new a(_):new w(_))}})(),__nested_webpack_exports__})(),module.exports=k()},1016:(Z,s,k)=>{var r=k(1860).default,m=k(5764).default,n=k(4467).default,D=k(7156).default,Q=k(9159).default,F=k(468).default,T=k(5661).default;globalThis,Z.exports=(()=>{"use strict";var G=[,(w,a,_)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.DefaultXfaLayerFactory=a.DefaultTextLayerFactory=a.DefaultStructTreeLayerFactory=a.DefaultAnnotationLayerFactory=a.DefaultAnnotationEditorLayerFactory=void 0;var A=_(2),y=_(5),P=_(4),u=_(6),t=_(8),e=_(9),o=_(10);a.DefaultAnnotationLayerFactory=class v{createAnnotationLayerBuilder({pageDiv:I,pdfPage:Y,annotationStorage:W=null,imageResourcesPath:j="",renderForms:z=!0,l10n:ee=P.NullL10n,enableScripting:oe=!1,hasJSActionsPromise:V=null,mouseState:g=null,fieldObjectsPromise:l=null,annotationCanvasMap:x=null,accessibilityManager:L=null}){return new y.AnnotationLayerBuilder({pageDiv:I,pdfPage:Y,imageResourcesPath:j,renderForms:z,linkService:new u.SimpleLinkService,l10n:ee,annotationStorage:W,enableScripting:oe,hasJSActionsPromise:V,fieldObjectsPromise:l,mouseState:g,annotationCanvasMap:x,accessibilityManager:L})}},a.DefaultAnnotationEditorLayerFactory=class S{createAnnotationEditorLayerBuilder({uiManager:I=null,pageDiv:Y,pdfPage:W,accessibilityManager:j=null,l10n:z,annotationStorage:ee=null}){return new A.AnnotationEditorLayerBuilder({uiManager:I,pageDiv:Y,pdfPage:W,accessibilityManager:j,l10n:z,annotationStorage:ee})}},a.DefaultStructTreeLayerFactory=class p{createStructTreeLayerBuilder({pdfPage:I}){return new t.StructTreeLayerBuilder({pdfPage:I})}},a.DefaultTextLayerFactory=class c{createTextLayerBuilder({textLayerDiv:I,pageIndex:Y,viewport:W,enhanceTextSelection:j=!1,eventBus:z,highlighter:ee,accessibilityManager:oe=null}){return new e.TextLayerBuilder({textLayerDiv:I,pageIndex:Y,viewport:W,enhanceTextSelection:j,eventBus:z,highlighter:ee,accessibilityManager:oe})}},a.DefaultXfaLayerFactory=class b{createXfaLayerBuilder({pageDiv:I,pdfPage:Y,annotationStorage:W=null}){return new o.XfaLayerBuilder({pageDiv:I,pdfPage:Y,annotationStorage:W,linkService:new u.SimpleLinkService})}}},(w,a,_)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.AnnotationEditorLayerBuilder=void 0;var A=_(3),y=_(4),P=new WeakMap;a.AnnotationEditorLayerBuilder=class u{constructor(e){Q(this,P,{writable:!0,value:void 0}),this.pageDiv=e.pageDiv,this.pdfPage=e.pdfPage,this.annotationStorage=e.annotationStorage||null,this.accessibilityManager=e.accessibilityManager,this.l10n=e.l10n||y.NullL10n,this.annotationEditorLayer=null,this.div=null,this._cancelled=!1,T(this,P,e.uiManager)}render(e,o="display"){var v=this;return D(function*(){if("display"!==o||v._cancelled)return;const S=e.clone({dontFlip:!0});if(v.div)return v.annotationEditorLayer.update({viewport:S}),void v.show();v.div=document.createElement("div"),v.div.className="annotationEditorLayer",v.div.tabIndex=0,v.pageDiv.append(v.div),v.annotationEditorLayer=new A.AnnotationEditorLayer({uiManager:F(v,P),div:v.div,annotationStorage:v.annotationStorage,accessibilityManager:v.accessibilityManager,pageIndex:v.pdfPage._pageIndex,l10n:v.l10n,viewport:S}),v.annotationEditorLayer.render({viewport:S,div:v.div,annotations:null,intent:o})})()}cancel(){this._cancelled=!0,this.destroy()}hide(){this.div&&(this.div.hidden=!0)}show(){this.div&&(this.div.hidden=!1)}destroy(){this.div&&(this.pageDiv=null,this.annotationEditorLayer.destroy(),this.div.remove())}}},w=>{let a;a=typeof window<"u"&&window["pdfjs-dist/build/pdf"]?window["pdfjs-dist/build/pdf"]:k(9627),w.exports=a},(w,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.NullL10n=void 0,a.fixupLangCode=function P(e){return y[e?.toLowerCase()]||e},a.getL10nFallback=A;const _={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}} \xd7 {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}} \xd7 {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",print_progress_percent:"{{progress}}%","toggle_sidebar.title":"Toggle Sidebar","toggle_sidebar_notification2.title":"Toggle Sidebar (document contains outline/attachments/layers)",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",error_version_info:"PDF.js v{{version}} (build: {{build}})",error_message:"Message: {{message}}",error_stack:"Stack: {{stack}}",error_file:"File: {{file}}",error_line:"Line: {{line}}",rendering_error:"An error occurred while rendering the page.",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading:"Loading\u2026",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts.",free_text_default_content:"Enter text\u2026",editor_free_text_aria_label:"FreeText Editor",editor_ink_aria_label:"Ink Editor",editor_ink_canvas_aria_label:"User-created image"};function A(e,o){switch(e){case"find_match_count":e=`find_match_count[${1===o.total?"one":"other"}]`;break;case"find_match_count_limit":e=`find_match_count_limit[${1===o.limit?"one":"other"}]`}return _[e]||""}const y={en:"en-US",es:"es-ES",fy:"fy-NL",ga:"ga-IE",gu:"gu-IN",hi:"hi-IN",hy:"hy-AM",nb:"nb-NO",ne:"ne-NP",nn:"nn-NO",pa:"pa-IN",pt:"pt-PT",sv:"sv-SE",zh:"zh-CN"};a.NullL10n={getLanguage:()=>D(function*(){return"en-us"})(),getDirection:()=>D(function*(){return"ltr"})(),get:(e,o=null,v=A(e,o))=>D(function*(){return function u(e,o){return o?e.replace(/\{\{\s*(\w+)\s*\}\}/g,(v,S)=>S in o?o[S]:"{{"+S+"}}"):e}(v,o)})(),translate:e=>D(function*(){})()}},(w,a,_)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.AnnotationLayerBuilder=void 0;var A=_(3),y=_(4);a.AnnotationLayerBuilder=class P{constructor({pageDiv:t,pdfPage:e,linkService:o,downloadManager:v,annotationStorage:S=null,imageResourcesPath:p="",renderForms:c=!0,l10n:b=y.NullL10n,enableScripting:N=!1,hasJSActionsPromise:I=null,fieldObjectsPromise:Y=null,mouseState:W=null,annotationCanvasMap:j=null,accessibilityManager:z=null}){this.pageDiv=t,this.pdfPage=e,this.linkService=o,this.downloadManager=v,this.imageResourcesPath=p,this.renderForms=c,this.l10n=b,this.annotationStorage=S,this.enableScripting=N,this._hasJSActionsPromise=I,this._fieldObjectsPromise=Y,this._mouseState=W,this._annotationCanvasMap=j,this._accessibilityManager=z,this.div=null,this._cancelled=!1}render(t,e="display"){var o=this;return D(function*(){const[v,S=!1,p=null]=yield Promise.all([o.pdfPage.getAnnotations({intent:e}),o._hasJSActionsPromise,o._fieldObjectsPromise]);if(o._cancelled||0===v.length)return;const c={viewport:t.clone({dontFlip:!0}),div:o.div,annotations:v,page:o.pdfPage,imageResourcesPath:o.imageResourcesPath,renderForms:o.renderForms,linkService:o.linkService,downloadManager:o.downloadManager,annotationStorage:o.annotationStorage,enableScripting:o.enableScripting,hasJSActions:S,fieldObjects:p,mouseState:o._mouseState,annotationCanvasMap:o._annotationCanvasMap,accessibilityManager:o._accessibilityManager};o.div?A.AnnotationLayer.update(c):(o.div=document.createElement("div"),o.div.className="annotationLayer",o.pageDiv.append(o.div),c.div=o.div,A.AnnotationLayer.render(c),o.l10n.translate(o.div))})()}cancel(){this._cancelled=!0}hide(){this.div&&(this.div.hidden=!0)}}},(w,a,_)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.SimpleLinkService=a.PDFLinkService=a.LinkTarget=void 0;var A=_(7);const P={NONE:0,SELF:1,BLANK:2,PARENT:3,TOP:4};function u(c,{url:b,target:N,rel:I,enabled:Y=!0}={}){if(!b||"string"!=typeof b)throw new Error('A valid "url" parameter must provided.');const W=(0,A.removeNullCharacters)(b);Y?c.href=c.title=W:(c.href="",c.title=`Disabled: ${W}`,c.onclick=()=>!1);let j="";switch(N){case P.NONE:break;case P.SELF:j="_self";break;case P.BLANK:j="_blank";break;case P.PARENT:j="_parent";break;case P.TOP:j="_top"}c.target=j,c.rel="string"==typeof I?I:"noopener noreferrer nofollow"}a.LinkTarget=P;var t=new WeakMap,e=new WeakSet;class o{constructor({eventBus:b,externalLinkTarget:N=null,externalLinkRel:I=null,ignoreDestinationZoom:Y=!1}={}){r(this,e),Q(this,t,{writable:!0,value:new Map}),this.eventBus=b,this.externalLinkTarget=N,this.externalLinkRel=I,this.externalLinkEnabled=!0,this._ignoreDestinationZoom=Y,this.baseUrl=null,this.pdfDocument=null,this.pdfViewer=null,this.pdfHistory=null}setDocument(b,N=null){this.baseUrl=N,this.pdfDocument=b,F(this,t).clear()}setViewer(b){this.pdfViewer=b}setHistory(b){this.pdfHistory=b}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return this.pdfViewer.currentPageNumber}set page(b){this.pdfViewer.currentPageNumber=b}get rotation(){return this.pdfViewer.pagesRotation}set rotation(b){this.pdfViewer.pagesRotation=b}goToDestination(b){var N=this;return D(function*(){if(!N.pdfDocument)return;let I,Y;"string"==typeof b?(I=b,Y=yield N.pdfDocument.getDestination(b)):(I=null,Y=yield b),Array.isArray(Y)?n(N,e,v).call(N,b,I,Y):console.error(`PDFLinkService.goToDestination: "${Y}" is not a valid destination array, for dest="${b}".`)})()}goToPage(b){if(!this.pdfDocument)return;const N="string"==typeof b&&this.pdfViewer.pageLabelToPageNumber(b)||0|b;Number.isInteger(N)&&N>0&&N<=this.pagesCount?(this.pdfHistory&&(this.pdfHistory.pushCurrentPosition(),this.pdfHistory.pushPage(N)),this.pdfViewer.scrollPageIntoView({pageNumber:N})):console.error(`PDFLinkService.goToPage: "${b}" is not a valid page.`)}addLinkAttributes(b,N,I=!1){u(b,{url:N,target:I?P.BLANK:this.externalLinkTarget,rel:this.externalLinkRel,enabled:this.externalLinkEnabled})}getDestinationHash(b){if("string"==typeof b){if(b.length>0)return this.getAnchorUrl("#"+escape(b))}else if(Array.isArray(b)){const N=JSON.stringify(b);if(N.length>0)return this.getAnchorUrl("#"+escape(N))}return this.getAnchorUrl("")}getAnchorUrl(b){return(this.baseUrl||"")+b}setHash(b){if(!this.pdfDocument)return;let N,I;if(b.includes("=")){const Y=(0,A.parseQueryString)(b);if(Y.has("search")&&this.eventBus.dispatch("findfromurlhash",{source:this,query:Y.get("search").replace(/"/g,""),phraseSearch:"true"===Y.get("phrase")}),Y.has("page")&&(N=0|Y.get("page")||1),Y.has("zoom")){const W=Y.get("zoom").split(","),j=W[0],z=parseFloat(j);j.includes("Fit")?"Fit"===j||"FitB"===j?I=[null,{name:j}]:"FitH"===j||"FitBH"===j||"FitV"===j||"FitBV"===j?I=[null,{name:j},W.length>1?0|W[1]:null]:"FitR"===j?5!==W.length?console.error('PDFLinkService.setHash: Not enough parameters for "FitR".'):I=[null,{name:j},0|W[1],0|W[2],0|W[3],0|W[4]]:console.error(`PDFLinkService.setHash: "${j}" is not a valid zoom value.`):I=[null,{name:"XYZ"},W.length>1?0|W[1]:null,W.length>2?0|W[2]:null,z?z/100:j]}I?this.pdfViewer.scrollPageIntoView({pageNumber:N||this.page,destArray:I,allowNegativeOffset:!0}):N&&(this.page=N),Y.has("pagemode")&&this.eventBus.dispatch("pagemode",{source:this,mode:Y.get("pagemode")}),Y.has("nameddest")&&this.goToDestination(Y.get("nameddest"))}else{I=unescape(b);try{I=JSON.parse(I),Array.isArray(I)||(I=I.toString())}catch{}if("string"==typeof I||m(o,o,S).call(o,I))return void this.goToDestination(I);console.error(`PDFLinkService.setHash: "${unescape(b)}" is not a valid destination.`)}}executeNamedAction(b){switch(b){case"GoBack":this.pdfHistory?.back();break;case"GoForward":this.pdfHistory?.forward();break;case"NextPage":this.pdfViewer.nextPage();break;case"PrevPage":this.pdfViewer.previousPage();break;case"LastPage":this.page=this.pagesCount;break;case"FirstPage":this.page=1}this.eventBus.dispatch("namedaction",{source:this,action:b})}cachePageRef(b,N){if(!N)return;const I=0===N.gen?`${N.num}R`:`${N.num}R${N.gen}`;F(this,t).set(I,b)}_cachedPageNumber(b){if(!b)return null;const N=0===b.gen?`${b.num}R`:`${b.num}R${b.gen}`;return F(this,t).get(N)||null}isPageVisible(b){return this.pdfViewer.isPageVisible(b)}isPageCached(b){return this.pdfViewer.isPageCached(b)}}function v(c,b=null,N){const I=N[0];let Y;if("object"==typeof I&&null!==I){if(Y=this._cachedPageNumber(I),!Y)return void this.pdfDocument.getPageIndex(I).then(W=>{this.cachePageRef(W+1,I),n(this,e,v).call(this,c,b,N)}).catch(()=>{console.error(`PDFLinkService.#goToDestinationHelper: "${I}" is not a valid page reference, for dest="${c}".`)})}else{if(!Number.isInteger(I))return void console.error(`PDFLinkService.#goToDestinationHelper: "${I}" is not a valid destination reference, for dest="${c}".`);Y=I+1}!Y||Y<1||Y>this.pagesCount?console.error(`PDFLinkService.#goToDestinationHelper: "${Y}" is not a valid page number, for dest="${c}".`):(this.pdfHistory&&(this.pdfHistory.pushCurrentPosition(),this.pdfHistory.push({namedDest:b,explicitDest:N,pageNumber:Y})),this.pdfViewer.scrollPageIntoView({pageNumber:Y,destArray:N,ignoreDestinationZoom:this._ignoreDestinationZoom}))}function S(c){if(!Array.isArray(c))return!1;const b=c.length;if(b<2)return!1;const N=c[0];if(!("object"==typeof N&&Number.isInteger(N.num)&&Number.isInteger(N.gen)||Number.isInteger(N)&&N>=0))return!1;const I=c[1];if("object"!=typeof I||"string"!=typeof I.name)return!1;let Y=!0;switch(I.name){case"XYZ":if(5!==b)return!1;break;case"Fit":case"FitB":return 2===b;case"FitH":case"FitBH":case"FitV":case"FitBV":if(3!==b)return!1;break;case"FitR":if(6!==b)return!1;Y=!1;break;default:return!1}for(let W=2;W<b;W++){const j=c[W];if(!("number"==typeof j||Y&&null===j))return!1}return!0}a.PDFLinkService=o,a.SimpleLinkService=class p{constructor(){this.externalLinkEnabled=!0}get pagesCount(){return 0}get page(){return 0}set page(b){}get rotation(){return 0}set rotation(b){}goToDestination(b){return D(function*(){})()}goToPage(b){}addLinkAttributes(b,N,I=!1){u(b,{url:N,enabled:this.externalLinkEnabled})}getDestinationHash(b){return"#"}getAnchorUrl(b){return"#"}setHash(b){}executeNamedAction(b){}cachePageRef(b,N){}isPageVisible(b){return!0}isPageCached(b){return!0}}},(w,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.animationStarted=a.VERTICAL_PADDING=a.UNKNOWN_SCALE=a.TextLayerMode=a.SpreadMode=a.SidebarView=a.ScrollMode=a.SCROLLBAR_PADDING=a.RenderingStates=a.RendererType=a.ProgressBar=a.PresentationModeState=a.OutputScale=a.MIN_SCALE=a.MAX_SCALE=a.MAX_AUTO_SCALE=a.DEFAULT_SCALE_VALUE=a.DEFAULT_SCALE_DELTA=a.DEFAULT_SCALE=a.AutoPrintRegExp=void 0,a.apiPageLayoutToViewerModes=function ke(ge){let Pe=I.VERTICAL,Me=Y.NONE;switch(ge){case"SinglePage":Pe=I.PAGE;break;case"OneColumn":break;case"TwoPageLeft":Pe=I.PAGE;case"TwoColumnLeft":Me=Y.ODD;break;case"TwoPageRight":Pe=I.PAGE;case"TwoColumnRight":Me=Y.EVEN}return{scrollMode:Pe,spreadMode:Me}},a.apiPageModeToSidebarView=function Fe(ge){switch(ge){case"UseNone":return c.NONE;case"UseThumbs":return c.THUMBS;case"UseOutlines":return c.OUTLINE;case"UseAttachments":return c.ATTACHMENTS;case"UseOC":return c.LAYERS}return c.NONE},a.approximateFraction=function L(ge){if(Math.floor(ge)===ge)return[ge,1];const Pe=1/ge;if(Pe>8)return[1,8];if(Math.floor(Pe)===Pe)return[1,Pe];const xe=ge>1?Pe:ge;let se,Se=0,B=1,ne=1,re=1;for(;;){const X=Se+ne,J=B+re;if(J>8)break;xe<=X/J?(ne=X,re=J):(Se=X,B=J)}return se=xe-Se/B<ne/re-xe?xe===ge?[Se,B]:[B,Se]:xe===ge?[ne,re]:[re,ne],se},a.backtrackBeforeAllVisibleElements=h,a.binarySearchFirstItem=x,a.docStyle=void 0,a.getActiveOrFocusedElement=function we(){let ge=document,Pe=ge.activeElement||ge.querySelector(":focus");for(;Pe?.shadowRoot;)ge=Pe.shadowRoot,Pe=ge.activeElement||ge.querySelector(":focus");return Pe},a.getPageSizeInches=function i({view:ge,userUnit:Pe,rotate:Me}){const[xe,Se,B,ne]=ge,re=Me%180!=0,se=(B-xe)/72*Pe,X=(ne-Se)/72*Pe;return{width:re?X:se,height:re?se:X}},a.getVisibleElements=function d({scrollEl:ge,views:Pe,sortByVisibility:Me=!1,horizontal:xe=!1,rtl:Se=!1}){const B=ge.scrollTop,ne=B+ge.clientHeight,re=ge.scrollLeft,se=re+ge.clientWidth,H=[],f=new Set,M=Pe.length;let le=x(Pe,xe?function J(be){const ye=be.div,Ee=ye.offsetLeft+ye.clientLeft;return Se?Ee<se:Ee+ye.clientWidth>re}:function X(be){const ye=be.div;return ye.offsetTop+ye.clientTop+ye.clientHeight>B});le>0&&le<M&&!xe&&(le=h(le,Pe,B));let ve=xe?se:-1;for(let be=le;be<M;be++){const ye=Pe[be],Ee=ye.div,Te=Ee.offsetLeft+Ee.clientLeft,Re=Ee.offsetTop+Ee.clientTop,Le=Ee.clientWidth,Oe=Ee.clientHeight,Ce=Te+Le,Ie=Re+Oe;if(-1===ve)Ie>=ne&&(ve=Ie);else if((xe?Te:Re)>ve)break;if(Ie<=B||Re>=ne||Ce<=re||Te>=se)continue;const Be=Math.max(0,B-Re)+Math.max(0,Ie-ne),Ne=(Le-(Math.max(0,re-Te)+Math.max(0,Ce-se)))/Le;H.push({id:ye.id,x:Te,y:Re,view:ye,percent:(Oe-Be)/Oe*Ne*100|0,widthPercent:100*Ne|0}),f.add(ye.id)}const he=H[0],pe=H.at(-1);return Me&&H.sort(function(be,ye){const Ee=be.percent-ye.percent;return Math.abs(Ee)>.001?-Ee:be.id-ye.id}),{first:he,last:pe,views:H,ids:f}},a.isPortraitOrientation=function de(ge){return ge.width<=ge.height},a.isValidRotation=function K(ge){return Number.isInteger(ge)&&ge%90==0},a.isValidScrollMode=function ce(ge){return Number.isInteger(ge)&&Object.values(I).includes(ge)&&ge!==I.UNKNOWN},a.isValidSpreadMode=function te(ge){return Number.isInteger(ge)&&Object.values(Y).includes(ge)&&ge!==Y.UNKNOWN},a.noContextMenuHandler=function O(ge){ge.preventDefault()},a.normalizeWheelEventDelta=function $(ge){let Pe=R(ge);return 0===ge.deltaMode?Pe/=900:1===ge.deltaMode&&(Pe/=30),Pe},a.normalizeWheelEventDirection=R,a.parseQueryString=function oe(ge){const Pe=new Map;for(const[Me,xe]of new URLSearchParams(ge))Pe.set(Me.toLowerCase(),xe);return Pe},a.removeNullCharacters=function l(ge,Pe=!1){return"string"!=typeof ge?(console.error("The argument must be a string."),ge):(Pe&&(ge=ge.replace(g," ")),ge.replace(V,""))},a.roundToDivide=function E(ge,Pe){const Me=ge%Pe;return 0===Me?ge:Math.round(ge-Me+Pe)},a.scrollIntoView=function z(ge,Pe,Me=!1){let xe=ge.offsetParent;if(!xe)return void console.error("offsetParent is not set -- cannot scroll");let Se=ge.offsetTop+ge.clientTop,B=ge.offsetLeft+ge.clientLeft;for(;xe.clientHeight===xe.scrollHeight&&xe.clientWidth===xe.scrollWidth||Me&&(xe.classList.contains("markedContent")||"hidden"===getComputedStyle(xe).overflow);)if(Se+=xe.offsetTop,B+=xe.offsetLeft,xe=xe.offsetParent,!xe)return;Pe&&(void 0!==Pe.top&&(Se+=Pe.top),void 0!==Pe.left&&(B+=Pe.left,xe.scrollLeft=B)),xe.scrollTop=Se},a.watchScroll=function ee(ge,Pe){const Me=function(B){Se||(Se=window.requestAnimationFrame(function(){Se=null;const re=ge.scrollLeft,se=xe.lastX;re!==se&&(xe.right=re>se),xe.lastX=re;const X=ge.scrollTop,J=xe.lastY;X!==J&&(xe.down=X>J),xe.lastY=X,Pe(xe)}))},xe={right:!0,down:!0,lastX:ge.scrollLeft,lastY:ge.scrollTop,_eventHandler:Me};let Se=null;return ge.addEventListener("scroll",Me,!0),xe},a.DEFAULT_SCALE_VALUE="auto",a.DEFAULT_SCALE=1,a.DEFAULT_SCALE_DELTA=1.1,a.MIN_SCALE=.1,a.MAX_SCALE=10,a.UNKNOWN_SCALE=0,a.MAX_AUTO_SCALE=1.25,a.SCROLLBAR_PADDING=40,a.VERTICAL_PADDING=5,a.RenderingStates={INITIAL:0,RUNNING:1,PAUSED:2,FINISHED:3},a.PresentationModeState={UNKNOWN:0,NORMAL:1,CHANGING:2,FULLSCREEN:3};const c={UNKNOWN:-1,NONE:0,THUMBS:1,OUTLINE:2,ATTACHMENTS:3,LAYERS:4};a.SidebarView=c,a.RendererType={CANVAS:"canvas",SVG:"svg"},a.TextLayerMode={DISABLE:0,ENABLE:1,ENABLE_ENHANCE:2};const I={UNKNOWN:-1,VERTICAL:0,HORIZONTAL:1,WRAPPED:2,PAGE:3};a.ScrollMode=I;const Y={UNKNOWN:-1,NONE:0,ODD:1,EVEN:2};a.SpreadMode=Y,a.AutoPrintRegExp=/\bprint\s*\(/,a.OutputScale=class j{constructor(){const Pe=window.devicePixelRatio||1;this.sx=Pe,this.sy=Pe}get scaled(){return 1!==this.sx||1!==this.sy}};const V=/\x00/g,g=/[\x01-\x1F]/g;function x(ge,Pe,Me=0){let xe=Me,Se=ge.length-1;if(Se<0||!Pe(ge[Se]))return ge.length;if(Pe(ge[xe]))return xe;for(;xe<Se;){const B=xe+Se>>1;Pe(ge[B])?Se=B:xe=B+1}return xe}function h(ge,Pe,Me){if(ge<2)return ge;let xe=Pe[ge].div,Se=xe.offsetTop+xe.clientTop;Se>=Me&&(xe=Pe[ge-1].div,Se=xe.offsetTop+xe.clientTop);for(let B=ge-2;B>=0&&(xe=Pe[B].div,!(xe.offsetTop+xe.clientTop+xe.clientHeight<=Se));--B)ge=B;return ge}function R(ge){let Pe=Math.hypot(ge.deltaX,ge.deltaY);const Me=Math.atan2(ge.deltaY,ge.deltaX);return-.25*Math.PI<Me&&Me<.75*Math.PI&&(Pe=-Pe),Pe}const me=new Promise(function(ge){window.requestAnimationFrame(ge)});a.animationStarted=me;const ie=document.documentElement.style;a.docStyle=ie;var Ae=new WeakMap,_e=new WeakMap,ae=new WeakMap;a.ProgressBar=class ue{constructor(Pe){if(Q(this,Ae,{writable:!0,value:null}),Q(this,_e,{writable:!0,value:0}),Q(this,ae,{writable:!0,value:!0}),arguments.length>1)throw new Error("ProgressBar no longer accepts any additional options, please use CSS rules to modify its appearance instead.");const Me=document.getElementById(Pe);T(this,Ae,Me.classList)}get percent(){return F(this,_e)}set percent(Pe){T(this,_e,function fe(ge,Pe,Me){return Math.min(Math.max(ge,Pe),Me)}(Pe,0,100)),isNaN(Pe)?F(this,Ae).add("indeterminate"):(F(this,Ae).remove("indeterminate"),ie.setProperty("--progressBar-percent",`${F(this,_e)}%`))}setWidth(Pe){if(!Pe)return;const xe=Pe.parentNode.offsetWidth-Pe.offsetWidth;xe>0&&ie.setProperty("--progressBar-end-offset",`${xe}px`)}hide(){F(this,ae)&&(T(this,ae,!1),F(this,Ae).add("hidden"))}show(){F(this,ae)||(T(this,ae,!0),F(this,Ae).remove("hidden"))}}},(w,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.StructTreeLayerBuilder=void 0;const _={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},A=/^H(\d+)$/;a.StructTreeLayerBuilder=class y{constructor({pdfPage:u}){this.pdfPage=u}render(u){return this._walk(u)}_setAttributes(u,t){void 0!==u.alt&&t.setAttribute("aria-label",u.alt),void 0!==u.id&&t.setAttribute("aria-owns",u.id),void 0!==u.lang&&t.setAttribute("lang",u.lang)}_walk(u){if(!u)return null;const t=document.createElement("span");if("role"in u){const{role:e}=u,o=e.match(A);o?(t.setAttribute("role","heading"),t.setAttribute("aria-level",o[1])):_[e]&&t.setAttribute("role",_[e])}if(this._setAttributes(u,t),u.children)if(1===u.children.length&&"id"in u.children[0])this._setAttributes(u.children[0],t);else for(const e of u.children)t.append(this._walk(e));return t}}},(w,a,_)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.TextLayerBuilder=void 0;var A=_(3);a.TextLayerBuilder=class P{constructor({textLayerDiv:t,eventBus:e,pageIndex:o,viewport:v,highlighter:S=null,enhanceTextSelection:p=!1,accessibilityManager:c=null}){this.textLayerDiv=t,this.eventBus=e,this.textContent=null,this.textContentItemsStr=[],this.textContentStream=null,this.renderingDone=!1,this.pageNumber=o+1,this.viewport=v,this.textDivs=[],this.textLayerRenderTask=null,this.highlighter=S,this.enhanceTextSelection=p,this.accessibilityManager=c,this._bindMouse()}_finishRendering(){if(this.renderingDone=!0,!this.enhanceTextSelection){const t=document.createElement("div");t.className="endOfContent",this.textLayerDiv.append(t)}this.eventBus.dispatch("textlayerrendered",{source:this,pageNumber:this.pageNumber,numTextDivs:this.textDivs.length})}render(t=0){if(!this.textContent&&!this.textContentStream||this.renderingDone)return;this.cancel(),this.textDivs.length=0,this.highlighter?.setTextMapping(this.textDivs,this.textContentItemsStr),this.accessibilityManager?.setTextMapping(this.textDivs);const e=document.createDocumentFragment();this.textLayerRenderTask=(0,A.renderTextLayer)({textContent:this.textContent,textContentStream:this.textContentStream,container:e,viewport:this.viewport,textDivs:this.textDivs,textContentItemsStr:this.textContentItemsStr,timeout:t,enhanceTextSelection:this.enhanceTextSelection}),this.textLayerRenderTask.promise.then(()=>{this.textLayerDiv.append(e),this._finishRendering(),this.highlighter?.enable(),this.accessibilityManager?.enable()},function(o){})}cancel(){this.textLayerRenderTask&&(this.textLayerRenderTask.cancel(),this.textLayerRenderTask=null),this.highlighter?.disable(),this.accessibilityManager?.disable()}setTextContentStream(t){this.cancel(),this.textContentStream=t}setTextContent(t){this.cancel(),this.textContent=t}_bindMouse(){const t=this.textLayerDiv;let e=null;t.addEventListener("mousedown",o=>{if(this.enhanceTextSelection&&this.textLayerRenderTask)return this.textLayerRenderTask.expandTextDivs(!0),void(e&&(clearTimeout(e),e=null));const v=t.querySelector(".endOfContent");if(!v)return;let S=o.target!==t;if(S=S&&"none"!==window.getComputedStyle(v).getPropertyValue("-moz-user-select"),S){const p=t.getBoundingClientRect(),c=Math.max(0,(o.pageY-p.top)/p.height);v.style.top=(100*c).toFixed(2)+"%"}v.classList.add("active")}),t.addEventListener("mouseup",()=>{if(this.enhanceTextSelection&&this.textLayerRenderTask)return void(e=setTimeout(()=>{this.textLayerRenderTask&&this.textLayerRenderTask.expandTextDivs(!1),e=null},300));const o=t.querySelector(".endOfContent");o&&(o.style.top="",o.classList.remove("active"))})}}},(w,a,_)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.XfaLayerBuilder=void 0;var A=_(3);a.XfaLayerBuilder=class y{constructor({pageDiv:u,pdfPage:t,annotationStorage:e=null,linkService:o,xfaHtml:v=null}){this.pageDiv=u,this.pdfPage=t,this.annotationStorage=e,this.linkService=o,this.xfaHtml=v,this.div=null,this._cancelled=!1}render(u,t="display"){if("print"===t){const e={viewport:u.clone({dontFlip:!0}),div:this.div,xfaHtml:this.xfaHtml,annotationStorage:this.annotationStorage,linkService:this.linkService,intent:t},o=document.createElement("div");this.pageDiv.append(o),e.div=o;const v=A.XfaLayer.render(e);return Promise.resolve(v)}return this.pdfPage.getXfa().then(e=>{if(this._cancelled||!e)return{textDivs:[]};const o={viewport:u.clone({dontFlip:!0}),div:this.div,xfaHtml:e,annotationStorage:this.annotationStorage,linkService:this.linkService,intent:t};return this.div?A.XfaLayer.update(o):(this.div=document.createElement("div"),this.pageDiv.append(this.div),o.div=this.div,A.XfaLayer.render(o))}).catch(e=>{console.error(e)})}cancel(){this._cancelled=!0}hide(){this.div&&(this.div.hidden=!0)}}},(w,a,_)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.PDFViewer=a.PDFSinglePageViewer=void 0;var A=_(7),y=_(12);a.PDFViewer=class P extends y.BaseViewer{},a.PDFSinglePageViewer=class u extends y.BaseViewer{_resetView(){super._resetView(),this._scrollMode=A.ScrollMode.PAGE,this._spreadMode=A.SpreadMode.NONE}set scrollMode(e){}_updateScrollMode(){}set spreadMode(e){}_updateSpreadMode(){}}},(w,a,_)=>{let A;Object.defineProperty(a,"__esModule",{value:!0}),a.PagesCountLimit=a.PDFPageViewBuffer=a.BaseViewer=void 0;var y=_(3),P=_(7),u=_(2),t=_(5),e=_(4),o=_(13),v=_(16),S=_(6),p=_(8),c=_(17),b=_(9),N=_(10);const Y="enablePermissions",W={FORCE_SCROLL_MODE_PAGE:15e3,FORCE_LAZY_PAGE_INIT:7500,PAUSE_EAGER_PAGE_INIT:250};function j(Se){return Object.values(y.AnnotationEditorType).includes(Se)&&Se!==y.AnnotationEditorType.DISABLE}a.PagesCountLimit=W;var z=new WeakMap,ee=new WeakMap,oe=new WeakSet;A=Symbol.iterator;class V{constructor(B){r(this,oe),Q(this,z,{writable:!0,value:new Set}),Q(this,ee,{writable:!0,value:0}),T(this,ee,B)}push(B){const ne=F(this,z);ne.has(B)&&ne.delete(B),ne.add(B),ne.size>F(this,ee)&&n(this,oe,g).call(this)}resize(B,ne=null){T(this,ee,B);const re=F(this,z);if(ne){const se=re.size;let X=1;for(const J of re)if(ne.has(J.id)&&(re.delete(J),re.add(J)),++X>se)break}for(;re.size>F(this,ee);)n(this,oe,g).call(this)}has(B){return F(this,z).has(B)}[A](){return F(this,z).keys()}}function g(){const Se=F(this,z).keys().next().value;Se?.destroy(),F(this,z).delete(Se)}a.PDFPageViewBuffer=V;var l=new WeakMap,x=new WeakMap,L=new WeakMap,E=new WeakMap,i=new WeakMap,h=new WeakMap,d=new WeakMap,O=new WeakMap,R=new WeakSet,$=new WeakSet,K=new WeakSet,ce=new WeakSet,te=new WeakSet,de=new WeakSet,me=new WeakSet,ie=new WeakSet,fe=new WeakSet;class Ae{constructor(B){if(r(this,fe),r(this,ie),r(this,me),r(this,de),r(this,te),r(this,ce),r(this,K),r(this,$),r(this,R),Q(this,l,{writable:!0,value:null}),Q(this,x,{writable:!0,value:y.AnnotationEditorType.DISABLE}),Q(this,L,{writable:!0,value:null}),Q(this,E,{writable:!0,value:y.AnnotationMode.ENABLE_FORMS}),Q(this,i,{writable:!0,value:!1}),Q(this,h,{writable:!0,value:0}),Q(this,d,{writable:!0,value:null}),Q(this,O,{writable:!0,value:null}),this.constructor===Ae)throw new Error("Cannot initialize BaseViewer.");const ne="2.16.105";if(y.version!==ne)throw new Error(`The API version "${y.version}" does not match the Viewer version "${ne}".`);if(this.container=B.container,this.viewer=B.viewer||B.container.firstElementChild,"DIV"!==this.container?.tagName.toUpperCase()||"DIV"!==this.viewer?.tagName.toUpperCase())throw new Error("Invalid `container` and/or `viewer` option.");if(this.container.offsetParent&&"absolute"!==getComputedStyle(this.container).position)throw new Error("The `container` must be absolutely positioned.");this.eventBus=B.eventBus,this.linkService=B.linkService||new S.SimpleLinkService,this.downloadManager=B.downloadManager||null,this.findController=B.findController||null,this._scriptingManager=B.scriptingManager||null,this.removePageBorders=B.removePageBorders||!1,this.textLayerMode=B.textLayerMode??P.TextLayerMode.ENABLE,T(this,E,B.annotationMode??y.AnnotationMode.ENABLE_FORMS),T(this,x,B.annotationEditorMode??y.AnnotationEditorType.DISABLE),this.imageResourcesPath=B.imageResourcesPath||"",this.enablePrintAutoRotate=B.enablePrintAutoRotate||!1,this.renderer=B.renderer||P.RendererType.CANVAS,this.useOnlyCssZoom=B.useOnlyCssZoom||!1,this.maxCanvasPixels=B.maxCanvasPixels,this.l10n=B.l10n||e.NullL10n,T(this,i,B.enablePermissions||!1),this.pageColors=B.pageColors||null,this.pageColors&&!(CSS.supports("color",this.pageColors.background)&&CSS.supports("color",this.pageColors.foreground))&&((this.pageColors.background||this.pageColors.foreground)&&console.warn("BaseViewer: Ignoring `pageColors`-option, since the browser doesn't support the values used."),this.pageColors=null),this.defaultRenderingQueue=!B.renderingQueue,this.defaultRenderingQueue?(this.renderingQueue=new v.PDFRenderingQueue,this.renderingQueue.setViewer(this)):this.renderingQueue=B.renderingQueue,this.scroll=(0,P.watchScroll)(this.container,this._scrollUpdate.bind(this)),this.presentationModeState=P.PresentationModeState.UNKNOWN,this._onBeforeDraw=this._onAfterDraw=null,this._resetView(),this.removePageBorders&&this.viewer.classList.add("removePageBorders"),this.updateContainerHeightCss()}get pagesCount(){return this._pages.length}getPageView(B){return this._pages[B]}get pageViewsReady(){return!!this._pagesCapability.settled&&this._pages.every(function(B){return B?.pdfPage})}get renderForms(){return F(this,E)===y.AnnotationMode.ENABLE_FORMS}get enableScripting(){return!!this._scriptingManager}get currentPageNumber(){return this._currentPageNumber}set currentPageNumber(B){if(!Number.isInteger(B))throw new Error("Invalid page number.");this.pdfDocument&&(this._setCurrentPageNumber(B,!0)||console.error(`currentPageNumber: "${B}" is not a valid page.`))}_setCurrentPageNumber(B,ne=!1){if(this._currentPageNumber===B)return ne&&n(this,de,Fe).call(this),!0;if(!(0<B&&B<=this.pagesCount))return!1;const re=this._currentPageNumber;return this._currentPageNumber=B,this.eventBus.dispatch("pagechanging",{source:this,pageNumber:B,pageLabel:this._pageLabels?.[B-1]??null,previous:re}),ne&&n(this,de,Fe).call(this),!0}get currentPageLabel(){return this._pageLabels?.[this._currentPageNumber-1]??null}set currentPageLabel(B){if(!this.pdfDocument)return;let ne=0|B;if(this._pageLabels){const re=this._pageLabels.indexOf(B);re>=0&&(ne=re+1)}this._setCurrentPageNumber(ne,!0)||console.error(`currentPageLabel: "${B}" is not a valid page.`)}get currentScale(){return this._currentScale!==P.UNKNOWN_SCALE?this._currentScale:P.DEFAULT_SCALE}set currentScale(B){if(isNaN(B))throw new Error("Invalid numeric scale.");this.pdfDocument&&this._setScale(B,!1)}get currentScaleValue(){return this._currentScaleValue}set currentScaleValue(B){this.pdfDocument&&this._setScale(B,!1)}get pagesRotation(){return this._pagesRotation}set pagesRotation(B){if(!(0,P.isValidRotation)(B))throw new Error("Invalid pages rotation angle.");if(!this.pdfDocument||((B%=360)<0&&(B+=360),this._pagesRotation===B))return;this._pagesRotation=B;const ne=this._currentPageNumber,re={rotation:B};for(const se of this._pages)se.update(re);this._currentScaleValue&&this._setScale(this._currentScaleValue,!0),this.eventBus.dispatch("rotationchanging",{source:this,pagesRotation:B,pageNumber:ne}),this.defaultRenderingQueue&&this.update()}get firstPagePromise(){return this.pdfDocument?this._firstPageCapability.promise:null}get onePageRendered(){return this.pdfDocument?this._onePageRenderedCapability.promise:null}get pagesPromise(){return this.pdfDocument?this._pagesCapability.promise:null}setDocument(B){var ne=this;if(this.pdfDocument&&(this.eventBus.dispatch("pagesdestroy",{source:this}),this._cancelRendering(),this._resetView(),this.findController&&this.findController.setDocument(null),this._scriptingManager&&this._scriptingManager.setDocument(null),F(this,L)&&(F(this,L).destroy(),T(this,L,null))),this.pdfDocument=B,!B)return;const re=B.isPureXfa,se=B.numPages,X=B.getPage(1),J=B.getOptionalContentConfig(),H=F(this,i)?B.getPermissions():Promise.resolve();if(se>W.FORCE_SCROLL_MODE_PAGE){console.warn("Forcing PAGE-scrolling for performance reasons, given the length of the document.");const f=this._scrollMode=P.ScrollMode.PAGE;this.eventBus.dispatch("scrollmodechanged",{source:this,mode:f})}this._pagesCapability.promise.then(()=>{this.eventBus.dispatch("pagesloaded",{source:this,pagesCount:se})},()=>{}),this._onBeforeDraw=f=>{const M=this._pages[f.pageNumber-1];M&&F(this,l).push(M)},this.eventBus._on("pagerender",this._onBeforeDraw),this._onAfterDraw=f=>{f.cssTransform||this._onePageRenderedCapability.settled||(this._onePageRenderedCapability.resolve({timestamp:f.timestamp}),this.eventBus._off("pagerendered",this._onAfterDraw),this._onAfterDraw=null,F(this,O)&&(document.removeEventListener("visibilitychange",F(this,O)),T(this,O,null)))},this.eventBus._on("pagerendered",this._onAfterDraw),Promise.all([X,H]).then(([f,M])=>{if(B!==this.pdfDocument)return;this._firstPageCapability.resolve(f),this._optionalContentConfigPromise=J;const{annotationEditorMode:le,annotationMode:ve,textLayerMode:he}=n(this,R,_e).call(this,M);if(le!==y.AnnotationEditorType.DISABLE){const Ce=le;re?console.warn("Warning: XFA-editing is not implemented."):j(Ce)?(T(this,L,new y.AnnotationEditorUIManager(this.container,this.eventBus)),Ce!==y.AnnotationEditorType.NONE&&F(this,L).updateMode(Ce)):console.error(`Invalid AnnotationEditor mode: ${Ce}`)}const pe=this._scrollMode===P.ScrollMode.PAGE?null:this.viewer,be=this.currentScale,ye=f.getViewport({scale:be*y.PixelsPerInch.PDF_TO_CSS_UNITS}),Ee=he===P.TextLayerMode.DISABLE||re?null:this,Te=ve!==y.AnnotationMode.DISABLE?this:null,Re=re?this:null,Le=F(this,L)?this:null;for(let Ce=1;Ce<=se;++Ce){const Ie=new o.PDFPageView({container:pe,eventBus:this.eventBus,id:Ce,scale:be,defaultViewport:ye.clone(),optionalContentConfigPromise:J,renderingQueue:this.renderingQueue,textLayerFactory:Ee,textLayerMode:he,annotationLayerFactory:Te,annotationMode:ve,xfaLayerFactory:Re,annotationEditorLayerFactory:Le,textHighlighterFactory:this,structTreeLayerFactory:this,imageResourcesPath:this.imageResourcesPath,renderer:this.renderer,useOnlyCssZoom:this.useOnlyCssZoom,maxCanvasPixels:this.maxCanvasPixels,pageColors:this.pageColors,l10n:this.l10n});this._pages.push(Ie)}const Oe=this._pages[0];Oe&&(Oe.setPdfPage(f),this.linkService.cachePageRef(1,f.ref)),this._scrollMode===P.ScrollMode.PAGE?n(this,K,ue).call(this):this._spreadMode!==P.SpreadMode.NONE&&this._updateSpreadMode(),n(this,$,ae).call(this).then(D(function*(){if(ne.findController&&ne.findController.setDocument(B),ne._scriptingManager&&ne._scriptingManager.setDocument(B),F(ne,L)&&ne.eventBus.dispatch("annotationeditormodechanged",{source:ne,mode:F(ne,x)}),B.loadingParams.disableAutoFetch||se>W.FORCE_LAZY_PAGE_INIT)return void ne._pagesCapability.resolve();let Ce=se-1;if(Ce<=0)ne._pagesCapability.resolve();else for(let Ie=2;Ie<=se;++Ie){const Be=B.getPage(Ie).then(Ue=>{const Ge=ne._pages[Ie-1];Ge.pdfPage||Ge.setPdfPage(Ue),ne.linkService.cachePageRef(Ie,Ue.ref),0==--Ce&&ne._pagesCapability.resolve()},Ue=>{console.error(`Unable to get page ${Ie} to initialize viewer`,Ue),0==--Ce&&ne._pagesCapability.resolve()});Ie%W.PAUSE_EAGER_PAGE_INIT==0&&(yield Be)}})),this.eventBus.dispatch("pagesinit",{source:this}),B.getMetadata().then(({info:Ce})=>{B===this.pdfDocument&&Ce.Language&&(this.viewer.lang=Ce.Language)}),this.defaultRenderingQueue&&this.update()}).catch(f=>{console.error("Unable to initialize viewer",f),this._pagesCapability.reject(f)})}setPageLabels(B){if(this.pdfDocument){B?Array.isArray(B)&&this.pdfDocument.numPages===B.length?this._pageLabels=B:(this._pageLabels=null,console.error("setPageLabels: Invalid page labels.")):this._pageLabels=null;for(let ne=0,re=this._pages.length;ne<re;ne++)this._pages[ne].setPageLabel(this._pageLabels?.[ne]??null)}}_resetView(){this._pages=[],this._currentPageNumber=1,this._currentScale=P.UNKNOWN_SCALE,this._currentScaleValue=null,this._pageLabels=null,T(this,l,new V(10)),this._location=null,this._pagesRotation=0,this._optionalContentConfigPromise=null,this._firstPageCapability=(0,y.createPromiseCapability)(),this._onePageRenderedCapability=(0,y.createPromiseCapability)(),this._pagesCapability=(0,y.createPromiseCapability)(),this._scrollMode=P.ScrollMode.VERTICAL,this._previousScrollMode=P.ScrollMode.UNKNOWN,this._spreadMode=P.SpreadMode.NONE,T(this,d,{previousPageNumber:1,scrollDown:!0,pages:[]}),this._onBeforeDraw&&(this.eventBus._off("pagerender",this._onBeforeDraw),this._onBeforeDraw=null),this._onAfterDraw&&(this.eventBus._off("pagerendered",this._onAfterDraw),this._onAfterDraw=null),F(this,O)&&(document.removeEventListener("visibilitychange",F(this,O)),T(this,O,null)),this.viewer.textContent="",this._updateScrollMode(),this.viewer.removeAttribute("lang"),this.viewer.classList.remove(Y)}_scrollUpdate(){0!==this.pagesCount&&this.update()}_setScaleUpdatePages(B,ne,re=!1,se=!1){if(this._currentScaleValue=ne.toString(),n(this,te,ke).call(this,B))return void(se&&this.eventBus.dispatch("scalechanging",{source:this,scale:B,presetValue:ne}));P.docStyle.setProperty("--scale-factor",B*y.PixelsPerInch.PDF_TO_CSS_UNITS);const X={scale:B};for(const J of this._pages)J.update(X);if(this._currentScale=B,!re){let H,J=this._currentPageNumber;this._location&&!(this.isInPresentationMode||this.isChangingPresentationMode)&&(J=this._location.pageNumber,H=[null,{name:"XYZ"},this._location.left,this._location.top,null]),this.scrollPageIntoView({pageNumber:J,destArray:H,allowNegativeOffset:!0})}this.eventBus.dispatch("scalechanging",{source:this,scale:B,presetValue:se?ne:void 0}),this.defaultRenderingQueue&&this.update(),this.updateContainerHeightCss()}get _pageWidthScaleFactor(){return this._spreadMode!==P.SpreadMode.NONE&&this._scrollMode!==P.ScrollMode.HORIZONTAL?2:1}_setScale(B,ne=!1){let re=parseFloat(B);if(re>0)this._setScaleUpdatePages(re,B,ne,!1);else{const se=this._pages[this._currentPageNumber-1];if(!se)return;let X=P.SCROLLBAR_PADDING,J=P.VERTICAL_PADDING;this.isInPresentationMode?X=J=4:this.removePageBorders?X=J=0:this._scrollMode===P.ScrollMode.HORIZONTAL&&([X,J]=[J,X]);const H=(this.container.clientWidth-X)/se.width*se.scale/this._pageWidthScaleFactor,f=(this.container.clientHeight-J)/se.height*se.scale;switch(B){case"page-actual":re=1;break;case"page-width":re=H;break;case"page-height":re=f;break;case"page-fit":re=Math.min(H,f);break;case"auto":const M=(0,P.isPortraitOrientation)(se)?H:Math.min(f,H);re=Math.min(P.MAX_AUTO_SCALE,M);break;default:return void console.error(`_setScale: "${B}" is an unknown zoom value.`)}this._setScaleUpdatePages(re,B,ne,!0)}}pageLabelToPageNumber(B){if(!this._pageLabels)return null;const ne=this._pageLabels.indexOf(B);return ne<0?null:ne+1}scrollPageIntoView({pageNumber:B,destArray:ne=null,allowNegativeOffset:re=!1,ignoreDestinationZoom:se=!1}){if(!this.pdfDocument)return;const X=Number.isInteger(B)&&this._pages[B-1];if(!X)return void console.error(`scrollPageIntoView: "${B}" is not a valid pageNumber parameter.`);if(this.isInPresentationMode||!ne)return void this._setCurrentPageNumber(B,!0);let le,ve,J=0,H=0,f=0,M=0;const he=X.rotation%180!=0,pe=(he?X.height:X.width)/X.scale/y.PixelsPerInch.PDF_TO_CSS_UNITS,be=(he?X.width:X.height)/X.scale/y.PixelsPerInch.PDF_TO_CSS_UNITS;let ye=0;switch(ne[1].name){case"XYZ":J=ne[2],H=ne[3],ye=ne[4],J=null!==J?J:0,H=null!==H?H:be;break;case"Fit":case"FitB":ye="page-fit";break;case"FitH":case"FitBH":H=ne[2],ye="page-width",null===H&&this._location?(J=this._location.left,H=this._location.top):("number"!=typeof H||H<0)&&(H=be);break;case"FitV":case"FitBV":J=ne[2],f=pe,M=be,ye="page-height";break;case"FitR":J=ne[2],H=ne[3],f=ne[4]-J,M=ne[5]-H,le=(this.container.clientWidth-(this.removePageBorders?0:P.SCROLLBAR_PADDING))/f/y.PixelsPerInch.PDF_TO_CSS_UNITS,ve=(this.container.clientHeight-(this.removePageBorders?0:P.VERTICAL_PADDING))/M/y.PixelsPerInch.PDF_TO_CSS_UNITS,ye=Math.min(Math.abs(le),Math.abs(ve));break;default:return void console.error(`scrollPageIntoView: "${ne[1].name}" is not a valid destination type.`)}if(se||(ye&&ye!==this._currentScale?this.currentScaleValue=ye:this._currentScale===P.UNKNOWN_SCALE&&(this.currentScaleValue=P.DEFAULT_SCALE_VALUE)),"page-fit"===ye&&!ne[4])return void n(this,ce,we).call(this,X);const Ee=[X.viewport.convertToViewportPoint(J,H),X.viewport.convertToViewportPoint(J+f,H+M)];let Te=Math.min(Ee[0][0],Ee[1][0]),Re=Math.min(Ee[0][1],Ee[1][1]);re||(Te=Math.max(Te,0),Re=Math.max(Re,0)),n(this,ce,we).call(this,X,{left:Te,top:Re})}_updateLocation(B){const ne=this._currentScale,re=this._currentScaleValue,se=parseFloat(re)===ne?Math.round(1e4*ne)/100:re,X=B.id,H=this.container,f=this._pages[X-1].getPagePoint(H.scrollLeft-B.x,H.scrollTop-B.y),M=Math.round(f[0]),le=Math.round(f[1]);let ve=`#page=${X}`;this.isInPresentationMode||(ve+=`&zoom=${se},${M},${le}`),this._location={pageNumber:X,scale:se,top:le,left:M,rotation:this._pagesRotation,pdfOpenParams:ve}}update(){const B=this._getVisiblePages(),ne=B.views,re=ne.length;if(0===re)return;const se=Math.max(10,2*re+1);F(this,l).resize(se,B.ids),this.renderingQueue.renderHighestPriority(B);const X=this._spreadMode===P.SpreadMode.NONE&&(this._scrollMode===P.ScrollMode.PAGE||this._scrollMode===P.ScrollMode.VERTICAL),J=this._currentPageNumber;let H=!1;for(const f of ne){if(f.percent<100)break;if(f.id===J&&X){H=!0;break}}this._setCurrentPageNumber(H?J:ne[0].id),this._updateLocation(B.first),this.eventBus.dispatch("updateviewarea",{source:this,location:this._location})}containsElement(B){return this.container.contains(B)}focus(){this.container.focus()}get _isContainerRtl(){return"rtl"===getComputedStyle(this.container).direction}get isInPresentationMode(){return this.presentationModeState===P.PresentationModeState.FULLSCREEN}get isChangingPresentationMode(){return this.presentationModeState===P.PresentationModeState.CHANGING}get isHorizontalScrollbarEnabled(){return!this.isInPresentationMode&&this.container.scrollWidth>this.container.clientWidth}get isVerticalScrollbarEnabled(){return!this.isInPresentationMode&&this.container.scrollHeight>this.container.clientHeight}_getVisiblePages(){const B=this._scrollMode===P.ScrollMode.PAGE?F(this,d).pages:this._pages,ne=this._scrollMode===P.ScrollMode.HORIZONTAL;return(0,P.getVisibleElements)({scrollEl:this.container,views:B,sortByVisibility:!0,horizontal:ne,rtl:ne&&this._isContainerRtl})}isPageVisible(B){return!!this.pdfDocument&&(Number.isInteger(B)&&B>0&&B<=this.pagesCount?this._getVisiblePages().ids.has(B):(console.error(`isPageVisible: "${B}" is not a valid page.`),!1))}isPageCached(B){if(!this.pdfDocument)return!1;if(!(Number.isInteger(B)&&B>0&&B<=this.pagesCount))return console.error(`isPageCached: "${B}" is not a valid page.`),!1;const ne=this._pages[B-1];return F(this,l).has(ne)}cleanup(){for(const B of this._pages)B.renderingState!==P.RenderingStates.FINISHED&&B.reset()}_cancelRendering(){for(const B of this._pages)B.cancelRendering()}forceRendering(B){const ne=B||this._getVisiblePages(),re=n(this,ie,Me).call(this,ne),X=this.renderingQueue.getHighestPriority(ne,this._pages,re,this._spreadMode!==P.SpreadMode.NONE&&this._scrollMode!==P.ScrollMode.HORIZONTAL);return n(this,fe,xe).call(this,ne.ids),!!X&&(n(this,me,ge).call(this,X).then(()=>{this.renderingQueue.renderView(X)}),!0)}createTextLayerBuilder({textLayerDiv:B,pageIndex:ne,viewport:re,enhanceTextSelection:se=!1,eventBus:X,highlighter:J,accessibilityManager:H=null}){return new b.TextLayerBuilder({textLayerDiv:B,eventBus:X,pageIndex:ne,viewport:re,enhanceTextSelection:!this.isInPresentationMode&&se,highlighter:J,accessibilityManager:H})}createTextHighlighter({pageIndex:B,eventBus:ne}){return new c.TextHighlighter({eventBus:ne,pageIndex:B,findController:this.isInPresentationMode?null:this.findController})}createAnnotationLayerBuilder({pageDiv:B,pdfPage:ne,annotationStorage:re=this.pdfDocument?.annotationStorage,imageResourcesPath:se="",renderForms:X=!0,l10n:J=e.NullL10n,enableScripting:H=this.enableScripting,hasJSActionsPromise:f=this.pdfDocument?.hasJSActions(),mouseState:M=this._scriptingManager?.mouseState,fieldObjectsPromise:le=this.pdfDocument?.getFieldObjects(),annotationCanvasMap:ve=null,accessibilityManager:he=null}){return new t.AnnotationLayerBuilder({pageDiv:B,pdfPage:ne,annotationStorage:re,imageResourcesPath:se,renderForms:X,linkService:this.linkService,downloadManager:this.downloadManager,l10n:J,enableScripting:H,hasJSActionsPromise:f,mouseState:M,fieldObjectsPromise:le,annotationCanvasMap:ve,accessibilityManager:he})}createAnnotationEditorLayerBuilder({uiManager:B=F(this,L),pageDiv:ne,pdfPage:re,accessibilityManager:se=null,l10n:X,annotationStorage:J=this.pdfDocument?.annotationStorage}){return new u.AnnotationEditorLayerBuilder({uiManager:B,pageDiv:ne,pdfPage:re,annotationStorage:J,accessibilityManager:se,l10n:X})}createXfaLayerBuilder({pageDiv:B,pdfPage:ne,annotationStorage:re=this.pdfDocument?.annotationStorage}){return new N.XfaLayerBuilder({pageDiv:B,pdfPage:ne,annotationStorage:re,linkService:this.linkService})}createStructTreeLayerBuilder({pdfPage:B}){return new p.StructTreeLayerBuilder({pdfPage:B})}get hasEqualPageSizes(){const B=this._pages[0];for(let ne=1,re=this._pages.length;ne<re;++ne){const se=this._pages[ne];if(se.width!==B.width||se.height!==B.height)return!1}return!0}getPagesOverview(){return this._pages.map(B=>{const ne=B.pdfPage.getViewport({scale:1});return!this.enablePrintAutoRotate||(0,P.isPortraitOrientation)(ne)?{width:ne.width,height:ne.height,rotation:ne.rotation}:{width:ne.height,height:ne.width,rotation:(ne.rotation-90)%360}})}get optionalContentConfigPromise(){return this.pdfDocument?this._optionalContentConfigPromise?this._optionalContentConfigPromise:(console.error("optionalContentConfigPromise: Not initialized yet."),this.pdfDocument.getOptionalContentConfig()):Promise.resolve(null)}set optionalContentConfigPromise(B){if(!(B instanceof Promise))throw new Error(`Invalid optionalContentConfigPromise: ${B}`);if(!this.pdfDocument||!this._optionalContentConfigPromise)return;this._optionalContentConfigPromise=B;const ne={optionalContentConfigPromise:B};for(const re of this._pages)re.update(ne);this.update(),this.eventBus.dispatch("optionalcontentconfigchanged",{source:this,promise:B})}get scrollMode(){return this._scrollMode}set scrollMode(B){if(this._scrollMode!==B){if(!(0,P.isValidScrollMode)(B))throw new Error(`Invalid scroll mode: ${B}`);this.pagesCount>W.FORCE_SCROLL_MODE_PAGE||(this._previousScrollMode=this._scrollMode,this._scrollMode=B,this.eventBus.dispatch("scrollmodechanged",{source:this,mode:B}),this._updateScrollMode(this._currentPageNumber))}}_updateScrollMode(B=null){const ne=this._scrollMode,re=this.viewer;re.classList.toggle("scrollHorizontal",ne===P.ScrollMode.HORIZONTAL),re.classList.toggle("scrollWrapped",ne===P.ScrollMode.WRAPPED),this.pdfDocument&&B&&(ne===P.ScrollMode.PAGE?n(this,K,ue).call(this):this._previousScrollMode===P.ScrollMode.PAGE&&this._updateSpreadMode(),this._currentScaleValue&&isNaN(this._currentScaleValue)&&this._setScale(this._currentScaleValue,!0),this._setCurrentPageNumber(B,!0),this.update())}get spreadMode(){return this._spreadMode}set spreadMode(B){if(this._spreadMode!==B){if(!(0,P.isValidSpreadMode)(B))throw new Error(`Invalid spread mode: ${B}`);this._spreadMode=B,this.eventBus.dispatch("spreadmodechanged",{source:this,mode:B}),this._updateSpreadMode(this._currentPageNumber)}}_updateSpreadMode(B=null){if(!this.pdfDocument)return;const ne=this.viewer,re=this._pages;if(this._scrollMode===P.ScrollMode.PAGE)n(this,K,ue).call(this);else if(ne.textContent="",this._spreadMode===P.SpreadMode.NONE)for(const se of this._pages)ne.append(se.div);else{const se=this._spreadMode-1;let X=null;for(let J=0,H=re.length;J<H;++J)null===X?(X=document.createElement("div"),X.className="spread",ne.append(X)):J%2===se&&(X=X.cloneNode(!1),ne.append(X)),X.append(re[J].div)}B&&(this._currentScaleValue&&isNaN(this._currentScaleValue)&&this._setScale(this._currentScaleValue,!0),this._setCurrentPageNumber(B,!0),this.update())}_getPageAdvance(B,ne=!1){switch(this._scrollMode){case P.ScrollMode.WRAPPED:{const{views:re}=this._getVisiblePages(),se=new Map;for(const{id:X,y:J,percent:H,widthPercent:f}of re){if(0===H||f<100)continue;let M=se.get(J);M||se.set(J,M||=[]),M.push(X)}for(const X of se.values()){const J=X.indexOf(B);if(-1===J)continue;const H=X.length;if(1===H)break;if(ne)for(let f=J-1,M=0;f>=M;f--){const ve=X[f+1]-1;if(X[f]<ve)return B-ve}else for(let f=J+1,M=H;f<M;f++){const ve=X[f-1]+1;if(X[f]>ve)return ve-B}if(ne){const f=X[0];if(f<B)return B-f+1}else{const f=X[H-1];if(f>B)return f-B+1}break}break}case P.ScrollMode.HORIZONTAL:break;case P.ScrollMode.PAGE:case P.ScrollMode.VERTICAL:{if(this._spreadMode===P.SpreadMode.NONE)break;const re=this._spreadMode-1;if(ne&&B%2!==re)break;if(!ne&&B%2===re)break;const{views:se}=this._getVisiblePages(),X=ne?B-1:B+1;for(const{id:J,percent:H,widthPercent:f}of se)if(J===X){if(H>0&&100===f)return 2;break}break}}return 1}nextPage(){const B=this._currentPageNumber,ne=this.pagesCount;if(B>=ne)return!1;const re=this._getPageAdvance(B,!1)||1;return this.currentPageNumber=Math.min(B+re,ne),!0}previousPage(){const B=this._currentPageNumber;if(B<=1)return!1;const ne=this._getPageAdvance(B,!0)||1;return this.currentPageNumber=Math.max(B-ne,1),!0}increaseScale(B=1){let ne=this._currentScale;do{ne=(ne*P.DEFAULT_SCALE_DELTA).toFixed(2),ne=Math.ceil(10*ne)/10,ne=Math.min(P.MAX_SCALE,ne)}while(--B>0&&ne<P.MAX_SCALE);this.currentScaleValue=ne}decreaseScale(B=1){let ne=this._currentScale;do{ne=(ne/P.DEFAULT_SCALE_DELTA).toFixed(2),ne=Math.floor(10*ne)/10,ne=Math.max(P.MIN_SCALE,ne)}while(--B>0&&ne>P.MIN_SCALE);this.currentScaleValue=ne}updateContainerHeightCss(){const B=this.container.clientHeight;B!==F(this,h)&&(T(this,h,B),P.docStyle.setProperty("--viewer-container-height",`${B}px`))}get annotationEditorMode(){return F(this,L)?F(this,x):y.AnnotationEditorType.DISABLE}set annotationEditorMode(B){if(!F(this,L))throw new Error("The AnnotationEditor is not enabled.");if(F(this,x)!==B){if(!j(B))throw new Error(`Invalid AnnotationEditor mode: ${B}`);this.pdfDocument&&(T(this,x,B),this.eventBus.dispatch("annotationeditormodechanged",{source:this,mode:B}),F(this,L).updateMode(B))}}set annotationEditorParams({type:B,value:ne}){if(!F(this,L))throw new Error("The AnnotationEditor is not enabled.");F(this,L).updateParams(B,ne)}refresh(){if(!this.pdfDocument)return;const B={};for(const ne of this._pages)ne.update(B);this.update()}}function _e(Se){const B={annotationEditorMode:F(this,x),annotationMode:F(this,E),textLayerMode:this.textLayerMode};return Se&&(Se.includes(y.PermissionFlag.COPY)||this.viewer.classList.add(Y),Se.includes(y.PermissionFlag.MODIFY_CONTENTS)||(B.annotationEditorMode=y.AnnotationEditorType.DISABLE),!Se.includes(y.PermissionFlag.MODIFY_ANNOTATIONS)&&!Se.includes(y.PermissionFlag.FILL_INTERACTIVE_FORMS)&&F(this,E)===y.AnnotationMode.ENABLE_FORMS&&(B.annotationMode=y.AnnotationMode.ENABLE)),B}function ae(){if("hidden"===document.visibilityState||!this.container.offsetParent||0===this._getVisiblePages().views.length)return Promise.resolve();const Se=new Promise(B=>{T(this,O,()=>{"hidden"===document.visibilityState&&(B(),document.removeEventListener("visibilitychange",F(this,O)),T(this,O,null))}),document.addEventListener("visibilitychange",F(this,O))});return Promise.race([this._onePageRenderedCapability.promise,Se])}function ue(){if(this._scrollMode!==P.ScrollMode.PAGE)throw new Error("#ensurePageViewVisible: Invalid scrollMode value.");const Se=this._currentPageNumber,B=F(this,d),ne=this.viewer;if(ne.textContent="",B.pages.length=0,this._spreadMode!==P.SpreadMode.NONE||this.isInPresentationMode){const re=new Set,se=this._spreadMode-1;-1===se?re.add(Se-1):Se%2!==se?(re.add(Se-1),re.add(Se)):(re.add(Se-2),re.add(Se-1));const X=document.createElement("div");if(X.className="spread",this.isInPresentationMode){const J=document.createElement("div");J.className="dummyPage",X.append(J)}for(const J of re){const H=this._pages[J];H&&(X.append(H.div),B.pages.push(H))}ne.append(X)}else{const re=this._pages[Se-1];ne.append(re.div),B.pages.push(re)}B.scrollDown=Se>=B.previousPageNumber,B.previousPageNumber=Se}function we(Se,B=null){const{div:ne,id:re}=Se;if(this._scrollMode===P.ScrollMode.PAGE&&(this._setCurrentPageNumber(re),n(this,K,ue).call(this),this.update()),!B&&!this.isInPresentationMode){const se=ne.offsetLeft+ne.clientLeft,X=se+ne.clientWidth,{scrollLeft:J,clientWidth:H}=this.container;(this._scrollMode===P.ScrollMode.HORIZONTAL||se<J||X>J+H)&&(B={left:0,top:0})}(0,P.scrollIntoView)(ne,B)}function ke(Se){return Se===this._currentScale||Math.abs(Se-this._currentScale)<1e-15}function Fe(){const Se=this._pages[this._currentPageNumber-1];this.isInPresentationMode&&this._setScale(this._currentScaleValue,!0),n(this,ce,we).call(this,Se)}function ge(Se){return Pe.apply(this,arguments)}function Pe(){return(Pe=D(function*(Se){if(Se.pdfPage)return Se.pdfPage;try{const B=yield this.pdfDocument.getPage(Se.id);return Se.pdfPage||Se.setPdfPage(B),this.linkService._cachedPageNumber?.(B.ref)||this.linkService.cachePageRef(Se.id,B.ref),B}catch(B){return console.error("Unable to get page for page view",B),null}})).apply(this,arguments)}function Me(Se){if(1===Se.first?.id)return!0;if(Se.last?.id===this.pagesCount)return!1;switch(this._scrollMode){case P.ScrollMode.PAGE:return F(this,d).scrollDown;case P.ScrollMode.HORIZONTAL:return this.scroll.right}return this.scroll.down}function xe(Se){for(const B of Se)this._pages[B-1]?.toggleLoadingIconSpinner(!0);for(const B of F(this,l))Se.has(B.id)||B.toggleLoadingIconSpinner(!1)}a.BaseViewer=Ae},(w,a,_)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.PDFPageView=void 0;var A=_(3),y=_(7),P=_(14),u=_(4),t=_(15);const e=P.compatibilityParams.maxCanvasPixels||16777216;var o=new WeakMap,v=new WeakMap;a.PDFPageView=class S{constructor(c){Q(this,o,{writable:!0,value:A.AnnotationMode.ENABLE_FORMS}),Q(this,v,{writable:!0,value:{initialOptionalContent:!0,regularAnnotations:!0}});const b=c.container,N=c.defaultViewport;this.id=c.id,this.renderingId="page"+this.id,this.pdfPage=null,this.pageLabel=null,this.rotation=0,this.scale=c.scale||y.DEFAULT_SCALE,this.viewport=N,this.pdfPageRotate=N.rotation,this._optionalContentConfigPromise=c.optionalContentConfigPromise||null,this.hasRestrictedScaling=!1,this.textLayerMode=c.textLayerMode??y.TextLayerMode.ENABLE,T(this,o,c.annotationMode??A.AnnotationMode.ENABLE_FORMS),this.imageResourcesPath=c.imageResourcesPath||"",this.useOnlyCssZoom=c.useOnlyCssZoom||!1,this.maxCanvasPixels=c.maxCanvasPixels||e,this.pageColors=c.pageColors||null,this.eventBus=c.eventBus,this.renderingQueue=c.renderingQueue,this.textLayerFactory=c.textLayerFactory,this.annotationLayerFactory=c.annotationLayerFactory,this.annotationEditorLayerFactory=c.annotationEditorLayerFactory,this.xfaLayerFactory=c.xfaLayerFactory,this.textHighlighter=c.textHighlighterFactory?.createTextHighlighter({pageIndex:this.id-1,eventBus:this.eventBus}),this.structTreeLayerFactory=c.structTreeLayerFactory,this.renderer=c.renderer||y.RendererType.CANVAS,this.l10n=c.l10n||u.NullL10n,this.paintTask=null,this.paintedViewportMap=new WeakMap,this.renderingState=y.RenderingStates.INITIAL,this.resume=null,this._renderError=null,this._isStandalone=!this.renderingQueue?.hasViewer(),this._annotationCanvasMap=null,this.annotationLayer=null,this.annotationEditorLayer=null,this.textLayer=null,this.zoomLayer=null,this.xfaLayer=null,this.structTreeLayer=null;const I=document.createElement("div");if(I.className="page",I.style.width=Math.floor(this.viewport.width)+"px",I.style.height=Math.floor(this.viewport.height)+"px",I.setAttribute("data-page-number",this.id),I.setAttribute("role","region"),this.l10n.get("page_landmark",{page:this.id}).then(Y=>{I.setAttribute("aria-label",Y)}),this.div=I,b?.append(I),this._isStandalone){const{optionalContentConfigPromise:Y}=c;Y&&Y.then(W=>{Y===this._optionalContentConfigPromise&&(F(this,v).initialOptionalContent=W.hasInitialVisibility)})}}setPdfPage(c){this.pdfPage=c,this.pdfPageRotate=c.rotate,this.viewport=c.getViewport({scale:this.scale*A.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:(this.rotation+this.pdfPageRotate)%360}),this.reset()}destroy(){this.reset(),this.pdfPage&&this.pdfPage.cleanup()}_renderAnnotationLayer(){var c=this;return D(function*(){let b=null;try{yield c.annotationLayer.render(c.viewport,"display")}catch(N){console.error(`_renderAnnotationLayer: "${N}".`),b=N}finally{c.eventBus.dispatch("annotationlayerrendered",{source:c,pageNumber:c.id,error:b})}})()}_renderAnnotationEditorLayer(){var c=this;return D(function*(){let b=null;try{yield c.annotationEditorLayer.render(c.viewport,"display")}catch(N){console.error(`_renderAnnotationEditorLayer: "${N}".`),b=N}finally{c.eventBus.dispatch("annotationeditorlayerrendered",{source:c,pageNumber:c.id,error:b})}})()}_renderXfaLayer(){var c=this;return D(function*(){let b=null;try{const N=yield c.xfaLayer.render(c.viewport,"display");c.textHighlighter&&c._buildXfaTextContentItems(N.textDivs)}catch(N){console.error(`_renderXfaLayer: "${N}".`),b=N}finally{c.eventBus.dispatch("xfalayerrendered",{source:c,pageNumber:c.id,error:b})}})()}_buildXfaTextContentItems(c){var b=this;return D(function*(){const N=yield b.pdfPage.getTextContent(),I=[];for(const Y of N.items)I.push(Y.str);b.textHighlighter.setTextMapping(c,I),b.textHighlighter.enable()})()}_resetZoomLayer(c=!1){if(!this.zoomLayer)return;const b=this.zoomLayer.firstChild;this.paintedViewportMap.delete(b),b.width=0,b.height=0,c&&this.zoomLayer.remove(),this.zoomLayer=null}reset({keepZoomLayer:c=!1,keepAnnotationLayer:b=!1,keepAnnotationEditorLayer:N=!1,keepXfaLayer:I=!1}={}){this.cancelRendering({keepAnnotationLayer:b,keepAnnotationEditorLayer:N,keepXfaLayer:I}),this.renderingState=y.RenderingStates.INITIAL;const Y=this.div;Y.style.width=Math.floor(this.viewport.width)+"px",Y.style.height=Math.floor(this.viewport.height)+"px";const W=Y.childNodes,j=c&&this.zoomLayer||null,z=b&&this.annotationLayer?.div||null,ee=N&&this.annotationEditorLayer?.div||null,oe=I&&this.xfaLayer?.div||null;for(let V=W.length-1;V>=0;V--){const g=W[V];switch(g){case j:case z:case ee:case oe:continue}g.remove()}Y.removeAttribute("data-loaded"),z&&this.annotationLayer.hide(),ee?this.annotationEditorLayer.hide():this.annotationEditorLayer?.destroy(),oe&&this.xfaLayer.hide(),j||(this.canvas&&(this.paintedViewportMap.delete(this.canvas),this.canvas.width=0,this.canvas.height=0,delete this.canvas),this._resetZoomLayer()),this.svg&&(this.paintedViewportMap.delete(this.svg),delete this.svg),this.loadingIconDiv=document.createElement("div"),this.loadingIconDiv.className="loadingIcon notVisible",this._isStandalone&&this.toggleLoadingIconSpinner(!0),this.loadingIconDiv.setAttribute("role","img"),this.l10n.get("loading").then(V=>{this.loadingIconDiv?.setAttribute("aria-label",V)}),Y.append(this.loadingIconDiv)}update({scale:c=0,rotation:b=null,optionalContentConfigPromise:N=null}){if(this.scale=c||this.scale,"number"==typeof b&&(this.rotation=b),N instanceof Promise&&(this._optionalContentConfigPromise=N,N.then(W=>{N===this._optionalContentConfigPromise&&(F(this,v).initialOptionalContent=W.hasInitialVisibility)})),this.viewport=this.viewport.clone({scale:this.scale*A.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:(this.rotation+this.pdfPageRotate)%360}),this._isStandalone&&y.docStyle.setProperty("--scale-factor",this.viewport.scale),this.svg)return this.cssTransform({target:this.svg,redrawAnnotationLayer:!0,redrawAnnotationEditorLayer:!0,redrawXfaLayer:!0}),void this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!0,timestamp:performance.now(),error:this._renderError});let Y=!1;if(this.canvas&&this.maxCanvasPixels>0){const W=this.outputScale;(Math.floor(this.viewport.width)*W.sx|0)*(Math.floor(this.viewport.height)*W.sy|0)>this.maxCanvasPixels&&(Y=!0)}if(this.canvas){if(this.useOnlyCssZoom||this.hasRestrictedScaling&&Y)return this.cssTransform({target:this.canvas,redrawAnnotationLayer:!0,redrawAnnotationEditorLayer:!0,redrawXfaLayer:!0}),void this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!0,timestamp:performance.now(),error:this._renderError});!this.zoomLayer&&!this.canvas.hidden&&(this.zoomLayer=this.canvas.parentNode,this.zoomLayer.style.position="absolute")}this.zoomLayer&&this.cssTransform({target:this.zoomLayer.firstChild}),this.reset({keepZoomLayer:!0,keepAnnotationLayer:!0,keepAnnotationEditorLayer:!0,keepXfaLayer:!0})}cancelRendering({keepAnnotationLayer:c=!1,keepAnnotationEditorLayer:b=!1,keepXfaLayer:N=!1}={}){this.paintTask&&(this.paintTask.cancel(),this.paintTask=null),this.resume=null,this.textLayer&&(this.textLayer.cancel(),this.textLayer=null),this.annotationLayer&&(!c||!this.annotationLayer.div)&&(this.annotationLayer.cancel(),this.annotationLayer=null,this._annotationCanvasMap=null),this.annotationEditorLayer&&(!b||!this.annotationEditorLayer.div)&&(this.annotationEditorLayer.cancel(),this.annotationEditorLayer=null),this.xfaLayer&&(!N||!this.xfaLayer.div)&&(this.xfaLayer.cancel(),this.xfaLayer=null,this.textHighlighter?.disable()),this._onTextLayerRendered&&(this.eventBus._off("textlayerrendered",this._onTextLayerRendered),this._onTextLayerRendered=null)}cssTransform({target:c,redrawAnnotationLayer:b=!1,redrawAnnotationEditorLayer:N=!1,redrawXfaLayer:I=!1}){const Y=this.viewport.width,W=this.viewport.height,j=this.div;c.style.width=c.parentNode.style.width=j.style.width=Math.floor(Y)+"px",c.style.height=c.parentNode.style.height=j.style.height=Math.floor(W)+"px";const z=this.viewport.rotation-this.paintedViewportMap.get(c).rotation,ee=Math.abs(z);let oe=1,V=1;if((90===ee||270===ee)&&(oe=W/Y,V=Y/W),c.style.transform=`rotate(${z}deg) scale(${oe}, ${V})`,this.textLayer){const g=this.textLayer.viewport,x=Math.abs(this.viewport.rotation-g.rotation);let L=Y/g.width;(90===x||270===x)&&(L=Y/g.height);const E=this.textLayer.textLayerDiv;let i,h;switch(x){case 0:i=h=0;break;case 90:i=0,h="-"+E.style.height;break;case 180:i="-"+E.style.width,h="-"+E.style.height;break;case 270:i="-"+E.style.width,h=0;break;default:console.error("Bad rotation value.")}E.style.transform=`rotate(${x}deg) scale(${L}) translate(${i}, ${h})`,E.style.transformOrigin="0% 0%"}b&&this.annotationLayer&&this._renderAnnotationLayer(),N&&this.annotationEditorLayer&&this._renderAnnotationEditorLayer(),I&&this.xfaLayer&&this._renderXfaLayer()}get width(){return this.viewport.width}get height(){return this.viewport.height}getPagePoint(c,b){return this.viewport.convertToPdfPoint(c,b)}toggleLoadingIconSpinner(c=!1){this.loadingIconDiv?.classList.toggle("notVisible",!c)}draw(){var c=this;this.renderingState!==y.RenderingStates.INITIAL&&(console.error("Must be in new state before drawing"),this.reset());const{div:b,pdfPage:N}=this;if(!N)return this.renderingState=y.RenderingStates.FINISHED,this.loadingIconDiv&&(this.loadingIconDiv.remove(),delete this.loadingIconDiv),Promise.reject(new Error("pdfPage is not loaded"));this.renderingState=y.RenderingStates.RUNNING;const I=document.createElement("div");I.style.width=b.style.width,I.style.height=b.style.height,I.classList.add("canvasWrapper");const Y=this.annotationLayer?.div||this.annotationEditorLayer?.div;Y?Y.before(I):b.append(I);let W=null;if(this.textLayerMode!==y.TextLayerMode.DISABLE&&this.textLayerFactory){this._accessibilityManager||=new t.TextAccessibilityManager;const V=document.createElement("div");V.className="textLayer",V.style.width=I.style.width,V.style.height=I.style.height,Y?Y.before(V):b.append(V),W=this.textLayerFactory.createTextLayerBuilder({textLayerDiv:V,pageIndex:this.id-1,viewport:this.viewport,enhanceTextSelection:this.textLayerMode===y.TextLayerMode.ENABLE_ENHANCE,eventBus:this.eventBus,highlighter:this.textHighlighter,accessibilityManager:this._accessibilityManager})}this.textLayer=W,F(this,o)!==A.AnnotationMode.DISABLE&&this.annotationLayerFactory&&(this._annotationCanvasMap||=new Map,this.annotationLayer||=this.annotationLayerFactory.createAnnotationLayerBuilder({pageDiv:b,pdfPage:N,imageResourcesPath:this.imageResourcesPath,renderForms:F(this,o)===A.AnnotationMode.ENABLE_FORMS,l10n:this.l10n,annotationCanvasMap:this._annotationCanvasMap,accessibilityManager:this._accessibilityManager})),this.xfaLayer?.div&&b.append(this.xfaLayer.div);let j=null;this.renderingQueue&&(j=V=>{if(!this.renderingQueue.isHighestPriority(this))return this.renderingState=y.RenderingStates.PAUSED,void(this.resume=()=>{this.renderingState=y.RenderingStates.RUNNING,V()});V()});const z=function(){var V=D(function*(g=null){if(ee===c.paintTask&&(c.paintTask=null),g instanceof A.RenderingCancelledException)c._renderError=null;else if(c._renderError=g,c.renderingState=y.RenderingStates.FINISHED,c.loadingIconDiv&&(c.loadingIconDiv.remove(),delete c.loadingIconDiv),c._resetZoomLayer(!0),F(c,v).regularAnnotations=!ee.separateAnnots,c.eventBus.dispatch("pagerendered",{source:c,pageNumber:c.id,cssTransform:!1,timestamp:performance.now(),error:c._renderError}),g)throw g});return function(){return V.apply(this,arguments)}}(),ee=this.renderer===y.RendererType.SVG?this.paintOnSvg(I):this.paintOnCanvas(I);ee.onRenderContinue=j,this.paintTask=ee;const oe=ee.promise.then(()=>z(null).then(()=>{if(W){const V=N.streamTextContent({includeMarkedContent:!0});W.setTextContentStream(V),W.render()}this.annotationLayer&&this._renderAnnotationLayer().then(()=>{this.annotationEditorLayerFactory&&(this.annotationEditorLayer||=this.annotationEditorLayerFactory.createAnnotationEditorLayerBuilder({pageDiv:b,pdfPage:N,l10n:this.l10n,accessibilityManager:this._accessibilityManager}),this._renderAnnotationEditorLayer())})}),function(V){return z(V)});return this.xfaLayerFactory&&(this.xfaLayer||=this.xfaLayerFactory.createXfaLayerBuilder({pageDiv:b,pdfPage:N}),this._renderXfaLayer()),this.structTreeLayerFactory&&this.textLayer&&this.canvas&&(this._onTextLayerRendered=V=>{V.pageNumber===this.id&&(this.eventBus._off("textlayerrendered",this._onTextLayerRendered),this._onTextLayerRendered=null,this.canvas&&this.pdfPage.getStructTree().then(g=>{if(!g||!this.canvas)return;const l=this.structTreeLayer.render(g);l.classList.add("structTree"),this.canvas.append(l)}))},this.eventBus._on("textlayerrendered",this._onTextLayerRendered),this.structTreeLayer=this.structTreeLayerFactory.createStructTreeLayerBuilder({pdfPage:N})),b.setAttribute("data-loaded",!0),this.eventBus.dispatch("pagerender",{source:this,pageNumber:this.id}),oe}paintOnCanvas(c){const b=(0,A.createPromiseCapability)(),N={promise:b.promise,onRenderContinue(L){L()},cancel(){x.cancel()},get separateAnnots(){return x.separateAnnots}},I=this.viewport,Y=document.createElement("canvas");Y.setAttribute("role","presentation"),Y.hidden=!0;let W=!0;const j=function(){W&&(Y.hidden=!1,W=!1)};c.append(Y),this.canvas=Y;const z=Y.getContext("2d",{alpha:!1}),ee=this.outputScale=new y.OutputScale;if(this.useOnlyCssZoom){const L=I.clone({scale:A.PixelsPerInch.PDF_TO_CSS_UNITS});ee.sx*=L.width/I.width,ee.sy*=L.height/I.height}if(this.maxCanvasPixels>0){const E=Math.sqrt(this.maxCanvasPixels/(I.width*I.height));ee.sx>E||ee.sy>E?(ee.sx=E,ee.sy=E,this.hasRestrictedScaling=!0):this.hasRestrictedScaling=!1}const oe=(0,y.approximateFraction)(ee.sx),V=(0,y.approximateFraction)(ee.sy);Y.width=(0,y.roundToDivide)(I.width*ee.sx,oe[0]),Y.height=(0,y.roundToDivide)(I.height*ee.sy,V[0]),Y.style.width=(0,y.roundToDivide)(I.width,oe[1])+"px",Y.style.height=(0,y.roundToDivide)(I.height,V[1])+"px",this.paintedViewportMap.set(Y,I);const l={canvasContext:z,transform:ee.scaled?[ee.sx,0,0,ee.sy,0,0]:null,viewport:this.viewport,annotationMode:F(this,o),optionalContentConfigPromise:this._optionalContentConfigPromise,annotationCanvasMap:this._annotationCanvasMap,pageColors:this.pageColors},x=this.pdfPage.render(l);return x.onContinue=function(L){j(),N.onRenderContinue?N.onRenderContinue(L):L()},x.promise.then(function(){j(),b.resolve()},function(L){j(),b.reject(L)}),N}paintOnSvg(c){let b=!1;const N=()=>{if(b)throw new A.RenderingCancelledException(`Rendering cancelled, page ${this.id}`,"svg")},I=this.pdfPage,Y=this.viewport.clone({scale:A.PixelsPerInch.PDF_TO_CSS_UNITS});return{promise:I.getOperatorList({annotationMode:F(this,o)}).then(j=>(N(),new A.SVGGraphics(I.commonObjs,I.objs).getSVG(j,Y).then(ee=>{N(),this.svg=ee,this.paintedViewportMap.set(ee,Y),ee.style.width=c.style.width,ee.style.height=c.style.height,this.renderingState=y.RenderingStates.FINISHED,c.append(ee)}))),onRenderContinue(j){j()},cancel(){b=!0},get separateAnnots(){return!1}}}setPageLabel(c){this.pageLabel="string"==typeof c?c:null,null!==this.pageLabel?this.div.setAttribute("data-page-label",this.pageLabel):this.div.removeAttribute("data-page-label")}get thumbnailCanvas(){const{initialOptionalContent:c,regularAnnotations:b}=F(this,v);return c&&b?this.canvas:null}}},(w,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.compatibilityParams=a.OptionKind=a.AppOptions=void 0;const _=Object.create(null);a.compatibilityParams=_;{const t=navigator.userAgent||"",e=navigator.platform||"",o=navigator.maxTouchPoints||1,v=/Android/.test(t);(/\b(iPad|iPhone|iPod)(?=;)/.test(t)||"MacIntel"===e&&o>1||v)&&(_.maxCanvasPixels=5242880)}const A={VIEWER:2,API:4,WORKER:8,PREFERENCE:128};a.OptionKind=A;const y={annotationEditorMode:{value:-1,kind:A.VIEWER+A.PREFERENCE},annotationMode:{value:2,kind:A.VIEWER+A.PREFERENCE},cursorToolOnLoad:{value:0,kind:A.VIEWER+A.PREFERENCE},defaultZoomValue:{value:"",kind:A.VIEWER+A.PREFERENCE},disableHistory:{value:!1,kind:A.VIEWER},disablePageLabels:{value:!1,kind:A.VIEWER+A.PREFERENCE},enablePermissions:{value:!1,kind:A.VIEWER+A.PREFERENCE},enablePrintAutoRotate:{value:!0,kind:A.VIEWER+A.PREFERENCE},enableScripting:{value:!0,kind:A.VIEWER+A.PREFERENCE},externalLinkRel:{value:"noopener noreferrer nofollow",kind:A.VIEWER},externalLinkTarget:{value:0,kind:A.VIEWER+A.PREFERENCE},historyUpdateUrl:{value:!1,kind:A.VIEWER+A.PREFERENCE},ignoreDestinationZoom:{value:!1,kind:A.VIEWER+A.PREFERENCE},imageResourcesPath:{value:"./images/",kind:A.VIEWER},maxCanvasPixels:{value:16777216,kind:A.VIEWER},forcePageColors:{value:!1,kind:A.VIEWER+A.PREFERENCE},pageColorsBackground:{value:"Canvas",kind:A.VIEWER+A.PREFERENCE},pageColorsForeground:{value:"CanvasText",kind:A.VIEWER+A.PREFERENCE},pdfBugEnabled:{value:!1,kind:A.VIEWER+A.PREFERENCE},printResolution:{value:150,kind:A.VIEWER},sidebarViewOnLoad:{value:-1,kind:A.VIEWER+A.PREFERENCE},scrollModeOnLoad:{value:-1,kind:A.VIEWER+A.PREFERENCE},spreadModeOnLoad:{value:-1,kind:A.VIEWER+A.PREFERENCE},textLayerMode:{value:1,kind:A.VIEWER+A.PREFERENCE},useOnlyCssZoom:{value:!1,kind:A.VIEWER+A.PREFERENCE},viewerCssTheme:{value:0,kind:A.VIEWER+A.PREFERENCE},viewOnLoad:{value:0,kind:A.VIEWER+A.PREFERENCE},cMapPacked:{value:!0,kind:A.API},cMapUrl:{value:"../web/cmaps/",kind:A.API},disableAutoFetch:{value:!1,kind:A.API+A.PREFERENCE},disableFontFace:{value:!1,kind:A.API+A.PREFERENCE},disableRange:{value:!1,kind:A.API+A.PREFERENCE},disableStream:{value:!1,kind:A.API+A.PREFERENCE},docBaseUrl:{value:"",kind:A.API},enableXfa:{value:!0,kind:A.API+A.PREFERENCE},fontExtraProperties:{value:!1,kind:A.API},isEvalSupported:{value:!0,kind:A.API},maxImageSize:{value:-1,kind:A.API},pdfBug:{value:!1,kind:A.API},standardFontDataUrl:{value:"../web/standard_fonts/",kind:A.API},verbosity:{value:1,kind:A.API},workerPort:{value:null,kind:A.WORKER},workerSrc:{value:"../build/pdf.worker.js",kind:A.WORKER}};y.defaultUrl={value:"compressed.tracemonkey-pldi-09.pdf",kind:A.VIEWER},y.disablePreferences={value:!1,kind:A.VIEWER},y.locale={value:navigator.language||"en-US",kind:A.VIEWER},y.renderer={value:"canvas",kind:A.VIEWER+A.PREFERENCE},y.sandboxBundleSrc={value:"../build/pdf.sandbox.js",kind:A.VIEWER};const P=Object.create(null);a.AppOptions=class u{constructor(){throw new Error("Cannot initialize AppOptions.")}static get(e){const o=P[e];if(void 0!==o)return o;const v=y[e];return void 0!==v?_[e]??v.value:void 0}static getAll(e=null){const o=Object.create(null);for(const v in y){const S=y[v];if(e){if(!(e&S.kind))continue;if(e===A.PREFERENCE){const c=S.value,b=typeof c;if("boolean"===b||"string"===b||"number"===b&&Number.isInteger(c)){o[v]=c;continue}throw new Error(`Invalid type for preference: ${v}`)}}const p=P[v];o[v]=void 0!==p?p:_[v]??S.value}return o}static set(e,o){P[e]=o}static setAll(e){for(const o in e)P[o]=e[o]}static remove(e){delete P[e]}static _hasUserOptions(){return Object.keys(P).length>0}}},(w,a,_)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.TextAccessibilityManager=void 0;var A=_(7),y=new WeakMap,P=new WeakMap,u=new WeakMap,t=new WeakMap,e=new WeakSet;class o{constructor(){r(this,e),Q(this,y,{writable:!0,value:!1}),Q(this,P,{writable:!0,value:null}),Q(this,u,{writable:!0,value:new Map}),Q(this,t,{writable:!0,value:new Map})}setTextMapping(c){T(this,P,c)}enable(){if(F(this,y))throw new Error("TextAccessibilityManager is already enabled.");if(!F(this,P))throw new Error("Text divs and strings have not been set.");if(T(this,y,!0),T(this,P,F(this,P).slice()),F(this,P).sort(m(o,o,v)),F(this,u).size>0){const c=F(this,P);for(const[b,N]of F(this,u))document.getElementById(b)?n(this,e,S).call(this,b,c[N]):F(this,u).delete(b)}for(const[c,b]of F(this,t))this.addPointerInTextLayer(c,b);F(this,t).clear()}disable(){F(this,y)&&(F(this,t).clear(),T(this,P,null),T(this,y,!1))}removePointerInTextLayer(c){if(!F(this,y))return void F(this,t).delete(c);const b=F(this,P);if(!b||0===b.length)return;const{id:N}=c,I=F(this,u).get(N);if(void 0===I)return;const Y=b[I];F(this,u).delete(N);let W=Y.getAttribute("aria-owns");W?.includes(N)&&(W=W.split(" ").filter(j=>j!==N).join(" "),W?Y.setAttribute("aria-owns",W):(Y.removeAttribute("aria-owns"),Y.setAttribute("role","presentation")))}addPointerInTextLayer(c,b){const{id:N}=c;if(!N)return;if(!F(this,y))return void F(this,t).set(c,b);b&&this.removePointerInTextLayer(c);const I=F(this,P);if(!I||0===I.length)return;const Y=(0,A.binarySearchFirstItem)(I,j=>m(o,o,v).call(o,c,j)<0),W=Math.max(0,Y-1);n(this,e,S).call(this,N,I[W]),F(this,u).set(N,W)}moveElementInDOM(c,b,N,I){if(this.addPointerInTextLayer(N,I),!c.hasChildNodes())return void c.append(b);const Y=Array.from(c.childNodes).filter(z=>z!==b);if(0===Y.length)return;const W=N||b,j=(0,A.binarySearchFirstItem)(Y,z=>m(o,o,v).call(o,W,z)<0);0===j?Y[0].before(b):Y[j-1].after(b)}}function v(p,c){const b=p.getBoundingClientRect(),N=c.getBoundingClientRect();if(0===b.width&&0===b.height)return 1;if(0===N.width&&0===N.height)return-1;const W=b.y+b.height/2,ee=N.y+N.height/2;return W<=N.y&&ee>=b.y+b.height?-1:ee<=b.y&&W>=N.y+N.height?1:b.x+b.width/2-(N.x+N.width/2)}function S(p,c){const b=c.getAttribute("aria-owns");b?.includes(p)||c.setAttribute("aria-owns",b?`${b} ${p}`:p),c.removeAttribute("role")}a.TextAccessibilityManager=o},(w,a,_)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.PDFRenderingQueue=void 0;var A=_(3),y=_(7);a.PDFRenderingQueue=class u{constructor(){this.pdfViewer=null,this.pdfThumbnailViewer=null,this.onIdle=null,this.highestPriorityPage=null,this.idleTimeout=null,this.printing=!1,this.isThumbnailViewEnabled=!1}setViewer(e){this.pdfViewer=e}setThumbnailViewer(e){this.pdfThumbnailViewer=e}isHighestPriority(e){return this.highestPriorityPage===e.renderingId}hasViewer(){return!!this.pdfViewer}renderHighestPriority(e){this.idleTimeout&&(clearTimeout(this.idleTimeout),this.idleTimeout=null),!this.pdfViewer.forceRendering(e)&&(this.isThumbnailViewEnabled&&this.pdfThumbnailViewer?.forceRendering()||this.printing||this.onIdle&&(this.idleTimeout=setTimeout(this.onIdle.bind(this),3e4)))}getHighestPriority(e,o,v,S=!1){const p=e.views,c=p.length;if(0===c)return null;for(let W=0;W<c;W++){const j=p[W].view;if(!this.isViewFinished(j))return j}const b=e.first.id,N=e.last.id;if(N-b+1>c){const W=e.ids;for(let j=1,z=N-b;j<z;j++){const ee=v?b+j:N-j;if(W.has(ee))continue;const oe=o[ee-1];if(!this.isViewFinished(oe))return oe}}let I=v?N:b-2,Y=o[I];return Y&&!this.isViewFinished(Y)||S&&(I+=v?1:-1,Y=o[I],Y&&!this.isViewFinished(Y))?Y:null}isViewFinished(e){return e.renderingState===y.RenderingStates.FINISHED}renderView(e){switch(e.renderingState){case y.RenderingStates.FINISHED:return!1;case y.RenderingStates.PAUSED:this.highestPriorityPage=e.renderingId,e.resume();break;case y.RenderingStates.RUNNING:this.highestPriorityPage=e.renderingId;break;case y.RenderingStates.INITIAL:this.highestPriorityPage=e.renderingId,e.draw().finally(()=>{this.renderHighestPriority()}).catch(o=>{o instanceof A.RenderingCancelledException||console.error(`renderView: "${o}"`)})}return!0}}},(w,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.TextHighlighter=void 0,a.TextHighlighter=class _{constructor({findController:y,eventBus:P,pageIndex:u}){this.findController=y,this.matches=[],this.eventBus=P,this.pageIdx=u,this._onUpdateTextLayerMatches=null,this.textDivs=null,this.textContentItemsStr=null,this.enabled=!1}setTextMapping(y,P){this.textDivs=y,this.textContentItemsStr=P}enable(){if(!this.textDivs||!this.textContentItemsStr)throw new Error("Text divs and strings have not been set.");if(this.enabled)throw new Error("TextHighlighter is already enabled.");this.enabled=!0,this._onUpdateTextLayerMatches||(this._onUpdateTextLayerMatches=y=>{(y.pageIndex===this.pageIdx||-1===y.pageIndex)&&this._updateMatches()},this.eventBus._on("updatetextlayermatches",this._onUpdateTextLayerMatches)),this._updateMatches()}disable(){this.enabled&&(this.enabled=!1,this._onUpdateTextLayerMatches&&(this.eventBus._off("updatetextlayermatches",this._onUpdateTextLayerMatches),this._onUpdateTextLayerMatches=null))}_convertMatches(y,P){if(!y)return[];const{textContentItemsStr:u}=this;let t=0,e=0;const o=u.length-1,v=[];for(let S=0,p=y.length;S<p;S++){let c=y[S];for(;t!==o&&c>=e+u[t].length;)e+=u[t].length,t++;t===u.length&&console.error("Could not find a matching mapping");const b={begin:{divIdx:t,offset:c-e}};for(c+=P[S];t!==o&&c>e+u[t].length;)e+=u[t].length,t++;b.end={divIdx:t,offset:c-e},v.push(b)}return v}_renderMatches(y){if(0===y.length)return;const{findController:P,pageIdx:u}=this,{textContentItemsStr:t,textDivs:e}=this,o=u===P.selected.pageIdx,v=P.selected.matchIdx;let p=null;function b(W,j){const z=W.divIdx;return e[z].textContent="",N(z,0,W.offset,j)}function N(W,j,z,ee){let oe=e[W];if(oe.nodeType===Node.TEXT_NODE){const l=document.createElement("span");oe.before(l),l.append(oe),e[W]=l,oe=l}const V=t[W].substring(j,z),g=document.createTextNode(V);if(ee){const l=document.createElement("span");return l.className=`${ee} appended`,l.append(g),oe.append(l),ee.includes("selected")?l.offsetLeft:0}return oe.append(g),0}let I=v,Y=I+1;if(P.state.highlightAll)I=0,Y=y.length;else if(!o)return;for(let W=I;W<Y;W++){const j=y[W],z=j.begin,ee=j.end,oe=o&&W===v,V=oe?" selected":"";let g=0;if(p&&z.divIdx===p.divIdx?N(p.divIdx,p.offset,z.offset):(null!==p&&N(p.divIdx,p.offset,void 0),b(z)),z.divIdx===ee.divIdx)g=N(z.divIdx,z.offset,ee.offset,"highlight"+V);else{g=N(z.divIdx,z.offset,void 0,"highlight begin"+V);for(let l=z.divIdx+1,x=ee.divIdx;l<x;l++)e[l].className="highlight middle"+V;b(ee,"highlight end"+V)}p=ee,oe&&P.scrollMatchIntoView({element:e[z.divIdx],selectedLeft:g,pageIndex:u,matchIndex:v})}p&&N(p.divIdx,p.offset,void 0)}_updateMatches(){if(!this.enabled)return;const{findController:y,matches:P,pageIdx:u}=this,{textContentItemsStr:t,textDivs:e}=this;let o=-1;for(let p=0,c=P.length;p<c;p++){const b=P[p];for(let I=Math.max(o,b.begin.divIdx),Y=b.end.divIdx;I<=Y;I++){const W=e[I];W.textContent=t[I],W.className=""}o=b.end.divIdx+1}y?.highlightMatches&&(this.matches=this._convertMatches(y.pageMatches[u]||null,y.pageMatchesLength[u]||null),this._renderMatches(this.matches))}}},(w,a,_)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.DownloadManager=void 0;var A=_(3);function y(u,t){const e=document.createElement("a");if(!e.click)throw new Error('DownloadManager: "a.click()" is not supported.');e.href=u,e.target="_parent","download"in e&&(e.download=t),(document.body||document.documentElement).append(e),e.click(),e.remove()}a.DownloadManager=class P{constructor(){this._openBlobUrls=new WeakMap}downloadUrl(t,e){(0,A.createValidAbsoluteUrl)(t,"http://example.com")?y(t+"#pdfjs.action=download",e):console.error(`downloadUrl - not a valid URL: ${t}`)}downloadData(t,e,o){y(URL.createObjectURL(new Blob([t],{type:o})),e)}openOrDownloadData(t,e,o){const v=(0,A.isPdfFile)(o),S=v?"application/pdf":"";if(v){let c,p=this._openBlobUrls.get(t);p||(p=URL.createObjectURL(new Blob([e],{type:S})),this._openBlobUrls.set(t,p)),c="?file="+encodeURIComponent(p+"#"+o);try{return window.open(c),!0}catch(b){console.error(`openOrDownloadData: ${b}`),URL.revokeObjectURL(p),this._openBlobUrls.delete(t)}}return this.downloadData(e,o,S),!1}download(t,e,o){y(URL.createObjectURL(t),o)}}},(w,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.WaitOnType=a.EventBus=a.AutomationEventBus=void 0,a.waitOnEventOrTimeout=function A({target:u,name:t,delay:e=0}){return new Promise(function(o,v){if("object"!=typeof u||!t||"string"!=typeof t||!(Number.isInteger(e)&&e>=0))throw new Error("waitOnEventOrTimeout - invalid parameters.");function S(N){u instanceof y?u._off(t,p):u.removeEventListener(t,p),b&&clearTimeout(b),o(N)}const p=S.bind(null,_.EVENT);u instanceof y?u._on(t,p):u.addEventListener(t,p);const c=S.bind(null,_.TIMEOUT),b=setTimeout(c,e)})};const _={EVENT:"event",TIMEOUT:"timeout"};a.WaitOnType=_;class y{constructor(){this._listeners=Object.create(null)}on(t,e,o=null){this._on(t,e,{external:!0,once:o?.once})}off(t,e,o=null){this._off(t,e,{external:!0,once:o?.once})}dispatch(t,e){const o=this._listeners[t];if(!o||0===o.length)return;let v;for(const{listener:S,external:p,once:c}of o.slice(0))c&&this._off(t,S),p?(v||=[]).push(S):S(e);if(v){for(const S of v)S(e);v=null}}_on(t,e,o=null){(this._listeners[t]||=[]).push({listener:e,external:!0===o?.external,once:!0===o?.once})}_off(t,e,o=null){const v=this._listeners[t];if(v)for(let S=0,p=v.length;S<p;S++)if(v[S].listener===e)return void v.splice(S,1)}}a.EventBus=y,a.AutomationEventBus=class P extends y{dispatch(t,e){throw new Error("Not implemented: AutomationEventBus.dispatch")}}},(w,a,_)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.GenericL10n=void 0,_(21);var A=_(4);const y=document.webL10n;a.GenericL10n=class P{constructor(t){this._lang=t,this._ready=new Promise((e,o)=>{y.setLanguage((0,A.fixupLangCode)(t),()=>{e(y)})})}getLanguage(){var t=this;return D(function*(){return(yield t._ready).getLanguage()})()}getDirection(){var t=this;return D(function*(){return(yield t._ready).getDirection()})()}get(t,e=null,o=(0,A.getL10nFallback)(t,e)){var v=this;return D(function*(){return(yield v._ready).get(t,e,o)})()}translate(t){var e=this;return D(function*(){return(yield e._ready).translate(t)})()}}},()=>{document.webL10n=function(w,a,_){var A={},y="",P="textContent",u="",t={},e="loading",o=!0;function b(l,x,L){x=x||function(h){},L=L||function(){};var E=new XMLHttpRequest;E.open("GET",l,o),E.overrideMimeType&&E.overrideMimeType("text/plain; charset=utf-8"),E.onreadystatechange=function(){4==E.readyState&&(200==E.status||0===E.status?x(E.responseText):L())},E.onerror=L,E.ontimeout=L;try{E.send(null)}catch{L()}}function I(l,x){l&&(l=l.toLowerCase()),x=x||function(){},function Y(){A={},y="",u=""}(),u=l;var L=function v(){return a.querySelectorAll('link[type="application/l10n"]')}(),E=L.length;if(0!==E){var O,R=0;O=function(){++R>=E&&(x(),e="complete")};for(var K=0;K<E;K++)new $(L[K]).load(l,O)}else{var i=function S(){var l=a.querySelector('script[type="application/l10n"]');return l?JSON.parse(l.innerHTML):null}();if(i&&i.locales&&i.default_locale){if(console.log("using the embedded JSON directory, early way out"),!(A=i.locales[l])){var h=i.default_locale.toLowerCase();for(var d in i.locales){if((d=d.toLowerCase())===l){A=i.locales[l];break}d===h&&(A=i.locales[h])}}x()}else console.log("no resource to load, early way out");e="complete"}function $(te){var de=te.href;this.load=function(me,ie){!function N(l,x,L,E){var i=l.replace(/[^\/]*$/,"")||"./";function h(O){return O.lastIndexOf("\\")<0?O:O.replace(/\\\\/g,"\\").replace(/\\n/g,"\n").replace(/\\r/g,"\r").replace(/\\t/g,"\t").replace(/\\b/g,"\b").replace(/\\f/g,"\f").replace(/\\{/g,"{").replace(/\\}/g,"}").replace(/\\"/g,'"').replace(/\\'/g,"'")}b(l,function(O){y+=O,function d(O,R){var $={},K=/^\s*|\s*$/,ce=/^\s*#|^\s*$/,te=/^\s*\[(.*)\]\s*$/,de=/^\s*@import\s+url\((.*)\)\s*$/i,me=/^([^=\s]*)\s*=\s*(.+)$/;function ie(Ae,_e,ae){var ue=Ae.replace(K,"").split(/[\r\n]+/),we="*",ke=x.split("-",1)[0],Fe=!1,ge="";!function Pe(){for(;;){if(!ue.length)return void ae();var Me=ue.shift();if(!ce.test(Me)){if(_e){if(ge=te.exec(Me)){we=ge[1].toLowerCase(),Fe="*"!==we&&we!==x&&we!==ke;continue}if(Fe)continue;if(ge=de.exec(Me))return void fe(i+ge[1],Pe)}var xe=Me.match(me);xe&&3==xe.length&&($[xe[1]]=h(xe[2]))}}}()}function fe(Ae,_e){b(Ae,function(ae){ie(ae,!1,_e)},function(){console.warn(Ae+" not found."),_e()})}ie(O,!0,function(){R($)})}(O,function(R){for(var $ in R){var K,ce,te=$.lastIndexOf(".");te>0?(K=$.substring(0,te),ce=$.substring(te+1)):(K=$,ce=P),A[K]||(A[K]={}),A[K][ce]=R[$]}L&&L()})},E)}(de,me,ie,function(){console.warn(de+" not found."),console.warn('"'+me+'" resource not found'),u="",ie()})}}}function j(l,x,L){var E=A[l];if(!E){if(console.warn("#"+l+" is undefined."),!L)return null;E=L}var i={};for(var h in E){var d=E[h];d=ee(d=z(d,x,l,h),x,l),i[h]=d}return i}function z(l,x,L,E){var h=/\{\[\s*([a-zA-Z]+)\(([a-zA-Z]+)\)\s*\]\}/.exec(l);if(!h||!h.length)return l;var R,d=h[1],O=h[2];return x&&O in x?R=x[O]:O in A&&(R=A[O]),d in t&&(l=(0,t[d])(l,R,L,E)),l}function ee(l,x,L){return l.replace(/\{\{\s*(.+?)\s*\}\}/g,function(i,h){return x&&h in x?x[h]:h in A?A[h]:(console.log("argument {{"+h+"}} for #"+L+" is undefined."),i)})}function oe(l){var x=function c(l){if(!l)return{};var x=l.getAttribute("data-l10n-id"),L=l.getAttribute("data-l10n-args"),E={};if(L)try{E=JSON.parse(L)}catch{console.warn("could not parse arguments for #"+x)}return{id:x,args:E}}(l);if(x.id){var L=j(x.id,x.args);if(!L)return void console.warn("#"+x.id+" is undefined.");if(L[P]){if(0===function V(l){if(l.children)return l.children.length;if(typeof l.childElementCount<"u")return l.childElementCount;for(var x=0,L=0;L<l.childNodes.length;L++)x+=1===l.nodeType?1:0;return x}(l))l[P]=L[P];else{for(var E=l.childNodes,i=!1,h=0,d=E.length;h<d;h++)3===E[h].nodeType&&/\S/.test(E[h].nodeValue)&&(i?E[h].nodeValue="":(E[h].nodeValue=L[P],i=!0));if(!i){var O=a.createTextNode(L[P]);l.prepend(O)}}delete L[P]}for(var R in L)l[R]=L[R]}}return t.plural=function(l,x,L,E){var i=parseFloat(x);if(isNaN(i)||E!=P)return l;t._pluralRules||(t._pluralRules=function W(l){function L(d,O){return-1!==O.indexOf(d)}function E(d,O,R){return O<=d&&d<=R}var i={0:function(d){return"other"},1:function(d){return E(d%100,3,10)?"few":0===d?"zero":E(d%100,11,99)?"many":2==d?"two":1==d?"one":"other"},2:function(d){return 0!==d&&d%10==0?"many":2==d?"two":1==d?"one":"other"},3:function(d){return 1==d?"one":"other"},4:function(d){return E(d,0,1)?"one":"other"},5:function(d){return E(d,0,2)&&2!=d?"one":"other"},6:function(d){return 0===d?"zero":d%10==1&&d%100!=11?"one":"other"},7:function(d){return 2==d?"two":1==d?"one":"other"},8:function(d){return E(d,3,6)?"few":E(d,7,10)?"many":2==d?"two":1==d?"one":"other"},9:function(d){return 0===d||1!=d&&E(d%100,1,19)?"few":1==d?"one":"other"},10:function(d){return E(d%10,2,9)&&!E(d%100,11,19)?"few":d%10!=1||E(d%100,11,19)?"other":"one"},11:function(d){return E(d%10,2,4)&&!E(d%100,12,14)?"few":d%10==0||E(d%10,5,9)||E(d%100,11,14)?"many":d%10==1&&d%100!=11?"one":"other"},12:function(d){return E(d,2,4)?"few":1==d?"one":"other"},13:function(d){return E(d%10,2,4)&&!E(d%100,12,14)?"few":1!=d&&E(d%10,0,1)||E(d%10,5,9)||E(d%100,12,14)?"many":1==d?"one":"other"},14:function(d){return E(d%100,3,4)?"few":d%100==2?"two":d%100==1?"one":"other"},15:function(d){return 0===d||E(d%100,2,10)?"few":E(d%100,11,19)?"many":1==d?"one":"other"},16:function(d){return d%10==1&&11!=d?"one":"other"},17:function(d){return 3==d?"few":0===d?"zero":6==d?"many":2==d?"two":1==d?"one":"other"},18:function(d){return 0===d?"zero":E(d,0,2)&&0!==d&&2!=d?"one":"other"},19:function(d){return E(d,2,10)?"few":E(d,0,1)?"one":"other"},20:function(d){return!E(d%10,3,4)&&d%10!=9||E(d%100,10,19)||E(d%100,70,79)||E(d%100,90,99)?d%1e6==0&&0!==d?"many":d%10!=2||L(d%100,[12,72,92])?d%10!=1||L(d%100,[11,71,91])?"other":"one":"two":"few"},21:function(d){return 0===d?"zero":1==d?"one":"other"},22:function(d){return E(d,0,1)||E(d,11,99)?"one":"other"},23:function(d){return E(d%10,1,2)||d%20==0?"one":"other"},24:function(d){return E(d,3,10)||E(d,13,19)?"few":L(d,[2,12])?"two":L(d,[1,11])?"one":"other"}},h={af:3,ak:4,am:4,ar:1,asa:3,az:0,be:11,bem:3,bez:3,bg:3,bh:4,bm:0,bn:3,bo:0,br:20,brx:3,bs:11,ca:3,cgg:3,chr:3,cs:12,cy:17,da:3,de:3,dv:3,dz:0,ee:3,el:3,en:3,eo:3,es:3,et:3,eu:3,fa:0,ff:5,fi:3,fil:4,fo:3,fr:5,fur:3,fy:3,ga:8,gd:24,gl:3,gsw:3,gu:3,guw:4,gv:23,ha:3,haw:3,he:2,hi:4,hr:11,hu:0,id:0,ig:0,ii:0,is:3,it:3,iu:7,ja:0,jmc:3,jv:0,ka:0,kab:5,kaj:3,kcg:3,kde:0,kea:0,kk:3,kl:3,km:0,kn:0,ko:0,ksb:3,ksh:21,ku:3,kw:7,lag:18,lb:3,lg:3,ln:4,lo:0,lt:10,lv:6,mas:3,mg:4,mk:16,ml:3,mn:3,mo:9,mr:3,ms:0,mt:15,my:0,nah:3,naq:7,nb:3,nd:3,ne:3,nl:3,nn:3,no:3,nr:3,nso:4,ny:3,nyn:3,om:3,or:3,pa:3,pap:3,pl:13,ps:3,pt:3,rm:3,ro:9,rof:3,ru:11,rwk:3,sah:0,saq:3,se:7,seh:3,ses:0,sg:0,sh:11,shi:19,sk:12,sl:14,sma:7,smi:7,smj:7,smn:7,sms:7,sn:3,so:3,sq:3,sr:11,ss:3,ssy:3,st:3,sv:3,sw:3,syr:3,ta:3,te:3,teo:3,th:0,ti:4,tig:3,tk:3,tl:4,tn:3,to:0,tr:0,ts:3,tzm:22,uk:11,ur:3,ve:3,vi:0,vun:3,wa:4,wae:3,wo:0,xh:3,xog:3,yo:0,zh:0,zu:3}[l.replace(/-.*$/,"")];return h in i?i[h]:(console.warn("plural form unknown for ["+l+"]"),function(){return"other"})}(u));var h="["+t._pluralRules(i)+"]";return 0===i&&L+"[zero]"in A?l=A[L+"[zero]"][E]:1==i&&L+"[one]"in A?l=A[L+"[one]"][E]:2==i&&L+"[two]"in A?l=A[L+"[two]"][E]:L+h in A?l=A[L+h][E]:L+"[other]"in A&&(l=A[L+"[other]"][E]),l},{get:function(l,x,L){var h,E=l.lastIndexOf("."),i=P;E>0&&(i=l.substring(E+1),l=l.substring(0,E)),L&&((h={})[i]=L);var d=j(l,x,h);return d&&i in d?d[i]:"{{"+l+"}}"},getData:function(){return A},getText:function(){return y},getLanguage:function(){return u},setLanguage:function(l,x){I(l,function(){x&&x()})},getDirection:function(){var x=u.split("-",1)[0];return["ar","he","fa","ps","ur"].indexOf(x)>=0?"rtl":"ltr"},translate:function g(l){for(var x=function p(l){return l?l.querySelectorAll("*[data-l10n-id]"):[]}(l=l||a.documentElement),L=x.length,E=0;E<L;E++)oe(x[E]);oe(l)},getReadyState:function(){return e},ready:function(l){l&&("complete"==e||"interactive"==e?w.setTimeout(function(){l()}):a.addEventListener&&a.addEventListener("localized",function x(){a.removeEventListener("localized",x),l()}))}}}(window,document)},(w,a,_)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.PDFFindController=a.FindState=void 0;var A=_(7),y=_(3),P=_(23);const u={FOUND:0,NOT_FOUND:1,WRAPPED:2,PENDING:3};a.FindState=u;const v={"\u2010":"-","\u2018":"'","\u2019":"'","\u201a":"'","\u201b":"'","\u201c":'"',"\u201d":'"',"\u201e":'"',"\u201f":'"',"\xbc":"1/4","\xbd":"1/2","\xbe":"3/4"},S=new Set([12441,12442,2381,2509,2637,2765,2893,3021,3149,3277,3387,3388,3405,3530,3642,3770,3972,4153,4154,5908,5940,6098,6752,6980,7082,7083,7154,7155,11647,43014,43052,43204,43347,43456,43766,44013,3158,3953,3954,3962,3963,3964,3965,3968,3956]),p=[...S.values()].map(he=>String.fromCharCode(he)).join(""),c=/\p{M}+/gu,b=/([.*+?^${}()|[\]\\])|(\p{P})|(\s+)|(\p{M})|(\p{L})/gu,N=/([^\p{M}])\p{M}*$/u,I=/^\p{M}*([^\p{M}])/u,Y=/[\uAC00-\uD7AF\uFA6C\uFACF-\uFAD1\uFAD5-\uFAD7]+/g,W=new Map,j="[\\u1100-\\u1112\\ud7a4-\\ud7af\\ud84a\\ud84c\\ud850\\ud854\\ud857\\ud85f]";let z=null,ee=null;function oe(he){const pe=[];let be,ye;for(;null!==(be=Y.exec(he));){let{index:Ge}=be;for(const Ne of be[0]){let De=W.get(Ne);De||(De=Ne.normalize("NFD").length,W.set(Ne,De)),pe.push([De,Ge++])}}if(0===pe.length&&z)ye=z;else if(pe.length>0&&ee)ye=ee;else{const Ne=`([${Object.keys(v).join("")}])|(\\p{M}+(?:-\\n)?)|(\\S-\\n)|(\\n)`;ye=0===pe.length?z=new RegExp(Ne+"|(\\u0000)","gum"):ee=new RegExp(Ne+`|(${j})`,"gum")}const Ee=[];for(;null!==(be=c.exec(he));)Ee.push([be[0].length,be.index]);let Te=he.normalize("NFD");const Re=[[0,0]];let Le=0,Oe=0,Ce=0,Ie=0,Be=0,Ue=!1;return Te=Te.replace(ye,(Ge,Ne,De,ze,qe,Ye,Ve)=>{if(Ve-=Ie,Ne){const je=v[Ge],We=je.length;for(let He=1;He<We;He++)Re.push([Ve-Ce+He,Ce-He]);return Ce-=We-1,je}if(De){const je=De.endsWith("\n"),We=je?De.length-2:De.length;Ue=!0;let He=We;Ve+Be===Ee[Le]?.[1]&&(He-=Ee[Le][0],++Le);for(let Xe=1;Xe<=He;Xe++)Re.push([Ve-1-Ce+Xe,Ce-Xe]);return Ce-=He,Ie+=He,je?(Re.push([(Ve+=We-1)-Ce+1,1+Ce]),Ce+=1,Ie+=1,Be+=1,De.slice(0,We)):De}if(ze)return Re.push([Ve-Ce+1,1+Ce]),Ce+=1,Ie+=1,Be+=1,ze.charAt(0);if(qe)return Re.push([Ve-Ce+1,Ce-1]),Ce-=1,Ie+=1,Be+=1," ";if(Ve+Be===pe[Oe]?.[1]){const je=pe[Oe][0]-1;++Oe;for(let We=1;We<=je;We++)Re.push([Ve-(Ce-We),Ce-We]);Ce-=je,Ie+=je}return Ye}),Re.push([Te.length,Ce]),[Te,Re,Ue]}function V(he,pe,be){if(!he)return[pe,be];const ye=pe,Ee=pe+be;let Te=(0,A.binarySearchFirstItem)(he,Le=>Le[0]>=ye);he[Te][0]>ye&&--Te;let Re=(0,A.binarySearchFirstItem)(he,Le=>Le[0]>=Ee,Te);return he[Re][0]>Ee&&--Re,[ye+he[Te][1],be+he[Re][1]-he[Te][1]]}var g=new WeakSet,l=new WeakSet,x=new WeakMap,L=new WeakSet,E=new WeakSet,i=new WeakSet,h=new WeakSet,d=new WeakSet,O=new WeakSet,R=new WeakSet,$=new WeakSet,K=new WeakSet,ce=new WeakSet,te=new WeakSet,de=new WeakSet,me=new WeakSet,ie=new WeakSet,fe=new WeakSet,Ae=new WeakSet,_e=new WeakSet;function ue(he){if(!he)return;const pe=this._pdfDocument,{type:be}=he;(null===this._state||n(this,L,Fe).call(this,he))&&(this._dirtyMatch=!0),this._state=he,"highlightallchange"!==be&&n(this,_e,ve).call(this,u.PENDING),this._firstPageCapability.promise.then(()=>{if(!this._pdfDocument||pe&&this._pdfDocument!==pe)return;n(this,O,Se).call(this);const ye=!this._highlightMatches,Ee=!!this._findTimeout;this._findTimeout&&(clearTimeout(this._findTimeout),this._findTimeout=null),be?this._dirtyMatch?n(this,K,re).call(this):"again"===be?(n(this,K,re).call(this),ye&&this._state.highlightAll&&n(this,$,ne).call(this)):"highlightallchange"===be?(Ee?n(this,K,re).call(this):this._highlightMatches=!0,n(this,$,ne).call(this)):n(this,K,re).call(this):this._findTimeout=setTimeout(()=>{n(this,K,re).call(this),this._findTimeout=null},250)})}function we(){this._highlightMatches=!1,this._scrollMatches=!1,this._pdfDocument=null,this._pageMatches=[],this._pageMatchesLength=[],this._state=null,this._selected={pageIdx:-1,matchIdx:-1},this._offset={pageIdx:null,matchIdx:null,wrapped:!1},this._extractTextPromises=[],this._pageContents=[],this._pageDiffs=[],this._hasDiacritics=[],this._matchesCountTotal=0,this._pagesToSearch=null,this._pendingFindMatches=new Set,this._resumePageIdx=null,this._dirtyMatch=!1,clearTimeout(this._findTimeout),this._findTimeout=null,this._firstPageCapability=(0,y.createPromiseCapability)()}function ke(){return this._state.query!==this._rawQuery&&(this._rawQuery=this._state.query,[this._normalizedQuery]=oe(this._state.query)),this._normalizedQuery}function Fe(he){if(he.query!==this._state.query)return!0;switch(he.type){case"again":const pe=this._selected.pageIdx+1,be=this._linkService;return pe>=1&&pe<=be.pagesCount&&pe!==be.page&&!be.isPageVisible(pe);case"highlightallchange":return!1}return!0}function ge(he,pe,be){let ye=he.slice(0,pe).match(N);if(ye){const Ee=he.charCodeAt(pe),Te=ye[1].charCodeAt(0);if((0,P.getCharacterType)(Ee)===(0,P.getCharacterType)(Te))return!1}if(ye=he.slice(pe+be).match(I),ye){const Ee=he.charCodeAt(pe+be-1),Te=ye[1].charCodeAt(0);if((0,P.getCharacterType)(Ee)===(0,P.getCharacterType)(Te))return!1}return!0}function Pe(he,pe,be,ye){const Ee=[],Te=[],Re=this._pageDiffs[be];let Le;for(;null!==(Le=he.exec(ye));){if(pe&&!n(this,E,ge).call(this,ye,Le.index,Le[0].length))continue;const[Oe,Ce]=V(Re,Le.index,Le[0].length);Ce&&(Ee.push(Oe),Te.push(Ce))}this._pageMatches[be]=Ee,this._pageMatchesLength[be]=Te}function Me(he,pe){const{matchDiacritics:be}=this._state;let ye=!1;return(he=he.replace(b,(Te,Re,Le,Oe,Ce,Ie)=>Re?`[ ]*\\${Re}[ ]*`:Le?`[ ]*${Le}[ ]*`:Oe?"[ ]+":be?Ce||Ie:Ce?S.has(Ce.charCodeAt(0))?Ce:"":pe?(ye=!0,`${Ie}\\p{M}*`):Ie)).endsWith("[ ]*")&&(he=he.slice(0,he.length-4)),be&&pe&&(ye=!0,he=`${he}(?=[${p}]|[^\\p{M}]|$)`),[ye,he]}function xe(he){let pe=F(this,x);if(0===pe.length)return;const{caseSensitive:be,entireWord:ye,phraseSearch:Ee}=this._state,Te=this._pageContents[he],Re=this._hasDiacritics[he];let Le=!1;if(Ee)[Le,pe]=n(this,h,Me).call(this,pe,Re);else{const Ie=pe.match(/\S+/g);Ie&&(pe=Ie.sort().reverse().map(Be=>{const[Ue,Ge]=n(this,h,Me).call(this,Be,Re);return Le||=Ue,`(${Ge})`}).join("|"))}pe=new RegExp(pe,`g${Le?"u":""}${be?"":"i"}`),n(this,i,Pe).call(this,pe,ye,he,Te),this._state.highlightAll&&n(this,R,B).call(this,he),this._resumePageIdx===he&&(this._resumePageIdx=null,n(this,te,X).call(this));const Ce=this._pageMatches[he].length;Ce>0&&(this._matchesCountTotal+=Ce,n(this,Ae,le).call(this))}function Se(){if(this._extractTextPromises.length>0)return;let he=Promise.resolve();for(let pe=0,be=this._linkService.pagesCount;pe<be;pe++){const ye=(0,y.createPromiseCapability)();this._extractTextPromises[pe]=ye.promise,he=he.then(()=>this._pdfDocument.getPage(pe+1).then(Ee=>Ee.getTextContent()).then(Ee=>{const Te=[];for(const Re of Ee.items)Te.push(Re.str),Re.hasEOL&&Te.push("\n");[this._pageContents[pe],this._pageDiffs[pe],this._hasDiacritics[pe]]=oe(Te.join("")),ye.resolve()},Ee=>{console.error(`Unable to get text content for page ${pe+1}`,Ee),this._pageContents[pe]="",this._pageDiffs[pe]=null,this._hasDiacritics[pe]=!1,ye.resolve()}))}}function B(he){this._scrollMatches&&this._selected.pageIdx===he&&(this._linkService.page=he+1),this._eventBus.dispatch("updatetextlayermatches",{source:this,pageIndex:he})}function ne(){this._eventBus.dispatch("updatetextlayermatches",{source:this,pageIndex:-1})}function re(){const he=this._state.findPrevious,pe=this._linkService.page-1,be=this._linkService.pagesCount;if(this._highlightMatches=!0,this._dirtyMatch){this._dirtyMatch=!1,this._selected.pageIdx=this._selected.matchIdx=-1,this._offset.pageIdx=pe,this._offset.matchIdx=null,this._offset.wrapped=!1,this._resumePageIdx=null,this._pageMatches.length=0,this._pageMatchesLength.length=0,this._matchesCountTotal=0,n(this,$,ne).call(this);for(let Ee=0;Ee<be;Ee++)this._pendingFindMatches.has(Ee)||(this._pendingFindMatches.add(Ee),this._extractTextPromises[Ee].then(()=>{this._pendingFindMatches.delete(Ee),n(this,d,xe).call(this,Ee)}))}if(""===F(this,x))return void n(this,_e,ve).call(this,u.FOUND);if(this._resumePageIdx)return;const ye=this._offset;if(this._pagesToSearch=be,null!==ye.matchIdx){if(!he&&ye.matchIdx+1<this._pageMatches[ye.pageIdx].length||he&&ye.matchIdx>0)return ye.matchIdx=he?ye.matchIdx-1:ye.matchIdx+1,void n(this,me,H).call(this,!0);n(this,de,J).call(this,he)}n(this,te,X).call(this)}function se(he){const pe=this._offset,be=he.length,ye=this._state.findPrevious;return be?(pe.matchIdx=ye?be-1:0,n(this,me,H).call(this,!0),!0):(n(this,de,J).call(this,ye),!!(pe.wrapped&&(pe.matchIdx=null,this._pagesToSearch<0))&&(n(this,me,H).call(this,!1),!0))}function X(){null!==this._resumePageIdx&&console.error("There can only be one pending page.");let he=null;do{const pe=this._offset.pageIdx;if(he=this._pageMatches[pe],!he){this._resumePageIdx=pe;break}}while(!n(this,ce,se).call(this,he))}function J(he){const pe=this._offset,be=this._linkService.pagesCount;pe.pageIdx=he?pe.pageIdx-1:pe.pageIdx+1,pe.matchIdx=null,this._pagesToSearch--,(pe.pageIdx>=be||pe.pageIdx<0)&&(pe.pageIdx=he?be-1:0,pe.wrapped=!0)}function H(he=!1){let pe=u.NOT_FOUND;const be=this._offset.wrapped;if(this._offset.wrapped=!1,he){const ye=this._selected.pageIdx;this._selected.pageIdx=this._offset.pageIdx,this._selected.matchIdx=this._offset.matchIdx,pe=be?u.WRAPPED:u.FOUND,-1!==ye&&ye!==this._selected.pageIdx&&n(this,R,B).call(this,ye)}n(this,_e,ve).call(this,pe,this._state.findPrevious),-1!==this._selected.pageIdx&&(this._scrollMatches=!0,n(this,R,B).call(this,this._selected.pageIdx))}function f(he){const pe=this._pdfDocument;this._firstPageCapability.promise.then(()=>{!this._pdfDocument||pe&&this._pdfDocument!==pe||(this._findTimeout&&(clearTimeout(this._findTimeout),this._findTimeout=null),this._resumePageIdx&&(this._resumePageIdx=null,this._dirtyMatch=!0),n(this,_e,ve).call(this,u.FOUND),this._highlightMatches=!1,n(this,$,ne).call(this))})}function M(){const{pageIdx:he,matchIdx:pe}=this._selected;let be=0,ye=this._matchesCountTotal;if(-1!==pe){for(let Ee=0;Ee<he;Ee++)be+=this._pageMatches[Ee]?.length||0;be+=pe+1}return(be<1||be>ye)&&(be=ye=0),{current:be,total:ye}}function le(){this._eventBus.dispatch("updatefindmatchescount",{source:this,matchesCount:n(this,fe,M).call(this)})}function ve(he,pe=!1){this._eventBus.dispatch("updatefindcontrolstate",{source:this,state:he,previous:pe,matchesCount:n(this,fe,M).call(this),rawQuery:this._state?.query??null})}a.PDFFindController=class ae{constructor({linkService:pe,eventBus:be}){r(this,_e),r(this,Ae),r(this,fe),r(this,ie),r(this,me),r(this,de),r(this,te),r(this,ce),r(this,K),r(this,$),r(this,R),r(this,O),r(this,d),r(this,h),r(this,i),r(this,E),r(this,L),Q(this,x,{get:ke,set:void 0}),r(this,l),r(this,g),this._linkService=pe,this._eventBus=be,n(this,l,we).call(this),be._on("find",n(this,g,ue).bind(this)),be._on("findbarclose",n(this,ie,f).bind(this))}get highlightMatches(){return this._highlightMatches}get pageMatches(){return this._pageMatches}get pageMatchesLength(){return this._pageMatchesLength}get selected(){return this._selected}get state(){return this._state}setDocument(pe){this._pdfDocument&&n(this,l,we).call(this),pe&&(this._pdfDocument=pe,this._firstPageCapability.resolve())}scrollMatchIntoView({element:pe=null,selectedLeft:be=0,pageIndex:ye=-1,matchIndex:Ee=-1}){this._scrollMatches&&pe&&-1!==Ee&&Ee===this._selected.matchIdx&&-1!==ye&&ye===this._selected.pageIdx&&(this._scrollMatches=!1,(0,A.scrollIntoView)(pe,{top:-50,left:be+-400},!0))}}},(w,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.CharacterType=void 0,a.getCharacterType=function c(b){return function A(b){return b<11904}(b)?function y(b){return 0==(65408&b)}(b)?function t(b){return 32===b||9===b||13===b||10===b}(b)?_.SPACE:function P(b){return b>=97&&b<=122||b>=65&&b<=90}(b)||function u(b){return b>=48&&b<=57}(b)||95===b?_.ALPHA_LETTER:_.PUNCT:function p(b){return 3584==(65408&b)}(b)?_.THAI_LETTER:160===b?_.SPACE:_.ALPHA_LETTER:function e(b){return b>=13312&&b<=40959||b>=63744&&b<=64255}(b)?_.HAN_LETTER:function o(b){return b>=12448&&b<=12543}(b)?_.KATAKANA_LETTER:function v(b){return b>=12352&&b<=12447}(b)?_.HIRAGANA_LETTER:function S(b){return b>=65376&&b<=65439}(b)?_.HALFWIDTH_KATAKANA_LETTER:_.ALPHA_LETTER};const _={SPACE:0,ALPHA_LETTER:1,PUNCT:2,HAN_LETTER:3,KATAKANA_LETTER:4,HIRAGANA_LETTER:5,HALFWIDTH_KATAKANA_LETTER:6,THAI_LETTER:7};a.CharacterType=_},(w,a,_)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.PDFHistory=void 0,a.isDestArraysEqual=S,a.isDestHashesEqual=v;var A=_(7),y=_(19);function e(){return document.location.hash}function v(p,c){return"string"==typeof p&&"string"==typeof c&&(p===c||(0,A.parseQueryString)(p).get("nameddest")===c)}function S(p,c){function b(N,I){if(typeof N!=typeof I||Array.isArray(N)||Array.isArray(I))return!1;if(null!==N&&"object"==typeof N&&null!==I){if(Object.keys(N).length!==Object.keys(I).length)return!1;for(const Y in N)if(!b(N[Y],I[Y]))return!1;return!0}return N===I||Number.isNaN(N)&&Number.isNaN(I)}if(!Array.isArray(p)||!Array.isArray(c)||p.length!==c.length)return!1;for(let N=0,I=p.length;N<I;N++)if(!b(p[N],c[N]))return!1;return!0}a.PDFHistory=class o{constructor({linkService:c,eventBus:b}){this.linkService=c,this.eventBus=b,this._initialized=!1,this._fingerprint="",this.reset(),this._boundEvents=null,this.eventBus._on("pagesinit",()=>{this._isPagesLoaded=!1,this.eventBus._on("pagesloaded",N=>{this._isPagesLoaded=!!N.pagesCount},{once:!0})})}initialize({fingerprint:c,resetHistory:b=!1,updateUrl:N=!1}){if(!c||"string"!=typeof c)return void console.error('PDFHistory.initialize: The "fingerprint" must be a non-empty string.');this._initialized&&this.reset();const I=""!==this._fingerprint&&this._fingerprint!==c;this._fingerprint=c,this._updateUrl=!0===N,this._initialized=!0,this._bindEvents();const Y=window.history.state;if(this._popStateInProgress=!1,this._blockHashChange=0,this._currentHash=e(),this._numPositionUpdates=0,this._uid=this._maxUid=0,this._destination=null,this._position=null,!this._isValidState(Y,!0)||b){const{hash:j,page:z,rotation:ee}=this._parseCurrentHash(!0);return!j||I||b?void this._pushOrReplaceState(null,!0):void this._pushOrReplaceState({hash:j,page:z,rotation:ee},!0)}const W=Y.destination;this._updateInternalState(W,Y.uid,!0),void 0!==W.rotation&&(this._initialRotation=W.rotation),W.dest?(this._initialBookmark=JSON.stringify(W.dest),this._destination.page=null):W.hash?this._initialBookmark=W.hash:W.page&&(this._initialBookmark=`page=${W.page}`)}reset(){this._initialized&&(this._pageHide(),this._initialized=!1,this._unbindEvents()),this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),this._initialBookmark=null,this._initialRotation=null}push({namedDest:c=null,explicitDest:b,pageNumber:N}){if(!this._initialized)return;if(c&&"string"!=typeof c)return void console.error(`PDFHistory.push: "${c}" is not a valid namedDest parameter.`);if(!Array.isArray(b))return void console.error(`PDFHistory.push: "${b}" is not a valid explicitDest parameter.`);if(!this._isValidPage(N)&&(null!==N||this._destination))return void console.error(`PDFHistory.push: "${N}" is not a valid pageNumber parameter.`);const I=c||JSON.stringify(b);if(!I)return;let Y=!1;if(this._destination&&(v(this._destination.hash,I)||S(this._destination.dest,b))){if(this._destination.page)return;Y=!0}this._popStateInProgress&&!Y||(this._pushOrReplaceState({dest:b,hash:I,page:N,rotation:this.linkService.rotation},Y),this._popStateInProgress||(this._popStateInProgress=!0,Promise.resolve().then(()=>{this._popStateInProgress=!1})))}pushPage(c){if(this._initialized){if(!this._isValidPage(c))return void console.error(`PDFHistory.pushPage: "${c}" is not a valid page number.`);this._destination?.page!==c&&(this._popStateInProgress||(this._pushOrReplaceState({dest:null,hash:`page=${c}`,page:c,rotation:this.linkService.rotation}),this._popStateInProgress||(this._popStateInProgress=!0,Promise.resolve().then(()=>{this._popStateInProgress=!1}))))}}pushCurrentPosition(){!this._initialized||this._popStateInProgress||this._tryPushCurrentPosition()}back(){if(!this._initialized||this._popStateInProgress)return;const c=window.history.state;this._isValidState(c)&&c.uid>0&&window.history.back()}forward(){if(!this._initialized||this._popStateInProgress)return;const c=window.history.state;this._isValidState(c)&&c.uid<this._maxUid&&window.history.forward()}get popStateInProgress(){return this._initialized&&(this._popStateInProgress||this._blockHashChange>0)}get initialBookmark(){return this._initialized?this._initialBookmark:null}get initialRotation(){return this._initialized?this._initialRotation:null}_pushOrReplaceState(c,b=!1){const N=b||!this._destination,I={fingerprint:this._fingerprint,uid:N?this._uid:this._uid+1,destination:c};let Y;if(this._updateInternalState(c,I.uid),this._updateUrl&&c?.hash){const W=document.location.href.split("#")[0];W.startsWith("file://")||(Y=`${W}#${c.hash}`)}N?window.history.replaceState(I,"",Y):window.history.pushState(I,"",Y)}_tryPushCurrentPosition(c=!1){if(!this._position)return;let b=this._position;if(c&&(b=Object.assign(Object.create(null),this._position),b.temporary=!0),!this._destination)return void this._pushOrReplaceState(b);if(this._destination.temporary)return void this._pushOrReplaceState(b,!0);if(this._destination.hash===b.hash||!this._destination.page&&this._numPositionUpdates<=50)return;let N=!1;if(this._destination.page>=b.first&&this._destination.page<=b.page){if(void 0!==this._destination.dest||!this._destination.first)return;N=!0}this._pushOrReplaceState(b,N)}_isValidPage(c){return Number.isInteger(c)&&c>0&&c<=this.linkService.pagesCount}_isValidState(c,b=!1){if(!c)return!1;if(c.fingerprint!==this._fingerprint){if(!b)return!1;{if("string"!=typeof c.fingerprint||c.fingerprint.length!==this._fingerprint.length)return!1;const[N]=performance.getEntriesByType("navigation");if("reload"!==N?.type)return!1}}return!(!Number.isInteger(c.uid)||c.uid<0||null===c.destination||"object"!=typeof c.destination)}_updateInternalState(c,b,N=!1){this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),N&&c?.temporary&&delete c.temporary,this._destination=c,this._uid=b,this._maxUid=Math.max(this._maxUid,b),this._numPositionUpdates=0}_parseCurrentHash(c=!1){const b=unescape(e()).substring(1),N=(0,A.parseQueryString)(b),I=N.get("nameddest")||"";let Y=0|N.get("page");return(!this._isValidPage(Y)||c&&I.length>0)&&(Y=null),{hash:b,page:Y,rotation:this.linkService.rotation}}_updateViewarea({location:c}){this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),this._position={hash:c.pdfOpenParams.substring(1),page:this.linkService.page,first:c.pageNumber,rotation:c.rotation},!this._popStateInProgress&&(this._isPagesLoaded&&this._destination&&!this._destination.page&&this._numPositionUpdates++,this._updateViewareaTimeout=setTimeout(()=>{this._popStateInProgress||this._tryPushCurrentPosition(!0),this._updateViewareaTimeout=null},1e3))}_popState({state:c}){const b=e(),N=this._currentHash!==b;if(this._currentHash=b,!c){this._uid++;const{hash:Y,page:W,rotation:j}=this._parseCurrentHash();return void this._pushOrReplaceState({hash:Y,page:W,rotation:j},!0)}if(!this._isValidState(c))return;this._popStateInProgress=!0,N&&(this._blockHashChange++,(0,y.waitOnEventOrTimeout)({target:window,name:"hashchange",delay:1e3}).then(()=>{this._blockHashChange--}));const I=c.destination;this._updateInternalState(I,c.uid,!0),(0,A.isValidRotation)(I.rotation)&&(this.linkService.rotation=I.rotation),I.dest?this.linkService.goToDestination(I.dest):I.hash?this.linkService.setHash(I.hash):I.page&&(this.linkService.page=I.page),Promise.resolve().then(()=>{this._popStateInProgress=!1})}_pageHide(){(!this._destination||this._destination.temporary)&&this._tryPushCurrentPosition()}_bindEvents(){this._boundEvents||(this._boundEvents={updateViewarea:this._updateViewarea.bind(this),popState:this._popState.bind(this),pageHide:this._pageHide.bind(this)},this.eventBus._on("updateviewarea",this._boundEvents.updateViewarea),window.addEventListener("popstate",this._boundEvents.popState),window.addEventListener("pagehide",this._boundEvents.pageHide))}_unbindEvents(){this._boundEvents&&(this.eventBus._off("updateviewarea",this._boundEvents.updateViewarea),window.removeEventListener("popstate",this._boundEvents.popState),window.removeEventListener("pagehide",this._boundEvents.pageHide),this._boundEvents=null)}}},(w,a,_)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.PDFScriptingManager=void 0;var A=_(7),y=_(3);a.PDFScriptingManager=class P{constructor({eventBus:t,sandboxBundleSrc:e=null,scriptingFactory:o=null,docPropertiesLookup:v=null}){this._pdfDocument=null,this._pdfViewer=null,this._closeCapability=null,this._destroyCapability=null,this._scripting=null,this._mouseState=Object.create(null),this._ready=!1,this._eventBus=t,this._sandboxBundleSrc=e,this._scriptingFactory=o,this._docPropertiesLookup=v,this._scriptingFactory||window.addEventListener("updatefromsandbox",S=>{this._eventBus.dispatch("updatefromsandbox",{source:window,detail:S.detail})})}setViewer(t){this._pdfViewer=t}setDocument(t){var e=this;return D(function*(){if(e._pdfDocument&&(yield e._destroyScripting()),e._pdfDocument=t,!t)return;const[o,v,S]=yield Promise.all([t.getFieldObjects(),t.getCalculationOrderIds(),t.getJSActions()]);if(o||S){if(t===e._pdfDocument){try{e._scripting=e._createScripting()}catch(p){return console.error(`PDFScriptingManager.setDocument: "${p?.message}".`),void(yield e._destroyScripting())}e._internalEvents.set("updatefromsandbox",p=>{p?.source===window&&e._updateFromSandbox(p.detail)}),e._internalEvents.set("dispatcheventinsandbox",p=>{e._scripting?.dispatchEventInSandbox(p.detail)}),e._internalEvents.set("pagechanging",({pageNumber:p,previous:c})=>{p!==c&&(e._dispatchPageClose(c),e._dispatchPageOpen(p))}),e._internalEvents.set("pagerendered",({pageNumber:p})=>{e._pageOpenPending.has(p)&&p===e._pdfViewer.currentPageNumber&&e._dispatchPageOpen(p)}),e._internalEvents.set("pagesdestroy",function(){var p=D(function*(c){yield e._dispatchPageClose(e._pdfViewer.currentPageNumber),yield e._scripting?.dispatchEventInSandbox({id:"doc",name:"WillClose"}),e._closeCapability?.resolve()});return function(c){return p.apply(this,arguments)}}()),e._domEvents.set("mousedown",p=>{e._mouseState.isDown=!0}),e._domEvents.set("mouseup",p=>{e._mouseState.isDown=!1});for(const[p,c]of e._internalEvents)e._eventBus._on(p,c);for(const[p,c]of e._domEvents)window.addEventListener(p,c,!0);try{const p=yield e._getDocProperties();if(t!==e._pdfDocument)return;yield e._scripting.createSandbox({objects:o,calculationOrder:v,appInfo:{platform:navigator.platform,language:navigator.language},docInfo:{...p,actions:S}}),e._eventBus.dispatch("sandboxcreated",{source:e})}catch(p){return console.error(`PDFScriptingManager.setDocument: "${p?.message}".`),void(yield e._destroyScripting())}yield e._scripting?.dispatchEventInSandbox({id:"doc",name:"Open"}),yield e._dispatchPageOpen(e._pdfViewer.currentPageNumber,!0),Promise.resolve().then(()=>{t===e._pdfDocument&&(e._ready=!0)})}}else yield e._destroyScripting()})()}dispatchWillSave(t){var e=this;return D(function*(){return e._scripting?.dispatchEventInSandbox({id:"doc",name:"WillSave"})})()}dispatchDidSave(t){var e=this;return D(function*(){return e._scripting?.dispatchEventInSandbox({id:"doc",name:"DidSave"})})()}dispatchWillPrint(t){var e=this;return D(function*(){return e._scripting?.dispatchEventInSandbox({id:"doc",name:"WillPrint"})})()}dispatchDidPrint(t){var e=this;return D(function*(){return e._scripting?.dispatchEventInSandbox({id:"doc",name:"DidPrint"})})()}get mouseState(){return this._mouseState}get destroyPromise(){return this._destroyCapability?.promise||null}get ready(){return this._ready}get _internalEvents(){return(0,y.shadow)(this,"_internalEvents",new Map)}get _domEvents(){return(0,y.shadow)(this,"_domEvents",new Map)}get _pageOpenPending(){return(0,y.shadow)(this,"_pageOpenPending",new Set)}get _visitedPages(){return(0,y.shadow)(this,"_visitedPages",new Map)}_updateFromSandbox(t){var e=this;return D(function*(){const o=e._pdfViewer.isInPresentationMode||e._pdfViewer.isChangingPresentationMode,{id:v,siblings:S,command:p,value:c}=t;if(!v){switch(p){case"clear":console.clear();break;case"error":console.error(c);break;case"layout":if(o)return;const N=(0,A.apiPageLayoutToViewerModes)(c);e._pdfViewer.spreadMode=N.spreadMode;break;case"page-num":e._pdfViewer.currentPageNumber=c+1;break;case"print":yield e._pdfViewer.pagesPromise,e._eventBus.dispatch("print",{source:e});break;case"println":console.log(c);break;case"zoom":if(o)return;e._pdfViewer.currentScaleValue=c;break;case"SaveAs":e._eventBus.dispatch("download",{source:e});break;case"FirstPage":e._pdfViewer.currentPageNumber=1;break;case"LastPage":e._pdfViewer.currentPageNumber=e._pdfViewer.pagesCount;break;case"NextPage":e._pdfViewer.nextPage();break;case"PrevPage":e._pdfViewer.previousPage();break;case"ZoomViewIn":if(o)return;e._pdfViewer.increaseScale();break;case"ZoomViewOut":if(o)return;e._pdfViewer.decreaseScale()}return}if(o&&t.focus)return;delete t.id,delete t.siblings;const b=S?[v,...S]:[v];for(const N of b){const I=document.querySelector(`[data-element-id="${N}"]`);I?I.dispatchEvent(new CustomEvent("updatefromsandbox",{detail:t})):e._pdfDocument?.annotationStorage.setValue(N,t)}})()}_dispatchPageOpen(t,e=!1){var o=this;return D(function*(){const v=o._pdfDocument,S=o._visitedPages;if(e&&(o._closeCapability=(0,y.createPromiseCapability)()),!o._closeCapability)return;const p=o._pdfViewer.getPageView(t-1);if(p?.renderingState!==A.RenderingStates.FINISHED)return void o._pageOpenPending.add(t);o._pageOpenPending.delete(t);const c=D(function*(){const b=yield S.has(t)?null:p.pdfPage?.getJSActions();v===o._pdfDocument&&(yield o._scripting?.dispatchEventInSandbox({id:"page",name:"PageOpen",pageNumber:t,actions:b}))})();S.set(t,c)})()}_dispatchPageClose(t){var e=this;return D(function*(){const o=e._pdfDocument,v=e._visitedPages;if(!e._closeCapability||e._pageOpenPending.has(t))return;const S=v.get(t);S&&(v.set(t,null),yield S,o===e._pdfDocument&&(yield e._scripting?.dispatchEventInSandbox({id:"page",name:"PageClose",pageNumber:t})))})()}_getDocProperties(){var t=this;return D(function*(){if(t._docPropertiesLookup)return t._docPropertiesLookup(t._pdfDocument);const{docPropertiesLookup:e}=_(26);return e(t._pdfDocument)})()}_createScripting(){if(this._destroyCapability=(0,y.createPromiseCapability)(),this._scripting)throw new Error("_createScripting: Scripting already exists.");if(this._scriptingFactory)return this._scriptingFactory.createScripting({sandboxBundleSrc:this._sandboxBundleSrc});const{GenericScripting:t}=_(26);return new t(this._sandboxBundleSrc)}_destroyScripting(){var t=this;return D(function*(){if(!t._scripting)return t._pdfDocument=null,void t._destroyCapability?.resolve();t._closeCapability&&(yield Promise.race([t._closeCapability.promise,new Promise(e=>{setTimeout(e,1e3)})]).catch(e=>{}),t._closeCapability=null),t._pdfDocument=null;try{yield t._scripting.destroySandbox()}catch{}for(const[e,o]of t._internalEvents)t._eventBus._off(e,o);t._internalEvents.clear();for(const[e,o]of t._domEvents)window.removeEventListener(e,o,!0);t._domEvents.clear(),t._pageOpenPending.clear(),t._visitedPages.clear(),t._scripting=null,delete t._mouseState.isDown,t._ready=!1,t._destroyCapability?.resolve()})()}}},(w,a,_)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.GenericScripting=void 0,a.docPropertiesLookup=function y(t){return P.apply(this,arguments)};var A=_(3);function P(){return(P=D(function*(t){const o="".split("#")[0];let{info:v,metadata:S,contentDispositionFilename:p,contentLength:c}=yield t.getMetadata();if(!c){const{length:b}=yield t.getDownloadInfo();c=b}return{...v,baseURL:o,filesize:c,filename:p||(0,A.getPdfFilenameFromUrl)(""),metadata:S?.getRaw(),authors:S?.get("dc:creator"),numPages:t.numPages,URL:""}})).apply(this,arguments)}a.GenericScripting=class u{constructor(e){this._ready=(0,A.loadScript)(e,!0).then(()=>window.pdfjsSandbox.QuickJSSandbox())}createSandbox(e){var o=this;return D(function*(){(yield o._ready).create(e)})()}dispatchEventInSandbox(e){var o=this;return D(function*(){const v=yield o._ready;setTimeout(()=>v.dispatchEvent(e),0)})()}destroySandbox(){var e=this;return D(function*(){(yield e._ready).nukeSandbox()})()}}}],q={};function U(w){var a=q[w];if(void 0!==a)return a.exports;var _=q[w]={exports:{}};return G[w](_,_.exports,U),_.exports}var C={};return(()=>{var w=C;Object.defineProperty(w,"__esModule",{value:!0}),Object.defineProperty(w,"AnnotationLayerBuilder",{enumerable:!0,get:function(){return P.AnnotationLayerBuilder}}),Object.defineProperty(w,"DefaultAnnotationLayerFactory",{enumerable:!0,get:function(){return a.DefaultAnnotationLayerFactory}}),Object.defineProperty(w,"DefaultStructTreeLayerFactory",{enumerable:!0,get:function(){return a.DefaultStructTreeLayerFactory}}),Object.defineProperty(w,"DefaultTextLayerFactory",{enumerable:!0,get:function(){return a.DefaultTextLayerFactory}}),Object.defineProperty(w,"DefaultXfaLayerFactory",{enumerable:!0,get:function(){return a.DefaultXfaLayerFactory}}),Object.defineProperty(w,"DownloadManager",{enumerable:!0,get:function(){return u.DownloadManager}}),Object.defineProperty(w,"EventBus",{enumerable:!0,get:function(){return t.EventBus}}),Object.defineProperty(w,"GenericL10n",{enumerable:!0,get:function(){return e.GenericL10n}}),Object.defineProperty(w,"LinkTarget",{enumerable:!0,get:function(){return _.LinkTarget}}),Object.defineProperty(w,"NullL10n",{enumerable:!0,get:function(){return o.NullL10n}}),Object.defineProperty(w,"PDFFindController",{enumerable:!0,get:function(){return v.PDFFindController}}),Object.defineProperty(w,"PDFHistory",{enumerable:!0,get:function(){return S.PDFHistory}}),Object.defineProperty(w,"PDFLinkService",{enumerable:!0,get:function(){return _.PDFLinkService}}),Object.defineProperty(w,"PDFPageView",{enumerable:!0,get:function(){return p.PDFPageView}}),Object.defineProperty(w,"PDFScriptingManager",{enumerable:!0,get:function(){return c.PDFScriptingManager}}),Object.defineProperty(w,"PDFSinglePageViewer",{enumerable:!0,get:function(){return y.PDFSinglePageViewer}}),Object.defineProperty(w,"PDFViewer",{enumerable:!0,get:function(){return y.PDFViewer}}),Object.defineProperty(w,"ProgressBar",{enumerable:!0,get:function(){return A.ProgressBar}}),Object.defineProperty(w,"RenderingStates",{enumerable:!0,get:function(){return A.RenderingStates}}),Object.defineProperty(w,"ScrollMode",{enumerable:!0,get:function(){return A.ScrollMode}}),Object.defineProperty(w,"SimpleLinkService",{enumerable:!0,get:function(){return _.SimpleLinkService}}),Object.defineProperty(w,"SpreadMode",{enumerable:!0,get:function(){return A.SpreadMode}}),Object.defineProperty(w,"StructTreeLayerBuilder",{enumerable:!0,get:function(){return b.StructTreeLayerBuilder}}),Object.defineProperty(w,"TextLayerBuilder",{enumerable:!0,get:function(){return N.TextLayerBuilder}}),Object.defineProperty(w,"XfaLayerBuilder",{enumerable:!0,get:function(){return I.XfaLayerBuilder}}),Object.defineProperty(w,"parseQueryString",{enumerable:!0,get:function(){return A.parseQueryString}});var a=U(1),_=U(6),A=U(7),y=U(11),P=U(5),u=U(18),t=U(19),e=U(20),o=U(4),v=U(22),S=U(24),p=U(13),c=U(25),b=U(8),N=U(9),I=U(10)})(),C})()},3414:()=>{},172:()=>{},2001:()=>{},3779:()=>{},6558:()=>{},2258:()=>{},7156:Z=>{function s(r,m,n,D,Q,F,T){try{var G=r[F](T),q=G.value}catch(U){return void n(U)}G.done?m(q):Promise.resolve(q).then(D,Q)}Z.exports=function k(r){return function(){var m=this,n=arguments;return new Promise(function(D,Q){var F=r.apply(m,n);function T(q){s(F,D,Q,T,G,"next",q)}function G(q){s(F,D,Q,T,G,"throw",q)}T(void 0)})}},Z.exports.__esModule=!0,Z.exports.default=Z.exports},6521:Z=>{Z.exports=function s(k,r){if(r.has(k))throw new TypeError("Cannot initialize the same private elements twice on an object")},Z.exports.__esModule=!0,Z.exports.default=Z.exports},8912:Z=>{Z.exports=function s(k,r){return r.get?r.get.call(k):r.value},Z.exports.__esModule=!0,Z.exports.default=Z.exports},3448:Z=>{Z.exports=function s(k,r,m){if(r.set)r.set.call(k,m);else{if(!r.writable)throw new TypeError("attempted to set read only private field");r.value=m}},Z.exports.__esModule=!0,Z.exports.default=Z.exports},2625:Z=>{Z.exports=function s(k,r){if(k!==r)throw new TypeError("Private static access of wrong provenance")},Z.exports.__esModule=!0,Z.exports.default=Z.exports},2506:Z=>{Z.exports=function s(k,r){if(void 0===k)throw new TypeError("attempted to "+r+" private static field before its declaration")},Z.exports.__esModule=!0,Z.exports.default=Z.exports},4069:Z=>{Z.exports=function s(k,r,m){if(!r.has(k))throw new TypeError("attempted to "+m+" private field on non-instance");return r.get(k)},Z.exports.__esModule=!0,Z.exports.default=Z.exports},468:(Z,s,k)=>{var r=k(8912),m=k(4069);Z.exports=function n(D,Q){var F=m(D,Q,"get");return r(D,F)},Z.exports.__esModule=!0,Z.exports.default=Z.exports},9159:(Z,s,k)=>{var r=k(6521);Z.exports=function m(n,D,Q){r(n,D),D.set(n,Q)},Z.exports.__esModule=!0,Z.exports.default=Z.exports},5661:(Z,s,k)=>{var r=k(3448),m=k(4069);Z.exports=function n(D,Q,F){var T=m(D,Q,"set");return r(D,T,F),F},Z.exports.__esModule=!0,Z.exports.default=Z.exports},4467:Z=>{Z.exports=function s(k,r,m){if(!r.has(k))throw new TypeError("attempted to get private field on non-instance");return m},Z.exports.__esModule=!0,Z.exports.default=Z.exports},1860:(Z,s,k)=>{var r=k(6521);Z.exports=function m(n,D){r(n,D),D.add(n)},Z.exports.__esModule=!0,Z.exports.default=Z.exports},1280:(Z,s,k)=>{var r=k(8912),m=k(2625),n=k(2506);Z.exports=function D(Q,F,T){return m(Q,F),n(T,"get"),r(Q,T)},Z.exports.__esModule=!0,Z.exports.default=Z.exports},9382:(Z,s,k)=>{var r=k(3448),m=k(2625),n=k(2506);Z.exports=function D(Q,F,T,G){return m(Q,F),n(T,"set"),r(Q,T,G),G},Z.exports.__esModule=!0,Z.exports.default=Z.exports},5764:(Z,s,k)=>{var r=k(2625);Z.exports=function m(n,D,Q){return r(n,D),Q},Z.exports.__esModule=!0,Z.exports.default=Z.exports},8416:(Z,s,k)=>{var r=k(4062);Z.exports=function m(n,D,Q){return(D=r(D))in n?Object.defineProperty(n,D,{value:Q,enumerable:!0,configurable:!0,writable:!0}):n[D]=Q,n},Z.exports.__esModule=!0,Z.exports.default=Z.exports},5036:(Z,s,k)=>{var r=k(8698).default;Z.exports=function m(n,D){if("object"!==r(n)||null===n)return n;var Q=n[Symbol.toPrimitive];if(void 0!==Q){var F=Q.call(n,D||"default");if("object"!==r(F))return F;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===D?String:Number)(n)},Z.exports.__esModule=!0,Z.exports.default=Z.exports},4062:(Z,s,k)=>{var r=k(8698).default,m=k(5036);Z.exports=function n(D){var Q=m(D,"string");return"symbol"===r(Q)?Q:String(Q)},Z.exports.__esModule=!0,Z.exports.default=Z.exports},8698:Z=>{function s(k){return Z.exports=s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Z.exports.__esModule=!0,Z.exports.default=Z.exports,s(k)}Z.exports=s,Z.exports.__esModule=!0,Z.exports.default=Z.exports}}]);